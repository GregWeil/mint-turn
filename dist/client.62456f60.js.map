{"version":3,"sources":["../node_modules/two.js/build/two.module.js","../node_modules/object-assign/index.js","../node_modules/gl-vec3/cross.js","../node_modules/gl-vec3/dot.js","../node_modules/gl-vec3/subtract.js","../node_modules/ray-triangle-intersection/index.js","../node_modules/gl-vec3/add.js","../node_modules/gl-vec3/scale.js","../node_modules/gl-vec3/copy.js","../node_modules/ray-plane-intersection/index.js","../node_modules/gl-vec3/squaredDistance.js","../node_modules/gl-vec3/scaleAndAdd.js","../node_modules/ray-sphere-intersection/index.js","../node_modules/ray-aabb-intersection/index.js","../node_modules/ray-3d/index.js","../node_modules/gl-vec4/transformMat4.js","../node_modules/gl-vec4/set.js","../node_modules/camera-project/index.js","../node_modules/camera-unproject/lib/projectMat4.js","../node_modules/camera-unproject/index.js","../node_modules/gl-vec3/normalize.js","../node_modules/perspective-camera/lib/camera-look-at.js","../node_modules/gl-vec3/set.js","../node_modules/camera-picking-ray/index.js","../node_modules/gl-mat4/multiply.js","../node_modules/gl-mat4/invert.js","../node_modules/gl-mat4/identity.js","../node_modules/perspective-camera/lib/camera-base.js","../node_modules/defined/index.js","../node_modules/gl-mat4/perspective.js","../node_modules/gl-mat4/lookAt.js","../node_modules/perspective-camera/lib/camera-perspective.js","../node_modules/perspective-camera/index.js","../node_modules/gl-mat4/create.js","../node_modules/gl-mat4/clone.js","../node_modules/gl-mat4/copy.js","../node_modules/gl-mat4/transpose.js","../node_modules/gl-mat4/adjoint.js","../node_modules/gl-mat4/determinant.js","../node_modules/gl-mat4/translate.js","../node_modules/gl-mat4/scale.js","../node_modules/gl-mat4/rotate.js","../node_modules/gl-mat4/rotateX.js","../node_modules/gl-mat4/rotateY.js","../node_modules/gl-mat4/rotateZ.js","../node_modules/gl-mat4/fromRotation.js","../node_modules/gl-mat4/fromRotationTranslation.js","../node_modules/gl-mat4/fromScaling.js","../node_modules/gl-mat4/fromTranslation.js","../node_modules/gl-mat4/fromXRotation.js","../node_modules/gl-mat4/fromYRotation.js","../node_modules/gl-mat4/fromZRotation.js","../node_modules/gl-mat4/fromQuat.js","../node_modules/gl-mat4/frustum.js","../node_modules/gl-mat4/perspectiveFromFieldOfView.js","../node_modules/gl-mat4/ortho.js","../node_modules/gl-mat4/str.js","../node_modules/gl-mat4/index.js","controls.js","../make-group.js","../compute-centroid.js","../make-anchor.js","../make-hull.js","../make-path.js","../node_modules/gl-vec3/epsilon.js","../node_modules/gl-vec3/create.js","../node_modules/gl-vec3/clone.js","../node_modules/gl-vec3/fromValues.js","../node_modules/gl-vec3/angle.js","../node_modules/gl-vec3/equals.js","../node_modules/gl-vec3/exactEquals.js","../node_modules/gl-vec3/sub.js","../node_modules/gl-vec3/multiply.js","../node_modules/gl-vec3/mul.js","../node_modules/gl-vec3/divide.js","../node_modules/gl-vec3/div.js","../node_modules/gl-vec3/min.js","../node_modules/gl-vec3/max.js","../node_modules/gl-vec3/floor.js","../node_modules/gl-vec3/ceil.js","../node_modules/gl-vec3/round.js","../node_modules/gl-vec3/distance.js","../node_modules/gl-vec3/dist.js","../node_modules/gl-vec3/sqrDist.js","../node_modules/gl-vec3/length.js","../node_modules/gl-vec3/len.js","../node_modules/gl-vec3/squaredLength.js","../node_modules/gl-vec3/sqrLen.js","../node_modules/gl-vec3/negate.js","../node_modules/gl-vec3/inverse.js","../node_modules/gl-vec3/lerp.js","../node_modules/gl-vec3/random.js","../node_modules/gl-vec3/transformMat4.js","../node_modules/gl-vec3/transformMat3.js","../node_modules/gl-vec3/transformQuat.js","../node_modules/gl-vec3/rotateX.js","../node_modules/gl-vec3/rotateY.js","../node_modules/gl-vec3/rotateZ.js","../node_modules/gl-vec3/forEach.js","../node_modules/gl-vec3/index.js","../make-transform.js","client.js","../../rbd/pnpm-volume/a66ecce8-b629-46e7-b14b-63541ded7a9d/node_modules/.registry.npmjs.org/parcel-bundler/1.12.3/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["window","Two","previousTwo","root","global","toString","Object","prototype","_","_indexAmount","natural","slice","Array","indexOf","keys","bind","Function","create","identity","value","isArguments","obj","call","isFunction","isString","isNumber","isDate","isRegExp","isError","isFinite","isNaN","parseFloat","isBoolean","isNull","isUndefined","isEmpty","isArrayLike","isArray","length","isElement","nodeType","isObject","type","toArray","map","values","range","start","stop","step","Math","max","ceil","idx","list","item","i","has","key","hasOwnProperty","func","ctx","apply","arguments","args","extend","base","sources","k","defaults","push","each","iteratee","context","result","once","init","after","times","uniqueId","prefix","id","sin","cos","acos","atan2","sqrt","round","abs","PI","TWO_PI","HALF_PI","pow","min","count","perf","performance","now","Date","MAX_ARRAY_INDEX","getLength","collection","dom","temp","document","createElement","hasEventListeners","addEventListener","elem","event","bool","attachEvent","unbind","removeEventListeners","detachEvent","getRequestAnimationFrame","lastTime","vendors","request","requestAnimationFrame","cancel","callback","element","currTime","getTime","timeToCall","setTimeout","loop","options","params","fullscreen","width","height","Types","svg","autostart","v","test","domElement","tagName","toLowerCase","renderer","Utils","setPlaying","frameCount","fitted","fitToWindow","body","style","overflow","margin","padding","top","left","right","bottom","position","display","setSize","ratio","Events","resize","updateDimensions","scene","Instances","raf","nextFrameID","Float32Array","webgl","canvas","Version","PublishDate","Identifier","play","pause","update","render","change","remove","insert","order","load","Commands","move","line","curve","arc","close","Resolution","noConflict","defineProperty","property","object","secret","flag","charAt","toUpperCase","enumerable","get","set","Image","isHeadless","shim","CanvasRenderer","release","vertices","children","xhr","path","XMLHttpRequest","open","onreadystatechange","readyState","status","responseText","send","Curve","CollinearityEpsilon","RecursionLimit","CuspLimit","Tolerance","distance","angle","epsilon","Number","EPSILON","abscissas","weights","devicePixelRatio","getBackingStoreRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","getRatio","b","playing","getComputedMatrix","matrix","Matrix","parent","matrices","_matrix","reverse","m","e","elements","multiply","deltaTransformPoint","x","y","dx","a","c","dy","d","Vector","decomposeMatrix","px","py","skewX","skewY","translateX","translateY","f","scaleX","scaleY","rotation","extractCSSText","text","styles","commands","command","name","split","replace","getSvgStyles","node","applySvgViewBox","s","translation","scale","applySvgAttributes","parentStyles","attributes","extracted","attr","getComputedStyle","computedStyles","nodeName","opacity","visible","visibility","transform","baseVal","getCTM","transforms","cap","join","miter","linewidth","Group","getById","classList","read","g","viewBox","getAttribute","attrs","group","l","childNodes","n","tag","o","add","polygon","points","verts","match","p1","p2","Anchor","poly","Path","noStroke","fill","polyline","closed","coord","control","coords","relative","last","number","fid","lid","numbers","first","j","ct","lower","items","trim","pre","post","bin","hasDoubleDecimals","lastIndexOf","splice","concat","n1","n2","x1","y1","x2","y2","x3","y3","x4","y4","reflection","undefined","point","addSelf","getReflection","controls","AppendCurveProperties","isZero","rx","ry","xAxisRotation","largeArcFlag","sweepFlag","anchor","rect","getBoundingClientRect","centroid","subSelf","circle","r","Circle","ellipse","Ellipse","w2","h2","Rectangle","radius","RoundedRectangle","Line","noFill","lineargradient","ox","oy","stops","child","offset","color","matches","Gradient","Stop","gradient","LinearGradient","radialgradient","cx","cy","fx","fy","RadialGradient","subdivide","limit","amount","t","getComponentOnCubicBezier","getCurveLength","ax","bx","ay","by","integrand","integrate","getCurveBoundingBox","tvalues","bounds","t1","t2","b2ac","sqrtb2ac","jlen","mt","w","A","B","sum","Ax","getCurveFromPoints","prev","mod","next","getControlPoints","a1","angleBetween","a2","d1","distanceBetween","d2","mid","copy","getAnchorsFromArcData","center","ts","td","ccw","translate","rotate","pct","theta","lerp","toFixed","floor","Collection","Error","message","on","handler","_events","off","names","events","ev","trigger","listen","bound","ignore","method","constructor","pop","popped","shift","shifted","pushed","unshift","unshifted","spliced","inserted","sort","solveSegmentIntersection","decoupleShapes","appendTo","appendChild","animated","_lastFrame","timeDelta","objects","clear","makeLine","makeRectangle","makeRoundedRectangle","sides","makeCircle","makeEllipse","makeStar","outerRadius","innerRadius","star","Star","makeCurve","p","makePolygon","Polygon","makeArcSegment","ir","or","sa","ea","res","arcSegment","ArcSegment","makePath","makeText","Text","makeLinearGradient","makeRadialGradient","makeSprite","cols","rows","frameRate","sprite","Sprite","makeImageSequence","paths","imageSequence","ImageSequence","makeTexture","texture","Texture","makeGroup","interpret","svgNode","shallow","attach","data","innerHTML","wr","define","amd","module","exports","Registry","contains","zero","v1","v2","sub","subtract","ratioBetween","distanceBetweenSquared","MakeObservable","_bound","_x","_y","xgs","ygs","BoundProto","clone","subtractSelf","multiplySelf","multiplyScalar","divide","divideSelf","divideScalar","negate","dot","lengthSquared","normalize","distanceTo","distanceToSquared","setLength","equals","eps","toObject","radians","lx","ly","_broadcast","_command","_relative","ilx","ily","irx","iry","AnchorProto","tan","fix","array","Identity","Multiply","C","z","A0","A1","A2","A3","A4","A5","A6","A7","A8","B0","B1","B2","B3","B4","B5","B6","B7","B8","manual","h","inverse","out","a00","a01","a02","a10","a11","a12","a20","a21","a22","b01","b11","b21","det","sx","sy","fullMatrix","output","hasOutput","version","ns","xlink","alignments","createElementNS","setAttributes","setAttributeNS","setAttribute","removeAttributes","removeAttribute","string","vx","vy","ux","uy","ar","bl","br","cl","getClip","shape","clip","_renderer","defs","_clip","removeChild","parentNode","orderChild","renderChild","_update","_opacity","_flagOpacity","flagMatrix","_flagMatrix","_flagClassName","_className","_flagAdditions","additions","forEach","_flagSubtractions","subtractions","_flagOrder","_flagMask","_mask","flagReset","changed","_flagVertices","_closed","_fill","_flagFill","_stroke","_flagStroke","stroke","_flagLinewidth","_linewidth","_flagVisible","_visible","_flagCap","_cap","_flagJoin","_join","_flagMiter","_miter","dashes","_flagClip","_flagFamily","_family","_flagSize","_size","_flagLeading","_leading","_flagAlignment","_alignment","_flagBaseline","_baseline","_flagStyle","_style","_flagWeight","_weight","_flagDecoration","_decoration","_flagValue","textContent","_value","silent","_flagEndPoints","_flagSpread","spreadMethod","_spread","gradientUnits","_flagStops","lengthChanged","_flagOffset","_offset","_flagColor","_color","_flagCenter","_flagFocal","focal","_flagRadius","_radius","image","_flagLoaded","loaded","href","toDataURL","src","_flagScale","_scale","_flagRepeat","_repeat","patternUnits","appended","Renderer","emptyArray","isDefaultMatrix","isHidden","middle","prop","val","defaultMatrix","mask","save","restore","forced","parentClipped","isOffset","fillStyle","effect","strokeStyle","lineWidth","miterLimit","lineJoin","lineCap","globalAlpha","setLineDash","beginPath","closePath","renderSvgArcCommand","bezierCurveTo","lineTo","moveTo","font","textAlign","textBaseline","fillText","strokeText","createLinearGradient","addColorStop","createRadialGradient","repeat","_flagImage","_flagVideo","createPattern","dx2","dy2","x1p","y1p","rxs","rys","x1ps","y1ps","cr","dq","pq","q","cxp","cyp","startAngle","svgAngle","delta","endAngle","clockwise","renderArcEstimate","smoothing","getContext","overdraw","imageSmoothingEnabled","isOne","clearRect","deltaAngle","samePoints","tx","ty","len","ang","resetTransform","setTransform","multiplyMatrix","transformation","CanvasUtils","uv","gl","deleteTexture","program","flagParentMatrix","enable","STENCIL_TEST","stencilFunc","ALWAYS","colorMask","stencilOp","KEEP","INCR","NOTEQUAL","DECR","disable","updateCanvas","border","Infinity","forcedParent","flagTexture","triangles","getTriangles","updateBuffer","updateTexture","bindBuffer","ARRAY_BUFFER","textureCoordsBuffer","vertexAttribPointer","textureCoords","FLOAT","bindTexture","TEXTURE_2D","uniformMatrix3fv","buffer","drawArrays","TRIANGLES","measureText","createTexture","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","LINEAR","texImage2D","RGBA","UNSIGNED_BYTE","deleteBuffer","createBuffer","enableVertexAttribArray","bufferData","STATIC_DRAW","shaders","linked","error","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","deleteProgram","source","shader","compiled","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","deleteShader","types","vertex","fragment","TextureRegistry","vs","fs","antialias","alpha","premultipliedAlpha","stencil","preserveDrawingBuffer","useProgram","getAttribLocation","getUniformLocation","DEPTH_TEST","BLEND","blendEquationSeparate","FUNC_ADD","blendFuncSeparate","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","ONE","viewport","resolutionLocation","uniform2f","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","Shape","FlagMatrix","isShape","_translation","_rotation","addTo","bubbles","RegExp","curved","flagVertices","FlagVertices","bindVertices","BindVertices","unbindVertices","UnbindVertices","flagFill","FlagFill","flagStroke","FlagStroke","_curved","beginning","ending","className","automatic","Properties","_flagLength","_updateLength","_length","_automatic","_beginning","_ending","_collection","updateVertices","corner","v0","c0","c1","bb","getPointAt","ia","ib","target","_lengths","t1x","t1y","t2x","t2y","t3x","t3y","brx","bry","alx","aly","plot","getSubdivisions","bid","getIdByLength","eid","low","high","elapsed","dist","total","origin","_origin","_width","_height","_flagWidth","_flagHeight","xr","yr","resolution","st","rc","_sides","_flagSides","_flagStartAngle","_flagEndAngle","_flagInnerRadius","_flagOuterRadius","_startAngle","_endAngle","_innerRadius","_outerRadius","connected","punctured","amp","outerradius","flagRadius","FlagRadius","getCanvas","Ratio","leading","size","alignment","baseline","console","warn","Index","flagStops","FlagStops","bindStops","BindStops","unbindStops","UnbindStops","spread","_stops","updateStops","flagEndPoints","FlagEndPoints","_flatCenter","regex","video","flagOffset","FlagOffset","flagScale","FlagScale","RegularExpressions","ImageRegistry","getAbsoluteURL","loadHeadlessBuffer","getImage","absoluteSrc","crossOrigin","Register","_src","img","removeEventListener","videoWidth","videoHeight","_flagSrc","_image","index","_loaded","columns","_flagTexture","_flagColumns","_flagRows","_flagFrameRate","flagIndex","_amount","_duration","_startTime","_playing","_firstFrame","_loop","_texture","_columns","_rows","_frameRate","_index","firstFrame","lastFrame","onLastFrame","_onLastFrame","duration","iw","ih","isRange","frames","col","row","flagTextures","FlagTextures","bindTextures","BindTextures","unbindTextures","UnbindTextures","textures","GenerateTexture","DefaultFrameRate","_flagTextures","_textures","updateTextures","_flagIndex","effects","Children","ids","detach","InsertChildren","replaceParent","RemoveChildren","OrderChildren","properties","_flagBeginning","_flagEnding","MakeGetterSetters","_children","insertChildren","removeChildren","orderChildren","MakeGetterSetter","search","found","getByClassName","getByType","grandparent","bd","ed","newParent","ToObject","TypeError","assign","from","to","OrbitControls","moveX","moveY","sensitivity","buttons","movementX","movementY","touches","Map","changedTouches","touch","clientX","clientY","lastX","lastY","delete","computeDistance","z1","z2","groupA","groupB","flip","project","cameraPosition","childrenWithDepth","getCentroid","depthSortedChildren","depthA","depthB","computeCentroid","sumX","sumY","sumZ","makeUpdateVertex","makeUpdateAnchor","makeAnchor","updateAnchor","computeCrossProductZ","findOuterRoute","sortedVertices","route","makeHull","strokeWidth","projectedVertices","routeA","routeB","anchors","updatePoints","makeTransform","updateChild","getChildCentroid","transformedVec3","invertedMat4","transformProject","vec3","two","camera","fov","near","far","input","filter","SVGRenderer","erode","in","operator","blur","stdDeviation","blend","segments","face","head","hat","hatTransform","hatInput","getElementById","rootGroup","updateRoot","cameraX","cameraY","cameraRadius","cameraRadiusH","up","lookAt","log","OVERLAY_ID","OldModule","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","JSON","parse","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","parcelRequire","every","generated","js","hmrApply","hmrAcceptRun","reload","onclose","removeErrorOverlay","stack","overlay","createErrorOverlay","stackTrace","innerText","getParents","modules","parents","dep","deps","cached","cache","some","cb"],"mappings":"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C3D,MAAIgP,IAAJ;AACA,MAAIhmC,IAAJ;AACA,MAAIimC,EAAE,GAAGJ,QAAQ,CAAC/J,MAAD,CAAjB;;AAEA,OAAK,IAAIprB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGzN,SAAS,CAACzB,MAA9B,EAAsCkP,CAAC,EAAvC,EAA2C;AAC1Cs1B,IAAAA,IAAI,GAAG/iC,SAAS,CAACyN,CAAD,CAAhB;AACA1Q,IAAAA,IAAI,GAAGR,MAAM,CAACQ,IAAP,CAAYR,MAAM,CAACwmC,IAAD,CAAlB,CAAP;;AAEA,SAAK,IAAItjC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG1C,IAAI,CAACwB,MAAzB,EAAiCkB,CAAC,EAAlC,EAAsC;AACrCujC,MAAAA,EAAE,CAACjmC,IAAI,CAAC0C,CAAD,CAAL,CAAF,GAAcsjC,IAAI,CAAChmC,IAAI,CAAC0C,CAAD,CAAL,CAAlB;AACA;AACD;;AAED,SAAOujC,EAAP;AACA,CAfD;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClFA;AACA;AACA;AACA;AACA;AACA;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACzCA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;;ACDA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACbA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACbA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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","file":"client.62456f60.js","sourceRoot":"../example","sourcesContent":["/**\n\nMIT License\n\nCopyright (c) 2012 - 2017 jonobr1 / http://jonobr1.com\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n\n*/\n\n(this || window).Two = (function(previousTwo) {\n\n  var root = typeof window != 'undefined' ? window : typeof global != 'undefined' ? global : null;\n  var toString = Object.prototype.toString;\n  /**\n   * @name _\n   * @interface\n   * @private\n   * @description A collection of useful functions borrowed and repurposed from Underscore.js.\n   * @see {@link http://underscorejs.org/}\n   */\n  var _ = {\n    // http://underscorejs.org/  1.8.3\n    _indexAmount: 0,\n    natural: {\n      slice: Array.prototype.slice,\n      indexOf: Array.prototype.indexOf,\n      keys: Object.keys,\n      bind: Function.prototype.bind,\n      create: Object.create\n    },\n    identity: function(value) {\n      return value;\n    },\n    isArguments: function(obj) {\n      return toString.call(obj) === '[object Arguments]';\n    },\n    isFunction: function(obj) {\n      return toString.call(obj) === '[object Function]';\n    },\n    isString: function(obj) {\n      return toString.call(obj) === '[object String]';\n    },\n    isNumber: function(obj) {\n      return toString.call(obj) === '[object Number]';\n    },\n    isDate: function(obj) {\n      return toString.call(obj) === '[object Date]';\n    },\n    isRegExp: function(obj) {\n      return toString.call(obj) === '[object RegExp]';\n    },\n    isError: function(obj) {\n      return toString.call(obj) === '[object Error]';\n    },\n    isFinite: function(obj) {\n      return isFinite(obj) && !isNaN(parseFloat(obj));\n    },\n    isNaN: function(obj) {\n      return _.isNumber(obj) && obj !== +obj;\n    },\n    isBoolean: function(obj) {\n      return obj === true || obj === false || toString.call(obj) === '[object Boolean]';\n    },\n    isNull: function(obj) {\n      return obj === null;\n    },\n    isUndefined: function(obj) {\n      return obj === void 0;\n    },\n    isEmpty: function(obj) {\n      if (obj == null) return true;\n      if (isArrayLike && (_.isArray(obj) || _.isString(obj) || _.isArguments(obj))) return obj.length === 0;\n      return _.keys(obj).length === 0;\n    },\n    isElement: function(obj) {\n      return !!(obj && obj.nodeType === 1);\n    },\n    isArray: Array.isArray || function(obj) {\n      return toString.call(obj) === '[object Array]';\n    },\n    isObject: function(obj) {\n      var type = typeof obj;\n      return type === 'function' || type === 'object' && !!obj;\n    },\n    toArray: function(obj) {\n      if (!obj) {\n        return [];\n      }\n      if (_.isArray(obj)) {\n        return slice.call(obj);\n      }\n      if (isArrayLike(obj)) {\n        return _.map(obj, _.identity);\n      }\n      return _.values(obj);\n    },\n    range: function(start, stop, step) {\n      if (stop == null) {\n        stop = start || 0;\n        start = 0;\n      }\n      step = step || 1;\n\n      var length = Math.max(Math.ceil((stop - start) / step), 0);\n      var range = Array(length);\n\n      for (var idx = 0; idx < length; idx++, start += step) {\n        range[idx] = start;\n      }\n\n      return range;\n    },\n    indexOf: function(list, item) {\n      if (!!_.natural.indexOf) {\n        return _.natural.indexOf.call(list, item);\n      }\n      for (var i = 0; i < list.length; i++) {\n        if (list[i] === item) {\n          return i;\n        }\n      }\n      return -1;\n    },\n    has: function(obj, key) {\n      return obj != null && hasOwnProperty.call(obj, key);\n    },\n    bind: function(func, ctx) {\n      var natural = _.natural.bind;\n      if (natural && func.bind === natural) {\n        return natural.apply(func, slice.call(arguments, 1));\n      }\n      var args = slice.call(arguments, 2);\n      return function() {\n        func.apply(ctx, args);\n      };\n    },\n    extend: function(base) {\n      var sources = slice.call(arguments, 1);\n      for (var i = 0; i < sources.length; i++) {\n        var obj = sources[i];\n        for (var k in obj) {\n          base[k] = obj[k];\n        }\n      }\n      return base;\n    },\n    defaults: function(base) {\n      var sources = slice.call(arguments, 1);\n      for (var i = 0; i < sources.length; i++) {\n        var obj = sources[i];\n        for (var k in obj) {\n          if (base[k] === void 0) {\n            base[k] = obj[k];\n          }\n        }\n      }\n      return base;\n    },\n    keys: function(obj) {\n      if (!_.isObject(obj)) {\n        return [];\n      }\n      if (_.natural.keys) {\n        return _.natural.keys(obj);\n      }\n      var keys = [];\n      for (var k in obj) {\n        if (_.has(obj, k)) {\n          keys.push(k);\n        }\n      }\n      return keys;\n    },\n    values: function(obj) {\n      var keys = _.keys(obj);\n      var values = [];\n      for (var i = 0; i < keys.length; i++) {\n        var k = keys[i];\n        values.push(obj[k]);\n      }\n      return values;\n    },\n    each: function(obj, iteratee, context) {\n      var ctx = context || this;\n      var keys = !isArrayLike(obj) && _.keys(obj);\n      var length = (keys || obj).length;\n      for (var i = 0; i < length; i++) {\n        var k = keys ? keys[i] : i;\n        iteratee.call(ctx, obj[k], k, obj);\n      }\n      return obj;\n    },\n    map: function(obj, iteratee, context) {\n      var ctx = context || this;\n      var keys = !isArrayLike(obj) && _.keys(obj);\n      var length = (keys || obj).length;\n      var result = [];\n      for (var i = 0; i < length; i++) {\n        var k = keys ? keys[i] : i;\n        result[i] = iteratee.call(ctx, obj[k], k, obj);\n      }\n      return result;\n    },\n    once: function(func) {\n      var init = false;\n      return function() {\n        if (!!init) {\n          return func;\n        }\n        init = true;\n        return func.apply(this, arguments);\n      }\n    },\n    after: function(times, func) {\n      return function() {\n        while (--times < 1) {\n          return func.apply(this, arguments);\n        }\n      }\n    },\n    uniqueId: function(prefix) {\n      var id = ++_._indexAmount + '';\n      return prefix ? prefix + id : id;\n    }\n  };\n\n  // Constants\n\n  var sin = Math.sin,\n    cos = Math.cos,\n    acos = Math.acos,\n    atan2 = Math.atan2,\n    sqrt = Math.sqrt,\n    round = Math.round,\n    abs = Math.abs,\n    PI = Math.PI,\n    TWO_PI = PI * 2,\n    HALF_PI = PI / 2,\n    pow = Math.pow,\n    min = Math.min,\n    max = Math.max;\n\n  // Localized variables\n\n  var count = 0;\n  var slice = _.natural.slice;\n  var perf = ((root.performance && root.performance.now) ? root.performance : Date);\n  var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;\n  var getLength = function(obj) {\n    return obj == null ? void 0 : obj['length'];\n  };\n  var isArrayLike = function(collection) {\n    var length = getLength(collection);\n    return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;\n  };\n\n  // Cross browser dom events.\n\n  var dom = {\n\n    temp: (root.document ? root.document.createElement('div') : {}),\n\n    hasEventListeners: _.isFunction(root.addEventListener),\n\n    bind: function(elem, event, func, bool) {\n      if (this.hasEventListeners) {\n        elem.addEventListener(event, func, !!bool);\n      } else {\n        elem.attachEvent('on' + event, func);\n      }\n      return dom;\n    },\n\n    unbind: function(elem, event, func, bool) {\n      if (dom.hasEventListeners) {\n        elem.removeEventListeners(event, func, !!bool);\n      } else {\n        elem.detachEvent('on' + event, func);\n      }\n      return dom;\n    },\n\n    getRequestAnimationFrame: function() {\n\n      var lastTime = 0;\n      var vendors = ['ms', 'moz', 'webkit', 'o'];\n      var request = root.requestAnimationFrame, cancel;\n\n      if(!request) {\n        for (var i = 0; i < vendors.length; i++) {\n          request = root[vendors[i] + 'RequestAnimationFrame'] || request;\n          cancel = root[vendors[i] + 'CancelAnimationFrame']\n            || root[vendors[i] + 'CancelRequestAnimationFrame'] || cancel;\n        }\n\n        request = request || function(callback, element) {\n          var currTime = new Date().getTime();\n          var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n          var id = root.setTimeout(function() { callback(currTime + timeToCall); }, timeToCall);\n          lastTime = currTime + timeToCall;\n          return id;\n        };\n        // cancel = cancel || function(id) {\n        //   clearTimeout(id);\n        // };\n      }\n\n      request.init = _.once(loop);\n\n      return request;\n\n    }\n\n  };\n\n  /**\n   * @name Two\n   * @class\n   * @global\n   * @param {Object} [options]\n   * @param {Boolean} [options.fullscreen=false] - Set to `true` to automatically make the stage adapt to the width and height of the parent document. This parameter overrides `width` and `height` parameters if set to `true`.\n   * @param {Number} [options.width=640] - The width of the stage on construction. This can be set at a later time.\n   * @param {Number} [options.height=480] - The height of the stage on construction. This can be set at a later time.\n   * @param {String} [options.type=Two.Types.svg] - The type of renderer to setup drawing with. See [`Two.Types`]{@link  Two.Types} for available options.\n   * @param {Boolean} [options.autostart=false] - Set to `true` to add the instance to draw on `requestAnimationFrame`. This is a convenient substitute for {@link Two#play}.\n   * @description The entrypoint for Two.js. Instantiate a `new Two` in order to setup a scene to render to. `Two` is also the publicly accessible namespace that all other sub-classes, functions, and utilities attach to.\n   */\n  var Two = root.Two = function(options) {\n\n    // Determine what Renderer to use and setup a scene.\n\n    var params = _.defaults(options || {}, {\n      fullscreen: false,\n      width: 640,\n      height: 480,\n      type: Two.Types.svg,\n      autostart: false\n    });\n\n    _.each(params, function(v, k) {\n      if (/fullscreen/i.test(k) || /autostart/i.test(k)) {\n        return;\n      }\n      this[k] = v;\n    }, this);\n\n    // Specified domElement overrides type declaration only if the element does not support declared renderer type.\n    if (_.isElement(params.domElement)) {\n      var tagName = params.domElement.tagName.toLowerCase();\n      // TODO: Reconsider this if statement's logic.\n      if (!/^(CanvasRenderer-canvas|WebGLRenderer-canvas|SVGRenderer-svg)$/.test(this.type+'-'+tagName)) {\n        this.type = Two.Types[tagName];\n      }\n    }\n\n    this.renderer = new Two[this.type](this);\n    Two.Utils.setPlaying.call(this, params.autostart);\n    this.frameCount = 0;\n\n    if (params.fullscreen) {\n\n      var fitted = _.bind(fitToWindow, this);\n      _.extend(document.body.style, {\n        overflow: 'hidden',\n        margin: 0,\n        padding: 0,\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        position: 'fixed'\n      });\n      _.extend(this.renderer.domElement.style, {\n        display: 'block',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        position: 'fixed'\n      });\n      dom.bind(root, 'resize', fitted);\n      fitted();\n\n\n    } else if (!_.isElement(params.domElement)) {\n\n      this.renderer.setSize(params.width, params.height, this.ratio);\n      this.width = params.width;\n      this.height = params.height;\n\n    }\n\n    this.renderer.bind(Two.Events.resize, _.bind(updateDimensions, this));\n    this.scene = this.renderer.scene;\n\n    Two.Instances.push(this);\n    if (params.autostart) {\n      raf.init();\n    }\n\n  };\n\n  _.extend(Two, {\n\n    // Access to root in other files.\n\n    /**\n     * @name Two.root\n     * @description The root of the session context. In the browser this is the `window` variable. This varies in headless environments.\n     */\n    root: root,\n\n    /**\n     * @name Two.nextFrameID\n     * @property {Integer}\n     * @description The id of the next requestAnimationFrame function.\n     */\n    nextFrameID: null,\n\n    // Primitive\n\n    /**\n     * @name Two.Array\n     * @description A simple polyfill for Float32Array.\n     */\n    Array: root.Float32Array || Array,\n\n    /**\n     * @name Two.Types\n     * @property {Object} - The different rendering types availabe in the library.\n     */\n    Types: {\n      webgl: 'WebGLRenderer',\n      svg: 'SVGRenderer',\n      canvas: 'CanvasRenderer'\n    },\n\n    /**\n     * @name Two.Version\n     * @property {String} - The current working version of the library.\n     */\n    Version: 'v0.7.0-beta.3',\n\n    /**\n     * @name Two.PublishDate\n     * @property {String} - The automatically generated publish date in the build process to verify version release candidates.\n     */\n    PublishDate: '2018-12-08T22:41:43+01:00',\n\n    /**\n     * @name Two.Identifier\n     * @property {String} - String prefix for all Two.js object's ids. This trickles down to SVG ids.\n     */\n    Identifier: 'two-',\n\n    /**\n     * @name Two.Events\n     * @property {Object} - Map of possible events in Two.js.\n     */\n    Events: {\n      play: 'play',\n      pause: 'pause',\n      update: 'update',\n      render: 'render',\n      resize: 'resize',\n      change: 'change',\n      remove: 'remove',\n      insert: 'insert',\n      order: 'order',\n      load: 'load'\n    },\n\n    /**\n     * @name Two.Commands\n     * @property {Object} - Map of possible path commands. Taken from the SVG specification.\n     */\n    Commands: {\n      move: 'M',\n      line: 'L',\n      curve: 'C',\n      arc: 'A',\n      close: 'Z'\n    },\n\n    /**\n     * @name Two.Resolution\n     * @property {Number} - Default amount of vertices to be used for interpreting Arcs and ArcSegments.\n     */\n    Resolution: 12,\n\n    /**\n     * @name Two.Instances\n     * @property {Array} - Registered list of all Two.js instances in the current session.\n     */\n    Instances: [],\n\n    /**\n     * @function Two.noConflict\n     * @description A function to revert the global namespaced `Two` variable to its previous incarnation.\n     * @returns {Two} Returns access to the top-level Two.js library for local use.\n     */\n    noConflict: function() {\n      root.Two = previousTwo;\n      return Two;\n    },\n\n    /**\n     * @function Two.uniqueId\n     * @description Simple method to access an incrementing value. Used for `id` allocation on all Two.js objects.\n     * @returns {Number} Ever increasing integer.\n     */\n    uniqueId: function() {\n      var id = count;\n      count++;\n      return id;\n    },\n\n    /**\n     * @name Two.Utils\n     * @interface\n     * @implements {_}\n     * @description A hodgepodge of handy functions, math, and properties are stored here.\n     */\n    Utils: _.extend(_, {\n\n      /**\n       * @name Two.Utils.performance\n       * @property {Date} - A special `Date` like object to get the current millis of the session. Used internally to calculate time between frames.\n       * e.g: `Two.Utils.performance.now() // milliseconds since epoch`\n       */\n      performance: perf,\n\n      /**\n       * @name Two.Utils.defineProperty\n       * @function\n       * @this Two#\n       * @param {String} property - The property to add an enumerable getter / setter to.\n       * @description Convenience function to setup the flag based getter / setter that most properties are defined as in Two.js.\n       */\n      defineProperty: function(property) {\n\n        var object = this;\n        var secret = '_' + property;\n        var flag = '_flag' + property.charAt(0).toUpperCase() + property.slice(1);\n\n        Object.defineProperty(object, property, {\n          enumerable: true,\n          get: function() {\n            return this[secret];\n          },\n          set: function(v) {\n            this[secret] = v;\n            this[flag] = true;\n          }\n        });\n\n      },\n\n      Image: null,\n\n      isHeadless: false,\n\n      /**\n       * @name Two.Utils.shim\n       * @function\n       * @param {canvas} canvas - The instanced `Canvas` object provided by `node-canvas`.\n       * @param {Image} [Image] - The prototypical `Image` object provided by `node-canvas`. This is only necessary to pass if you're going to load bitmap imagery.\n       * @returns {canvas} Returns the instanced canvas object you passed from with additional attributes needed for Two.js.\n       * @description Convenience method for defining all the dependencies from the npm package `node-canvas`. See [node-canvas]{@link https://github.com/Automattic/node-canvas} for additional information on setting up HTML5 `<canvas />` drawing in a node.js environment.\n       */\n      shim: function(canvas, Image) {\n        Two.CanvasRenderer.Utils.shim(canvas);\n        if (!_.isUndefined(Image)) {\n          Two.Utils.Image = Image;\n        }\n        Two.Utils.isHeadless = true;\n        return canvas;\n      },\n\n      /**\n       * @name Two.Utils.release\n       * @function\n       * @param {Object} obj\n       * @returns {Object} The object passed for event deallocation.\n       * @description Release an arbitrary class' events from the Two.js corpus and recurse through its children and or vertices.\n       */\n      release: function(obj) {\n\n        if (!_.isObject(obj)) {\n          return;\n        }\n\n        if (_.isFunction(obj.unbind)) {\n          obj.unbind();\n        }\n\n        if (obj.vertices) {\n          if (_.isFunction(obj.vertices.unbind)) {\n            obj.vertices.unbind();\n          }\n          _.each(obj.vertices, function(v) {\n            if (_.isFunction(v.unbind)) {\n              v.unbind();\n            }\n          });\n        }\n\n        if (obj.children) {\n          _.each(obj.children, function(obj) {\n            Two.Utils.release(obj);\n          });\n        }\n\n        return obj;\n\n      },\n\n      /**\n       * @name Two.Utils.xhr\n       * @function\n       * @param {String} path\n       * @param {Function} callback\n       * @returns {XMLHttpRequest} The constructed and called XHR request.\n       * @description Canonical method to initiate `GET` requests in the browser. Mainly used by {@link Two#load} method.\n       */\n      xhr: function(path, callback) {\n\n        var xhr = new XMLHttpRequest();\n        xhr.open('GET', path);\n\n        xhr.onreadystatechange = function() {\n          if (xhr.readyState === 4 && xhr.status === 200) {\n            callback(xhr.responseText);\n          }\n        };\n\n        xhr.send();\n        return xhr;\n\n      },\n\n      /**\n       * @name Two.Utils.Curve\n       * @property {Object} - Additional utility constant variables related to curve math and calculations.\n       */\n      Curve: {\n\n        CollinearityEpsilon: pow(10, -30),\n\n        RecursionLimit: 16,\n\n        CuspLimit: 0,\n\n        Tolerance: {\n          distance: 0.25,\n          angle: 0,\n          epsilon: Number.EPSILON\n        },\n\n        // Lookup tables for abscissas and weights with values for n = 2 .. 16.\n        // As values are symmetric, only store half of them and adapt algorithm\n        // to factor in symmetry.\n        abscissas: [\n          [  0.5773502691896257645091488],\n          [0,0.7745966692414833770358531],\n          [  0.3399810435848562648026658,0.8611363115940525752239465],\n          [0,0.5384693101056830910363144,0.9061798459386639927976269],\n          [  0.2386191860831969086305017,0.6612093864662645136613996,0.9324695142031520278123016],\n          [0,0.4058451513773971669066064,0.7415311855993944398638648,0.9491079123427585245261897],\n          [  0.1834346424956498049394761,0.5255324099163289858177390,0.7966664774136267395915539,0.9602898564975362316835609],\n          [0,0.3242534234038089290385380,0.6133714327005903973087020,0.8360311073266357942994298,0.9681602395076260898355762],\n          [  0.1488743389816312108848260,0.4333953941292471907992659,0.6794095682990244062343274,0.8650633666889845107320967,0.9739065285171717200779640],\n          [0,0.2695431559523449723315320,0.5190961292068118159257257,0.7301520055740493240934163,0.8870625997680952990751578,0.9782286581460569928039380],\n          [  0.1252334085114689154724414,0.3678314989981801937526915,0.5873179542866174472967024,0.7699026741943046870368938,0.9041172563704748566784659,0.9815606342467192506905491],\n          [0,0.2304583159551347940655281,0.4484927510364468528779129,0.6423493394403402206439846,0.8015780907333099127942065,0.9175983992229779652065478,0.9841830547185881494728294],\n          [  0.1080549487073436620662447,0.3191123689278897604356718,0.5152486363581540919652907,0.6872929048116854701480198,0.8272013150697649931897947,0.9284348836635735173363911,0.9862838086968123388415973],\n          [0,0.2011940939974345223006283,0.3941513470775633698972074,0.5709721726085388475372267,0.7244177313601700474161861,0.8482065834104272162006483,0.9372733924007059043077589,0.9879925180204854284895657],\n          [  0.0950125098376374401853193,0.2816035507792589132304605,0.4580167776572273863424194,0.6178762444026437484466718,0.7554044083550030338951012,0.8656312023878317438804679,0.9445750230732325760779884,0.9894009349916499325961542]\n        ],\n\n        weights: [\n          [1],\n          [0.8888888888888888888888889,0.5555555555555555555555556],\n          [0.6521451548625461426269361,0.3478548451374538573730639],\n          [0.5688888888888888888888889,0.4786286704993664680412915,0.2369268850561890875142640],\n          [0.4679139345726910473898703,0.3607615730481386075698335,0.1713244923791703450402961],\n          [0.4179591836734693877551020,0.3818300505051189449503698,0.2797053914892766679014678,0.1294849661688696932706114],\n          [0.3626837833783619829651504,0.3137066458778872873379622,0.2223810344533744705443560,0.1012285362903762591525314],\n          [0.3302393550012597631645251,0.3123470770400028400686304,0.2606106964029354623187429,0.1806481606948574040584720,0.0812743883615744119718922],\n          [0.2955242247147528701738930,0.2692667193099963550912269,0.2190863625159820439955349,0.1494513491505805931457763,0.0666713443086881375935688],\n          [0.2729250867779006307144835,0.2628045445102466621806889,0.2331937645919904799185237,0.1862902109277342514260976,0.1255803694649046246346943,0.0556685671161736664827537],\n          [0.2491470458134027850005624,0.2334925365383548087608499,0.2031674267230659217490645,0.1600783285433462263346525,0.1069393259953184309602547,0.0471753363865118271946160],\n          [0.2325515532308739101945895,0.2262831802628972384120902,0.2078160475368885023125232,0.1781459807619457382800467,0.1388735102197872384636018,0.0921214998377284479144218,0.0404840047653158795200216],\n          [0.2152638534631577901958764,0.2051984637212956039659241,0.1855383974779378137417166,0.1572031671581935345696019,0.1215185706879031846894148,0.0801580871597602098056333,0.0351194603317518630318329],\n          [0.2025782419255612728806202,0.1984314853271115764561183,0.1861610000155622110268006,0.1662692058169939335532009,0.1395706779261543144478048,0.1071592204671719350118695,0.0703660474881081247092674,0.0307532419961172683546284],\n          [0.1894506104550684962853967,0.1826034150449235888667637,0.1691565193950025381893121,0.1495959888165767320815017,0.1246289712555338720524763,0.0951585116824927848099251,0.0622535239386478928628438,0.0271524594117540948517806]\n        ]\n\n      },\n\n      devicePixelRatio: root.devicePixelRatio || 1,\n\n      getBackingStoreRatio: function(ctx) {\n        return ctx.webkitBackingStorePixelRatio ||\n          ctx.mozBackingStorePixelRatio ||\n          ctx.msBackingStorePixelRatio ||\n          ctx.oBackingStorePixelRatio ||\n          ctx.backingStorePixelRatio || 1;\n      },\n\n      /**\n       * @name Two.Utils.getRatio\n       * @function\n       * @param {Canvas.context2D} ctx\n       * @returns {Number} The ratio of a unit in Two.js to the pixel density of a session's screen.\n       * @see [High DPI Rendering]{@link http://www.html5rocks.com/en/tutorials/canvas/hidpi/}\n       */\n      getRatio: function(ctx) {\n        return Two.Utils.devicePixelRatio / getBackingStoreRatio(ctx);\n      },\n\n      /**\n       * @name Two.Utils.setPlaying\n       * @function\n       * @this Two#\n       * @returns {Two} The instance called with for potential chaining.\n       * @description Internal convenience method to properly defer play calling until after all objects have been updated with their newest styles.\n       */\n      setPlaying: function(b) {\n\n        this.playing = !!b;\n        return this;\n\n      },\n\n      /**\n       * @name Two.Utils.getComputedMatrix\n       * @function\n       * @param {Two.Shape} object - The Two.js object that has a matrix property to calculate from.\n       * @param {Two.Matrix} [matrix] - The matrix to apply calculated transformations to if available.\n       * @returns {Two.Matrix} The computed matrix of a nested object. If no `matrix` was passed in arguments then a `new Two.Matrix` is returned.\n       * @description Method to get the world space transformation of a given object in a Two.js scene.\n       */\n      getComputedMatrix: function(object, matrix) {\n\n        matrix = (matrix && matrix.identity()) || new Two.Matrix();\n        var parent = object, matrices = [];\n\n        while (parent && parent._matrix) {\n          matrices.push(parent._matrix);\n          parent = parent.parent;\n        }\n\n        matrices.reverse();\n\n        for (var i = 0; i < matrices.length; i++) {\n\n          var m = matrices[i];\n          var e = m.elements;\n          matrix.multiply(\n            e[0], e[1], e[2], e[3], e[4], e[5], e[6], e[7], e[8], e[9]);\n\n        }\n\n        return matrix;\n\n      },\n\n      /**\n       * @name Two.Utils.deltaTransformPoint\n       * @function\n       * @param {Two.Matrix} matrix\n       * @param {Number} x\n       * @param {Number} y\n       * @returns {Two.Vector}\n       * @description Used by {@link Two.Utils.decomposeMatrix}\n       */\n      deltaTransformPoint: function(matrix, x, y) {\n\n        var dx = x * matrix.a + y * matrix.c + 0;\n        var dy = x * matrix.b + y * matrix.d + 0;\n\n        return new Two.Vector(dx, dy);\n\n      },\n\n      /**\n       * @name Two.Utils.decomposeMatrix\n       * @function\n       * @param {Two.Matrix} matrix - The matrix to decompose.\n       * @returns {Object} An object containing relevant skew values.\n       * @description Decompose a 2D 3x3 Matrix to find the skew.\n       * @see {@link https://gist.github.com/2052247}\n       */\n      decomposeMatrix: function(matrix) {\n\n        // calculate delta transform point\n        var px = Two.Utils.deltaTransformPoint(matrix, 0, 1);\n        var py = Two.Utils.deltaTransformPoint(matrix, 1, 0);\n\n        // calculate skew\n        var skewX = ((180 / Math.PI) * Math.atan2(px.y, px.x) - 90);\n        var skewY = ((180 / Math.PI) * Math.atan2(py.y, py.x));\n\n        return {\n            translateX: matrix.e,\n            translateY: matrix.f,\n            scaleX: Math.sqrt(matrix.a * matrix.a + matrix.b * matrix.b),\n            scaleY: Math.sqrt(matrix.c * matrix.c + matrix.d * matrix.d),\n            skewX: skewX,\n            skewY: skewY,\n            rotation: skewX // rotation is the same as skew x\n        };\n\n      },\n\n      /**\n       * @name Two.Utils.extractCSSText\n       * @function\n       * @param {String} text - The CSS text body to be parsed and extracted.\n       * @param {Object} [styles] - The styles object to apply CSS key values to.\n       * @returns {Object} styles\n       * @description Parse CSS text body and apply them as key value pairs to a JavaScript object.\n       */\n      extractCSSText: function(text, styles) {\n\n        var commands, command, name, value;\n\n        if (!styles) {\n          styles = {};\n        }\n\n        commands = text.split(';');\n\n        for (var i = 0; i < commands.length; i++) {\n          command = commands[i].split(':');\n          name = command[0];\n          value = command[1];\n          if (_.isUndefined(name) || _.isUndefined(value)) {\n            continue;\n          }\n          styles[name] = value.replace(/\\s/, '');\n        }\n\n        return styles;\n\n      },\n\n      /**\n       * @name Two.Utils.getSvgStyles\n       * @function\n       * @param {SvgNode} node - The SVG node to parse.\n       * @returns {Object} styles\n       * @description Get the CSS comands from the `style` attribute of an SVG node and apply them as key value pairs to a JavaScript object.\n       */\n      getSvgStyles: function(node) {\n\n        var styles = {};\n\n        for (var i = 0; i < node.style.length; i++) {\n          var command = node.style[i];\n          styles[command] = node.style[command];\n        }\n\n        return styles;\n\n      },\n\n      /**\n       * @name Two.Utils.applySvgViewBox\n       * @function\n       * @param {Two.Shape} node - The Two.js object to apply viewbox matrix to\n       * @param {String} value - The viewBox value from the SVG attribute\n       * @returns {Two.Shape} node\n       @ @description\n       */\n      applySvgViewBox: function(node, value) {\n\n        var elements = value.split(/\\s/);\n\n        var x = parseFloat(elements[0]);\n        var y = parseFloat(elements[1]);\n        var width = parseFloat(elements[2]);\n        var height = parseFloat(elements[3]);\n\n        var s = Math.min(this.width / width, this.height / height);\n\n        node.translation.x -= x * s;\n        node.translation.y -= y * s;\n        node.scale = s;\n\n        return node;\n\n      },\n\n      /**\n       * @name Two.Utils.applySvgAttributes\n       * @function\n       * @param {SvgNode} node - An SVG Node to extrapolate attributes from.\n       * @param {Two.Shape} elem - The Two.js object to apply extrapolated attributes to.\n       * @returns {Two.Shape} The Two.js object passed now with applied attributes.\n       * @description This function iterates through an SVG Node's properties and stores ones of interest. It tries to resolve styles applied via CSS as well.\n       * @TODO Reverse calculate `Two.Gradient`s for fill / stroke of any given path.\n       */\n      applySvgAttributes: function(node, elem, parentStyles) {\n\n        var  styles = {}, attributes = {}, extracted = {}, i, key, value, attr;\n\n        // Not available in non browser environments\n        if (root.getComputedStyle) {\n          // Convert CSSStyleDeclaration to a normal object\n          var computedStyles = root.getComputedStyle(node);\n          i = computedStyles.length;\n\n          while (i--) {\n            key = computedStyles[i];\n            value = computedStyles[key];\n            // Gecko returns undefined for unset properties\n            // Webkit returns the default value\n            if (!_.isUndefined(value)) {\n              styles[key] = value;\n            }\n          }\n        }\n\n        // Convert NodeMap to a normal object\n        for (i = 0; i < node.attributes.length; i++) {\n          attr = node.attributes[i];\n          if (/style/i.test(attr.nodeName)) {\n            Two.Utils.extractCSSText(attr.value, extracted);\n          } else {\n            attributes[attr.nodeName] = attr.value;\n          }\n        }\n\n        // Getting the correct opacity is a bit tricky, since SVG path elements don't\n        // support opacity as an attribute, but you can apply it via CSS.\n        // So we take the opacity and set (stroke/fill)-opacity to the same value.\n        if (!_.isUndefined(styles.opacity)) {\n          styles['stroke-opacity'] = styles.opacity;\n          styles['fill-opacity'] = styles.opacity;\n          delete styles.opacity;\n        }\n\n        // Merge attributes and applied styles (attributes take precedence)\n        if (parentStyles) {\n          _.defaults(styles, parentStyles);\n        }\n        _.extend(styles, attributes, extracted);\n\n        // Similarly visibility is influenced by the value of both display and visibility.\n        // Calculate a unified value here which defaults to `true`.\n        styles.visible = !(_.isUndefined(styles.display) && /none/i.test(styles.display))\n          || (_.isUndefined(styles.visibility) && /hidden/i.test(styles.visibility));\n\n        // Now iterate the whole thing\n        for (key in styles) {\n          value = styles[key];\n\n          switch (key) {\n            case 'transform':\n              // TODO: Check this out https://github.com/paperjs/paper.js/blob/develop/src/svg/SvgImport.js#L315\n              if (/none/i.test(value)) break;\n              var m = (node.transform && node.transform.baseVal && node.transform.baseVal.length > 0)\n                ? node.transform.baseVal[0].matrix\n                : (node.getCTM ? node.getCTM() : null);\n\n              // Might happen when transform string is empty or not valid.\n              if (_.isNull(m)) break;\n\n              // // Option 1: edit the underlying matrix and don't force an auto calc.\n              // var m = node.getCTM();\n              // elem._matrix.manual = true;\n              // elem._matrix.set(m.a, m.b, m.c, m.d, m.e, m.f);\n\n              // Option 2: Decompose and infer Two.js related properties.\n              var transforms = Two.Utils.decomposeMatrix(m);\n\n              elem.translation.set(transforms.translateX, transforms.translateY);\n              elem.rotation = transforms.rotation;\n              elem.scale = new Two.Vector(transforms.scaleX, transforms.scaleY);\n\n              var x = parseFloat((styles.x + '').replace('px'));\n              var y = parseFloat((styles.y + '').replace('px'));\n\n              // Override based on attributes.\n              if (x) {\n                elem.translation.x = x;\n              }\n\n              if (y) {\n                elem.translation.y = y;\n              }\n\n              break;\n            case 'viewBox':\n              Two.Utils.applySvgViewBox.call(this, elem, value);\n              break;\n            case 'visible':\n              elem.visible = value;\n              break;\n            case 'stroke-linecap':\n              elem.cap = value;\n              break;\n            case 'stroke-linejoin':\n              elem.join = value;\n              break;\n            case 'stroke-miterlimit':\n              elem.miter = value;\n              break;\n            case 'stroke-width':\n              elem.linewidth = parseFloat(value);\n              break;\n            case 'opacity':\n            case 'stroke-opacity':\n            case 'fill-opacity':\n              // Only apply styles to rendered shapes\n              // in the scene.\n              if (!(elem instanceof Two.Group)) {\n                elem.opacity = parseFloat(value);\n              }\n              break;\n            case 'fill':\n            case 'stroke':\n              if (/url\\(\\#.*\\)/i.test(value)) {\n                elem[key] = this.getById(\n                  value.replace(/url\\(\\#(.*)\\)/i, '$1'));\n              } else {\n                elem[key] = (/none/i.test(value)) ? 'transparent' : value;\n              }\n              break;\n            case 'id':\n              elem.id = value;\n              break;\n            case 'class':\n            case 'className':\n              elem.classList = value.split(' ');\n              break;\n          }\n        }\n\n        return styles;\n\n      },\n\n      /**\n       * @name Two.Utils.read\n       * @property {Object} read - A map of functions to read any number of SVG node types and create Two.js equivalents of them. Primarily used by the {@link Two#interpret} method.\n       */\n      read: {\n\n        svg: function(node) {\n\n          var svg = Two.Utils.read.g.call(this, node);\n          var viewBox = node.getAttribute('viewBox');\n          // Two.Utils.applySvgViewBox(svg, viewBox);\n\n          return svg;\n\n        },\n\n        g: function(node) {\n\n          var styles, attrs;\n          var group = new Two.Group();\n\n          // Switched up order to inherit more specific styles\n          styles = Two.Utils.getSvgStyles.call(this, node);\n\n          for (var i = 0, l = node.childNodes.length; i < l; i++) {\n            var n = node.childNodes[i];\n            var tag = n.nodeName;\n            if (!tag) return;\n\n            var tagName = tag.replace(/svg\\:/ig, '').toLowerCase();\n\n            if (tagName in Two.Utils.read) {\n              var o = Two.Utils.read[tagName].call(group, n, styles);\n              group.add(o);\n            }\n          }\n\n          return group;\n\n        },\n\n        polygon: function(node, parentStyles) {\n\n          var points = node.getAttribute('points');\n\n          var verts = [];\n          points.replace(/(-?[\\d\\.?]+)[,|\\s](-?[\\d\\.?]+)/g, function(match, p1, p2) {\n            verts.push(new Two.Anchor(parseFloat(p1), parseFloat(p2)));\n          });\n\n          var poly = new Two.Path(verts, true).noStroke();\n          poly.fill = 'black';\n\n          Two.Utils.applySvgAttributes.call(this, node, poly, parentStyles);\n\n          return poly;\n\n        },\n\n        polyline: function(node, parentStyles) {\n          var poly = Two.Utils.read.polygon.call(this, node, parentStyles);\n          poly.closed = false;\n          return poly;\n        },\n\n        path: function(node, parentStyles) {\n\n          var path = node.getAttribute('d');\n\n          // Create a Two.Path from the paths.\n\n          var coord = new Two.Anchor();\n          var control, coords;\n          var closed = false, relative = false;\n          var commands = path.match(/[a-df-z][^a-df-z]*/ig);\n          var last = commands.length - 1;\n\n          // Split up polybeziers\n\n          _.each(commands.slice(0), function(command, i) {\n\n            var number, fid, lid, numbers, first, s;\n            var j, k, ct, l, times;\n\n            var type = command[0];\n            var lower = type.toLowerCase();\n            var items = command.slice(1).trim().split(/[\\s,]+|(?=\\s?[+\\-])/);\n            var pre, post, result = [], bin;\n            var hasDoubleDecimals = false;\n\n            // Handle double decimal values e.g: 48.6037.71.8\n            // Like: https://m.abcsofchinese.com/images/svg/ji2.svg\n            for (j = 0; j < items.length; j++) {\n\n              number = items[j];\n              fid = number.indexOf('.');\n              lid = number.lastIndexOf('.');\n\n              if (fid !== lid) {\n\n                numbers = number.split('.');\n                first = numbers[0] + '.' + numbers[1];\n\n                items.splice(j, 1, first);\n\n                for (s = 2; s < numbers.length; s++) {\n                  items.splice(j + s - 1, 0, '0.' + numbers[s]);\n                }\n\n                hasDoubleDecimals = true;\n\n              }\n\n            }\n\n            if (hasDoubleDecimals) {\n              command = type + items.join(',');\n            }\n\n            if (i <= 0) {\n              commands = [];\n            }\n\n            switch (lower) {\n              case 'h':\n              case 'v':\n                if (items.length > 1) {\n                  bin = 1;\n                }\n                break;\n              case 'm':\n              case 'l':\n              case 't':\n                if (items.length > 2) {\n                  bin = 2;\n                }\n                break;\n              case 's':\n              case 'q':\n                if (items.length > 4) {\n                  bin = 4;\n                }\n                break;\n              case 'c':\n                if (items.length > 6) {\n                  bin = 6;\n                }\n                break;\n              case 'a':\n                if (items.length > 7) {\n                  bin = 7;\n                }\n                break;\n            }\n\n            // This means we have a polybezier.\n            if (bin) {\n\n              for (j = 0, l = items.length, times = 0; j < l; j+=bin) {\n\n                ct = type;\n                if (times > 0) {\n\n                  switch (type) {\n                    case 'm':\n                      ct = 'l';\n                      break;\n                    case 'M':\n                      ct = 'L';\n                      break;\n                  }\n\n                }\n\n                result.push(ct + items.slice(j, j + bin).join(' '));\n                times++;\n\n              }\n\n              commands = Array.prototype.concat.apply(commands, result);\n\n            } else {\n\n              commands.push(command);\n\n            }\n\n          });\n\n          // Create the vertices for our Two.Path\n\n          var points = [];\n          _.each(commands, function(command, i) {\n\n            var result, x, y;\n            var type = command[0];\n            var lower = type.toLowerCase();\n\n            coords = command.slice(1).trim();\n            coords = coords.replace(/(-?\\d+(?:\\.\\d*)?)[eE]([+\\-]?\\d+)/g, function(match, n1, n2) {\n              return parseFloat(n1) * pow(10, n2);\n            });\n            coords = coords.split(/[\\s,]+|(?=\\s?[+\\-])/);\n            relative = type === lower;\n\n            var x1, y1, x2, y2, x3, y3, x4, y4, reflection;\n\n            switch (lower) {\n\n              case 'z':\n                if (i >= last) {\n                  closed = true;\n                } else {\n                  x = coord.x;\n                  y = coord.y;\n                  result = new Two.Anchor(\n                    x, y,\n                    undefined, undefined,\n                    undefined, undefined,\n                    Two.Commands.close\n                  );\n                  // Make coord be the last `m` command\n                  for (var i = points.length - 1; i >= 0; i--) {\n                    var point = points[i];\n                    if (/m/i.test(point.command)) {\n                      coord = point;\n                      break;\n                    }\n                  }\n                }\n                break;\n\n              case 'm':\n              case 'l':\n\n                control = undefined;\n\n                x = parseFloat(coords[0]);\n                y = parseFloat(coords[1]);\n\n                result = new Two.Anchor(\n                  x, y,\n                  undefined, undefined,\n                  undefined, undefined,\n                  /m/i.test(lower) ? Two.Commands.move : Two.Commands.line\n                );\n\n                if (relative) {\n                  result.addSelf(coord);\n                }\n\n                // result.controls.left.copy(result);\n                // result.controls.right.copy(result);\n\n                coord = result;\n                break;\n\n              case 'h':\n              case 'v':\n\n                var a = /h/i.test(lower) ? 'x' : 'y';\n                var b = /x/i.test(a) ? 'y' : 'x';\n\n                result = new Two.Anchor(\n                  undefined, undefined,\n                  undefined, undefined,\n                  undefined, undefined,\n                  Two.Commands.line\n                );\n                result[a] = parseFloat(coords[0]);\n                result[b] = coord[b];\n\n                if (relative) {\n                  result[a] += coord[a];\n                }\n\n                // result.controls.left.copy(result);\n                // result.controls.right.copy(result);\n\n                coord = result;\n                break;\n\n              case 'c':\n              case 's':\n\n                x1 = coord.x;\n                y1 = coord.y;\n\n                if (!control) {\n                  control = new Two.Vector();//.copy(coord);\n                }\n\n                if (/c/i.test(lower)) {\n\n                  x2 = parseFloat(coords[0]);\n                  y2 = parseFloat(coords[1]);\n                  x3 = parseFloat(coords[2]);\n                  y3 = parseFloat(coords[3]);\n                  x4 = parseFloat(coords[4]);\n                  y4 = parseFloat(coords[5]);\n\n                } else {\n\n                  // Calculate reflection control point for proper x2, y2\n                  // inclusion.\n\n                  reflection = getReflection(coord, control, relative);\n\n                  x2 = reflection.x;\n                  y2 = reflection.y;\n                  x3 = parseFloat(coords[0]);\n                  y3 = parseFloat(coords[1]);\n                  x4 = parseFloat(coords[2]);\n                  y4 = parseFloat(coords[3]);\n\n                }\n\n                if (relative) {\n                  x2 += x1;\n                  y2 += y1;\n                  x3 += x1;\n                  y3 += y1;\n                  x4 += x1;\n                  y4 += y1;\n                }\n\n                if (!_.isObject(coord.controls)) {\n                  Two.Anchor.AppendCurveProperties(coord);\n                }\n\n                coord.controls.right.set(x2 - coord.x, y2 - coord.y);\n                result = new Two.Anchor(\n                  x4, y4,\n                  x3 - x4, y3 - y4,\n                  undefined, undefined,\n                  Two.Commands.curve\n                );\n\n                coord = result;\n                control = result.controls.left;\n\n                break;\n\n              case 't':\n              case 'q':\n\n                x1 = coord.x;\n                y1 = coord.y;\n\n                if (!control) {\n                  control = new Two.Vector();//.copy(coord);\n                }\n\n                if (control.isZero()) {\n                  x2 = x1;\n                  y2 = y1;\n                } else {\n                  x2 = control.x;\n                  y2 = control.y;\n                }\n\n                if (/q/i.test(lower)) {\n\n                  x3 = parseFloat(coords[0]);\n                  y3 = parseFloat(coords[1]);\n                  x4 = parseFloat(coords[2]);\n                  y4 = parseFloat(coords[3]);\n\n                } else {\n\n                  reflection = getReflection(coord, control, relative);\n\n                  x3 = reflection.x;\n                  y3 = reflection.y;\n                  x4 = parseFloat(coords[0]);\n                  y4 = parseFloat(coords[1]);\n\n                }\n\n                if (relative) {\n                  x2 += x1;\n                  y2 += y1;\n                  x3 += x1;\n                  y3 += y1;\n                  x4 += x1;\n                  y4 += y1;\n                }\n\n                if (!_.isObject(coord.controls)) {\n                  Two.Anchor.AppendCurveProperties(coord);\n                }\n\n                coord.controls.right.set(x2 - coord.x, y2 - coord.y);\n                result = new Two.Anchor(\n                  x4, y4,\n                  x3 - x4, y3 - y4,\n                  undefined, undefined,\n                  Two.Commands.curve\n                );\n\n                coord = result;\n                control = result.controls.left;\n\n                break;\n\n              case 'a':\n\n                x1 = coord.x;\n                y1 = coord.y;\n\n                var rx = parseFloat(coords[0]);\n                var ry = parseFloat(coords[1]);\n                var xAxisRotation = parseFloat(coords[2]);// * PI / 180;\n                var largeArcFlag = parseFloat(coords[3]);\n                var sweepFlag = parseFloat(coords[4]);\n\n                x4 = parseFloat(coords[5]);\n                y4 = parseFloat(coords[6]);\n\n                if (relative) {\n                  x4 += x1;\n                  y4 += y1;\n                }\n\n                var anchor = new Two.Anchor(x4, y4);\n                anchor.command = Two.Commands.arc;\n                anchor.rx = rx;\n                anchor.ry = ry;\n                anchor.xAxisRotation = xAxisRotation;\n                anchor.largeArcFlag = largeArcFlag;\n                anchor.sweepFlag = sweepFlag;\n\n                result = anchor;\n\n                coord = anchor;\n                control = undefined;\n\n                break;\n\n            }\n\n            if (result) {\n              if (_.isArray(result)) {\n                points = points.concat(result);\n              } else {\n                points.push(result);\n              }\n            }\n\n          });\n\n          if (points.length <= 1) {\n            return;\n          }\n\n          var path = new Two.Path(points, closed, undefined, true).noStroke();\n          path.fill = 'black';\n\n          var rect = path.getBoundingClientRect(true);\n\n          // Center objects to stay consistent\n          // with the rest of the Two.js API.\n          rect.centroid = {\n            x: rect.left + rect.width / 2,\n            y: rect.top + rect.height / 2\n          };\n\n          _.each(path.vertices, function(v) {\n            v.subSelf(rect.centroid);\n          });\n\n          path.translation.addSelf(rect.centroid);\n\n          Two.Utils.applySvgAttributes.call(this, node, path, parentStyles);\n\n          return path;\n\n        },\n\n        circle: function(node, parentStyles) {\n\n          var x = parseFloat(node.getAttribute('cx'));\n          var y = parseFloat(node.getAttribute('cy'));\n          var r = parseFloat(node.getAttribute('r'));\n\n          var circle = new Two.Circle(x, y, r).noStroke();\n          circle.fill = 'black';\n\n          Two.Utils.applySvgAttributes.call(this, node, circle, parentStyles);\n\n          return circle;\n\n        },\n\n        ellipse: function(node, parentStyles) {\n\n          var x = parseFloat(node.getAttribute('cx'));\n          var y = parseFloat(node.getAttribute('cy'));\n          var width = parseFloat(node.getAttribute('rx'));\n          var height = parseFloat(node.getAttribute('ry'));\n\n          var ellipse = new Two.Ellipse(x, y, width, height).noStroke();\n          ellipse.fill = 'black';\n\n          Two.Utils.applySvgAttributes.call(this, node, ellipse, parentStyles);\n\n          return ellipse;\n\n        },\n\n        rect: function(node, parentStyles) {\n\n          var rx = parseFloat(node.getAttribute('rx'));\n          var ry = parseFloat(node.getAttribute('ry'));\n\n          if (!_.isNaN(rx) || !_.isNaN(ry)) {\n            return Two.Utils.read['rounded-rect'](node);\n          }\n\n          var x = parseFloat(node.getAttribute('x')) || 0;\n          var y = parseFloat(node.getAttribute('y')) || 0;\n          var width = parseFloat(node.getAttribute('width'));\n          var height = parseFloat(node.getAttribute('height'));\n\n          var w2 = width / 2;\n          var h2 = height / 2;\n\n          var rect = new Two.Rectangle(x + w2, y + h2, width, height)\n            .noStroke();\n          rect.fill = 'black';\n\n          Two.Utils.applySvgAttributes.call(this, node, rect, parentStyles);\n\n          return rect;\n\n        },\n\n        'rounded-rect': function(node, parentStyles) {\n\n          var x = parseFloat(node.getAttribute('x')) || 0;\n          var y = parseFloat(node.getAttribute('y')) || 0;\n          var rx = parseFloat(node.getAttribute('rx')) || 0;\n          var ry = parseFloat(node.getAttribute('ry')) || 0;\n\n          var width = parseFloat(node.getAttribute('width'));\n          var height = parseFloat(node.getAttribute('height'));\n\n          var w2 = width / 2;\n          var h2 = height / 2;\n          var radius = new Two.Vector(rx, ry);\n\n          var rect = new Two.RoundedRectangle(x + w2, y + h2, width, height, radius)\n            .noStroke();\n          rect.fill = 'black';\n\n          Two.Utils.applySvgAttributes.call(this, node, rect, parentStyles);\n\n          return rect;\n\n        },\n\n        line: function(node, parentStyles) {\n\n          var x1 = parseFloat(node.getAttribute('x1'));\n          var y1 = parseFloat(node.getAttribute('y1'));\n          var x2 = parseFloat(node.getAttribute('x2'));\n          var y2 = parseFloat(node.getAttribute('y2'));\n\n          var line = new Two.Line(x1, y1, x2, y2).noFill();\n\n          Two.Utils.applySvgAttributes.call(this, node, line, parentStyles);\n\n          return line;\n\n        },\n\n        lineargradient: function(node, parentStyles) {\n\n          var x1 = parseFloat(node.getAttribute('x1'));\n          var y1 = parseFloat(node.getAttribute('y1'));\n          var x2 = parseFloat(node.getAttribute('x2'));\n          var y2 = parseFloat(node.getAttribute('y2'));\n\n          var ox = (x2 + x1) / 2;\n          var oy = (y2 + y1) / 2;\n\n          var stops = [];\n          for (var i = 0; i < node.children.length; i++) {\n\n            var child = node.children[i];\n\n            var offset = parseFloat(child.getAttribute('offset'));\n            var color = child.getAttribute('stop-color');\n            var opacity = child.getAttribute('stop-opacity');\n            var style = child.getAttribute('style');\n\n            if (_.isNull(color)) {\n              var matches = style ? style.match(/stop\\-color\\:\\s?([\\#a-fA-F0-9]*)/) : false;\n              color = matches && matches.length > 1 ? matches[1] : undefined;\n            }\n\n            if (_.isNull(opacity)) {\n              var matches = style ? style.match(/stop\\-opacity\\:\\s?([0-9\\.\\-]*)/) : false;\n              opacity = matches && matches.length > 1 ? parseFloat(matches[1]) : 1;\n            }\n\n            stops.push(new Two.Gradient.Stop(offset, color, opacity));\n\n          }\n\n          var gradient = new Two.LinearGradient(x1 - ox, y1 - oy, x2 - ox,\n            y2 - oy, stops);\n\n          Two.Utils.applySvgAttributes.call(this, node, gradient, parentStyles);\n\n          return gradient;\n\n        },\n\n        radialgradient: function(node, parentStyles) {\n\n          var cx = parseFloat(node.getAttribute('cx')) || 0;\n          var cy = parseFloat(node.getAttribute('cy')) || 0;\n          var r = parseFloat(node.getAttribute('r'));\n\n          var fx = parseFloat(node.getAttribute('fx'));\n          var fy = parseFloat(node.getAttribute('fy'));\n\n          if (_.isNaN(fx)) {\n            fx = cx;\n          }\n\n          if (_.isNaN(fy)) {\n            fy = cy;\n          }\n\n          var ox = abs(cx + fx) / 2;\n          var oy = abs(cy + fy) / 2;\n\n          var stops = [];\n          for (var i = 0; i < node.children.length; i++) {\n\n            var child = node.children[i];\n\n            var offset = parseFloat(child.getAttribute('offset'));\n            var color = child.getAttribute('stop-color');\n            var opacity = child.getAttribute('stop-opacity');\n            var style = child.getAttribute('style');\n\n            if (_.isNull(color)) {\n              var matches = style ? style.match(/stop\\-color\\:\\s?([\\#a-fA-F0-9]*)/) : false;\n              color = matches && matches.length > 1 ? matches[1] : undefined;\n            }\n\n            if (_.isNull(opacity)) {\n              var matches = style ? style.match(/stop\\-opacity\\:\\s?([0-9\\.\\-]*)/) : false;\n              opacity = matches && matches.length > 1 ? parseFloat(matches[1]) : 1;\n            }\n\n            stops.push(new Two.Gradient.Stop(offset, color, opacity));\n\n          }\n\n          var gradient = new Two.RadialGradient(cx - ox, cy - oy, r,\n            stops, fx - ox, fy - oy);\n\n          Two.Utils.applySvgAttributes.call(this, node, gradient, parentStyles);\n\n          return gradient;\n\n        }\n\n      },\n\n      /**\n       * @name Two.Utils.subdivide\n       * @function\n       * @param {Number} x1 - x position of first anchor point.\n       * @param {Number} y1 - y position of first anchor point.\n       * @param {Number} x2 - x position of first anchor point's \"right\" bezier handle.\n       * @param {Number} y2 - y position of first anchor point's \"right\" bezier handle.\n       * @param {Number} x3 - x position of second anchor point's \"left\" bezier handle.\n       * @param {Number} y3 - y position of second anchor point's \"left\" bezier handle.\n       * @param {Number} x4 - x position of second anchor point.\n       * @param {Number} y4 - y position of second anchor point.\n       * @param {Number} [limit=Two.Utils.Curve.RecursionLimit] - The amount of vertices to create by subdividing.\n       * @returns {Two.Anchor[]} A list of anchor points ordered in between `x1`, `y1` and `x4`, `y4`\n       * @description Given 2 points (a, b) and corresponding control point for each return an array of points that represent points plotted along the curve. The number of returned points is determined by `limit`.\n       */\n      subdivide: function(x1, y1, x2, y2, x3, y3, x4, y4, limit) {\n\n        limit = limit || Two.Utils.Curve.RecursionLimit;\n        var amount = limit + 1;\n\n        // TODO: Abstract 0.001 to a limiting variable\n        // Don't recurse if the end points are identical\n        if (abs(x1 - x4) < 0.001 && abs(y1 - y4) < 0.001) {\n          return [new Two.Anchor(x4, y4)];\n        }\n\n        var result = [];\n\n        for (var i = 0; i < amount; i++) {\n          var t = i / amount;\n          var x = getComponentOnCubicBezier(t, x1, x2, x3, x4);\n          var y = getComponentOnCubicBezier(t, y1, y2, y3, y4);\n          result.push(new Two.Anchor(x, y));\n        }\n\n        return result;\n\n      },\n\n      /**\n       * @name Two.Utils.getComponentOnCubicBezier\n       * @function\n       * @param {Number} t - Zero-to-one value describing what percentage to calculate.\n       * @param {Number} a - The firt point's component value.\n       * @param {Number} b - The first point's bezier component value.\n       * @param {Number} c - The second point's bezier component value.\n       * @param {Number} d - The second point's component value.\n       * @returns {Number} The coordinate value for a specific component along a cubic bezier curve by `t`.\n       */\n      getComponentOnCubicBezier: function(t, a, b, c, d) {\n        var k = 1 - t;\n        return (k * k * k * a) + (3 * k * k * t * b) + (3 * k * t * t * c) +\n           (t * t * t * d);\n      },\n\n      /**\n       * @name Two.Utils.getCurveLength\n       * @function\n       * @param {Number} x1 - x position of first anchor point.\n       * @param {Number} y1 - y position of first anchor point.\n       * @param {Number} x2 - x position of first anchor point's \"right\" bezier handle.\n       * @param {Number} y2 - y position of first anchor point's \"right\" bezier handle.\n       * @param {Number} x3 - x position of second anchor point's \"left\" bezier handle.\n       * @param {Number} y3 - y position of second anchor point's \"left\" bezier handle.\n       * @param {Number} x4 - x position of second anchor point.\n       * @param {Number} y4 - y position of second anchor point.\n       * @param {Number} [limit=Two.Utils.Curve.RecursionLimit] - The amount of vertices to create by subdividing.\n       * @returns {Number} The length of a curve.\n       * @description Given 2 points (a, b) and corresponding control point for each, return a float that represents the length of the curve using Gauss-Legendre algorithm. Limit iterations of calculation by `limit`.\n       */\n      getCurveLength: function(x1, y1, x2, y2, x3, y3, x4, y4, limit) {\n\n        // TODO: Better / fuzzier equality check\n        // Linear calculation\n        if (x1 === x2 && y1 === y2 && x3 === x4 && y3 === y4) {\n          var dx = x4 - x1;\n          var dy = y4 - y1;\n          return sqrt(dx * dx + dy * dy);\n        }\n\n        // Calculate the coefficients of a Bezier derivative.\n        var ax = 9 * (x2 - x3) + 3 * (x4 - x1),\n          bx = 6 * (x1 + x3) - 12 * x2,\n          cx = 3 * (x2 - x1),\n\n          ay = 9 * (y2 - y3) + 3 * (y4 - y1),\n          by = 6 * (y1 + y3) - 12 * y2,\n          cy = 3 * (y2 - y1);\n\n        var integrand = function(t) {\n          // Calculate quadratic equations of derivatives for x and y\n          var dx = (ax * t + bx) * t + cx,\n            dy = (ay * t + by) * t + cy;\n          return sqrt(dx * dx + dy * dy);\n        };\n\n        return integrate(\n          integrand, 0, 1, limit || Two.Utils.Curve.RecursionLimit\n        );\n\n      },\n\n      /**\n       * @name Two.Utils.getCurveBoundingBox\n       * @function\n       * @param {Number} x1 - x position of first anchor point.\n       * @param {Number} y1 - y position of first anchor point.\n       * @param {Number} x2 - x position of first anchor point's \"right\" bezier handle.\n       * @param {Number} y2 - y position of first anchor point's \"right\" bezier handle.\n       * @param {Number} x3 - x position of second anchor point's \"left\" bezier handle.\n       * @param {Number} y3 - y position of second anchor point's \"left\" bezier handle.\n       * @param {Number} x4 - x position of second anchor point.\n       * @param {Number} y4 - y position of second anchor point.\n       * @returns {Object} Object contains min and max `x` / `y` bounds.\n       * @see {@link https://github.com/adobe-webplatform/Snap.svg/blob/master/src/path.js#L856}\n       */\n      getCurveBoundingBox: function(x1, y1, x2, y2, x3, y3, x4, y4) {\n\n        var tvalues = [];\n        var bounds = [[], []];\n        var a, b, c, t, t1, t2, b2ac, sqrtb2ac;\n\n        for (var i = 0; i < 2; ++i) {\n            if (i == 0) {\n              b = 6 * x1 - 12 * x2 + 6 * x3;\n              a = -3 * x1 + 9 * x2 - 9 * x3 + 3 * x4;\n              c = 3 * x2 - 3 * x1;\n            } else {\n              b = 6 * y1 - 12 * y2 + 6 * y3;\n              a = -3 * y1 + 9 * y2 - 9 * y3 + 3 * y4;\n              c = 3 * y2 - 3 * y1;\n            }\n            if (abs(a) < 1e-12) {\n              if (abs(b) < 1e-12) {\n                continue;\n              }\n              t = -c / b;\n              if (0 < t && t < 1) {\n                tvalues.push(t);\n              }\n              continue;\n            }\n            b2ac = b * b - 4 * c * a;\n            sqrtb2ac = Math.sqrt(b2ac);\n            if (b2ac < 0) {\n              continue;\n            }\n            t1 = (-b + sqrtb2ac) / (2 * a);\n            if (0 < t1 && t1 < 1) {\n              tvalues.push(t1);\n            }\n            t2 = (-b - sqrtb2ac) / (2 * a);\n            if (0 < t2 && t2 < 1) {\n              tvalues.push(t2);\n            }\n        }\n\n        var x, y, j = tvalues.length;\n        var jlen = j;\n        var mt;\n\n        while (j--) {\n          t = tvalues[j];\n          mt = 1 - t;\n          bounds[0][j] = mt * mt * mt * x1 + 3 * mt * mt * t * x2 + 3 * mt * t * t * x3 + t * t * t * x4;\n          bounds[1][j] = mt * mt * mt * y1 + 3 * mt * mt * t * y2 + 3 * mt * t * t * y3 + t * t * t * y4;\n        }\n\n        bounds[0][jlen] = x1;\n        bounds[1][jlen] = y1;\n        bounds[0][jlen + 1] = x4;\n        bounds[1][jlen + 1] = y4;\n        bounds[0].length = bounds[1].length = jlen + 2;\n\n        return {\n          min: { x: Math.min.apply(0, bounds[0]), y: Math.min.apply(0, bounds[1]) },\n          max: { x: Math.max.apply(0, bounds[0]), y: Math.max.apply(0, bounds[1]) }\n        };\n\n      },\n\n      /**\n       * @name Two.Utils.integrate\n       * @function\n       * @param {Function} f\n       * @param {Number} a\n       * @param {Number} b\n       * @param {Integer} n\n       * @description Integration for `getCurveLength` calculations.\n       * @see [Paper.js]{@link https://github.com/paperjs/paper.js/blob/master/src/util/Numerical.js#L101}\n       */\n      integrate: function(f, a, b, n) {\n        var x = Two.Utils.Curve.abscissas[n - 2],\n          w = Two.Utils.Curve.weights[n - 2],\n          A = 0.5 * (b - a),\n          B = A + a,\n          i = 0,\n          m = (n + 1) >> 1,\n          sum = n & 1 ? w[i++] * f(B) : 0; // Handle odd n\n        while (i < m) {\n          var Ax = A * x[i];\n          sum += w[i++] * (f(B + Ax) + f(B - Ax));\n        }\n        return A * sum;\n      },\n\n      /**\n       * @name Two.Utils.getCurveFromPoints\n       * @function\n       * @param {Two.Anchor[]} points\n       * @param {Boolean} closed\n       * @description Sets the bezier handles on `Two.Anchor`s in the `points` list with estimated values to create a catmull-rom like curve. Used by {@link Two.Path#plot}.\n       */\n      getCurveFromPoints: function(points, closed) {\n\n        var l = points.length, last = l - 1;\n\n        for (var i = 0; i < l; i++) {\n\n          var point = points[i];\n\n          if (!_.isObject(point.controls)) {\n            Two.Anchor.AppendCurveProperties(point);\n          }\n\n          var prev = closed ? mod(i - 1, l) : max(i - 1, 0);\n          var next = closed ? mod(i + 1, l) : min(i + 1, last);\n\n          var a = points[prev];\n          var b = point;\n          var c = points[next];\n          getControlPoints(a, b, c);\n\n          b.command = i === 0 ? Two.Commands.move : Two.Commands.curve;\n\n        }\n\n      },\n\n      /**\n       * @name Two.Utils.getControlPoints\n       * @function\n       * @param {Two.Anchor} a\n       * @param {Two.Anchor} b\n       * @param {Two.Anchor} c\n       * @returns {Two.Anchor} Returns the passed middle point `b`.\n       * @description Given three coordinates set the control points for the middle, b, vertex based on its position with the adjacent points.\n       */\n      getControlPoints: function(a, b, c) {\n\n        var a1 = Two.Vector.angleBetween(a, b);\n        var a2 = Two.Vector.angleBetween(c, b);\n\n        var d1 = Two.Vector.distanceBetween(a, b);\n        var d2 = Two.Vector.distanceBetween(c, b);\n\n        var mid = (a1 + a2) / 2;\n\n        // TODO: Issue 73\n        if (d1 < 0.0001 || d2 < 0.0001) {\n          if (_.isBoolean(b.relative) && !b.relative) {\n            b.controls.left.copy(b);\n            b.controls.right.copy(b);\n          }\n          return b;\n        }\n\n        d1 *= 0.33; // Why 0.33?\n        d2 *= 0.33;\n\n        if (a2 < a1) {\n          mid += HALF_PI;\n        } else {\n          mid -= HALF_PI;\n        }\n\n        b.controls.left.x = cos(mid) * d1;\n        b.controls.left.y = sin(mid) * d1;\n\n        mid -= PI;\n\n        b.controls.right.x = cos(mid) * d2;\n        b.controls.right.y = sin(mid) * d2;\n\n        if (_.isBoolean(b.relative) && !b.relative) {\n          b.controls.left.x += b.x;\n          b.controls.left.y += b.y;\n          b.controls.right.x += b.x;\n          b.controls.right.y += b.y;\n        }\n\n        return b;\n\n      },\n\n      /**\n       * @name Two.Utils.getReflection\n       * @function\n       * @param {Two.Vector} a\n       * @param {Two.Vector} b\n       * @param {Boolean} [relative=false]\n       * @returns {Two.Vector} New `Two.Vector` that represents the reflection point.\n       * @description Get the reflection of a point `b` about point `a`. Where `a` is in absolute space and `b` is relative to `a`.\n       * @see {@link http://www.w3.org/TR/SVG11/implnote.html#PathElementImplementationNotes}\n       */\n      getReflection: function(a, b, relative) {\n\n        return new Two.Vector(\n          2 * a.x - (b.x + a.x) - (relative ? a.x : 0),\n          2 * a.y - (b.y + a.y) - (relative ? a.y : 0)\n        );\n\n      },\n\n      /**\n       * @name Two.Utils.getAnchorsFromArcData\n       * @function\n       * @param {Two.Vector} center\n       * @param {Radians} xAxisRotation\n       * @param {Number} rx - x radius\n       * @param {Number} ry - y radius\n       * @param {Radians} ts\n       * @param {Radians} td\n       * @param {Boolean} [ccw=false] - Set path traversal to counter-clockwise\n       */\n      getAnchorsFromArcData: function(center, xAxisRotation, rx, ry, ts, td, ccw) {\n\n        var matrix = new Two.Matrix()\n          .translate(center.x, center.y)\n          .rotate(xAxisRotation);\n\n        var l = Two.Resolution;\n\n        return _.map(_.range(l), function(i) {\n\n          var pct = (i + 1) / l;\n          if (!!ccw) {\n            pct = 1 - pct;\n          }\n\n          var theta = pct * td + ts;\n          var x = rx * Math.cos(theta);\n          var y = ry * Math.sin(theta);\n\n          // x += center.x;\n          // y += center.y;\n\n          var anchor = new Two.Anchor(x, y);\n          Two.Anchor.AppendCurveProperties(anchor);\n          anchor.command = Two.Commands.line;\n\n          // TODO: Calculate control points here...\n\n          return anchor;\n\n        });\n\n      },\n\n      /**\n       * @name Two.Utils.lerp\n       * @function\n       * @param {Number} a - Start value.\n       * @param {Number} b - End value.\n       * @param {Number} t - Zero-to-one value describing percentage between a and b.\n       * @returns {Number}\n       * @description Linear interpolation between two values `a` and `b` by an amount `t`.\n       */\n      lerp: function(a, b, t) {\n        return t * (b - a) + a;\n      },\n\n      /**\n       * @name Two.Utils.toFixed\n       * @function\n       * @param {Number} v - Any float\n       * @returns {Number} That float trimmed to the third decimal place.\n       * @description A pretty fast toFixed(3) alternative.\n       * @see {@link http://jsperf.com/parsefloat-tofixed-vs-math-round/18}\n       */\n      toFixed: function(v) {\n        return Math.floor(v * 1000) / 1000;\n      },\n\n      /**\n       * @name Two.Utils.mod\n       * @param {Number} v - The value to modulo\n       * @param {Number} l - The value to modulo by\n       * @returns {Number}\n       * @description Modulo with added functionality to handle negative values in a positive manner.\n       */\n      mod: function(v, l) {\n\n        while (v < 0) {\n          v += l;\n        }\n\n        return v % l;\n\n      },\n\n      /**\n       * @name Two.Utils.Collection\n       * @class\n       * @extends Two.Utils.Events\n       * @description An `Array` like object with additional event propagation on actions. `pop`, `shift`, and `splice` trigger `removed` events. `push`, `unshift`, and `splice` with more than 2 arguments trigger 'inserted'. Finally, `sort` and `reverse` trigger `order` events.\n       */\n      Collection: function() {\n\n        Array.call(this);\n\n        if (arguments.length > 1) {\n          Array.prototype.push.apply(this, arguments);\n        } else if (arguments[0] && Array.isArray(arguments[0])) {\n          Array.prototype.push.apply(this, arguments[0]);\n        }\n\n      },\n\n      /**\n       * @name Two.Utils.Error\n       * @class\n       * @description Custom error throwing for Two.js specific identification.\n       */\n      Error: function(message) {\n        this.name = 'two.js';\n        this.message = message;\n      },\n\n      /**\n       * @name Two.Utils.Events\n       * @interface\n       * @description Object inherited by many Two.js objects in order to facilitate custom events.\n       */\n      Events: {\n\n        /**\n         * @name Two.Utils.Events.on\n         * @function\n         * @param {String} name - The name of the event to bind a function to.\n         * @param {Function} handler - The function to be invoked when the event is dispatched.\n         * @description Call to add a listener to a specific event name.\n         */\n        on: function(name, handler) {\n\n          this._events || (this._events = {});\n          var list = this._events[name] || (this._events[name] = []);\n\n          list.push(handler);\n\n          return this;\n\n        },\n\n        /**\n         * @name Two.Utils.Events.off\n         * @function\n         * @param {String} [name] - The name of the event intended to be removed.\n         * @param {Function} [handler] - The handler intended to be reomved.\n         * @description Call to remove listeners from a specific event. If only `name` is passed then all the handlers attached to that `name` will be removed. If no arguments are passed then all handlers for every event on the obejct are removed.\n         */\n        off: function(name, handler) {\n\n          if (!this._events) {\n            return this;\n          }\n          if (!name && !handler) {\n            this._events = {};\n            return this;\n          }\n\n          var names = name ? [name] : _.keys(this._events);\n          for (var i = 0, l = names.length; i < l; i++) {\n\n            var name = names[i];\n            var list = this._events[name];\n\n            if (!!list) {\n              var events = [];\n              if (handler) {\n                for (var j = 0, k = list.length; j < k; j++) {\n                  var ev = list[j];\n                  ev = ev.handler ? ev.handler : ev;\n                  if (handler && handler !== ev) {\n                    events.push(ev);\n                  }\n                }\n              }\n              this._events[name] = events;\n            }\n          }\n\n          return this;\n        },\n\n        /**\n         * @name Two.Utils.Events.trigger\n         * @function\n         * @param {String} name - The name of the event to dispatch.\n         * @param arguments - Anything can be passed after the name and those will be passed on to handlers attached to the event in the order they are passed.\n         * @description Call to trigger a custom event. Any additional arguments passed after the name will be passed along to the attached handlers.\n         */\n        trigger: function(name) {\n          if (!this._events) return this;\n          var args = slice.call(arguments, 1);\n          var events = this._events[name];\n          if (events) trigger(this, events, args);\n          return this;\n        },\n\n        listen: function(obj, name, handler) {\n\n          var bound = this;\n\n          if (obj) {\n\n            var event = function () {\n              handler.apply(bound, arguments);\n            };\n\n            // Add references about the object that assigned this listener\n            event.obj = obj;\n            event.name = name;\n            event.handler = handler;\n\n            obj.on(name, ev);\n\n          }\n\n          return this;\n\n        },\n\n        ignore: function(obj, name, handler) {\n\n          obj.off(name, handler);\n          return this;\n\n        }\n\n      }\n\n    })\n\n  });\n\n  /**\n   * @name Two.Utils.Events.bind\n   * @borrows Two.Utils.Events.on as Two.Utils.Events.bind\n   */\n  Two.Utils.Events.bind = Two.Utils.Events.on;\n\n  /**\n   * @name Two.Utils.Events.unbind\n   * @borrows Two.Utils.Events.off as Two.Utils.Events.unbind\n   */\n  Two.Utils.Events.unbind = Two.Utils.Events.off;\n\n  var trigger = function(obj, events, args) {\n    var method;\n    switch (args.length) {\n    case 0:\n      method = function(i) {\n        events[i].call(obj, args[0]);\n      };\n      break;\n    case 1:\n      method = function(i) {\n        events[i].call(obj, args[0], args[1]);\n      };\n      break;\n    case 2:\n      method = function(i) {\n        events[i].call(obj, args[0], args[1], args[2]);\n      };\n      break;\n    case 3:\n      method = function(i) {\n        events[i].call(obj, args[0], args[1], args[2], args[3]);\n      };\n      break;\n    default:\n      method = function(i) {\n        events[i].apply(obj, args);\n      };\n    }\n    for (var i = 0; i < events.length; i++) {\n      method(i);\n    }\n  };\n\n  Two.Utils.Error.prototype = new Error();\n  Two.Utils.Error.prototype.constructor = Two.Utils.Error;\n\n  Two.Utils.Collection.prototype = new Array();\n  Two.Utils.Collection.prototype.constructor = Two.Utils.Collection;\n\n  _.extend(Two.Utils.Collection.prototype, Two.Utils.Events, {\n\n    pop: function() {\n      var popped = Array.prototype.pop.apply(this, arguments);\n      this.trigger(Two.Events.remove, [popped]);\n      return popped;\n    },\n\n    shift: function() {\n      var shifted = Array.prototype.shift.apply(this, arguments);\n      this.trigger(Two.Events.remove, [shifted]);\n      return shifted;\n    },\n\n    push: function() {\n      var pushed = Array.prototype.push.apply(this, arguments);\n      this.trigger(Two.Events.insert, arguments);\n      return pushed;\n    },\n\n    unshift: function() {\n      var unshifted = Array.prototype.unshift.apply(this, arguments);\n      this.trigger(Two.Events.insert, arguments);\n      return unshifted;\n    },\n\n    splice: function() {\n      var spliced = Array.prototype.splice.apply(this, arguments);\n      var inserted;\n\n      this.trigger(Two.Events.remove, spliced);\n\n      if (arguments.length > 2) {\n        inserted = this.slice(arguments[0], arguments[0] + arguments.length - 2);\n        this.trigger(Two.Events.insert, inserted);\n        this.trigger(Two.Events.order);\n      }\n      return spliced;\n    },\n\n    sort: function() {\n      Array.prototype.sort.apply(this, arguments);\n      this.trigger(Two.Events.order);\n      return this;\n    },\n\n    reverse: function() {\n      Array.prototype.reverse.apply(this, arguments);\n      this.trigger(Two.Events.order);\n      return this;\n    }\n\n  });\n\n  // Localize utils\n\n  var getAnchorsFromArcData = Two.Utils.getAnchorsFromArcData,\n    getControlPoints = Two.Utils.getControlPoints,\n    getCurveFromPoints = Two.Utils.getCurveFromPoints,\n    solveSegmentIntersection = Two.Utils.solveSegmentIntersection,\n    decoupleShapes = Two.Utils.decoupleShapes,\n    mod = Two.Utils.mod,\n    getBackingStoreRatio = Two.Utils.getBackingStoreRatio,\n    getComponentOnCubicBezier = Two.Utils.getComponentOnCubicBezier,\n    getCurveLength = Two.Utils.getCurveLength,\n    integrate = Two.Utils.integrate,\n    getReflection = Two.Utils.getReflection;\n\n  _.extend(Two.prototype, Two.Utils.Events, {\n\n    constructor: Two,\n\n    /**\n     * @name Two#appendTo\n     * @function\n     * @param {Element} elem - The DOM element to append the Two.js stage to.\n     * @description Shorthand method to append your instance of Two.js to the `document`.\n     */\n    appendTo: function(elem) {\n\n      elem.appendChild(this.renderer.domElement);\n      return this;\n\n    },\n\n    /**\n     * @name Two#play\n     * @function\n     * @fires `Two.Events.play` event\n     * @description Call to start an internal animation loop.\n     * @nota-bene This function initiates a `requestAnimationFrame` loop.\n     */\n    play: function() {\n\n      Two.Utils.setPlaying.call(this, true);\n      raf.init();\n      return this.trigger(Two.Events.play);\n\n    },\n\n    /**\n     * @name Two#pause\n     * @function\n     * @fires `Two.Events.pause` event\n     * @description Call to stop the internal animation loop for a specific instance of Two.js.\n     */\n    pause: function() {\n\n      this.playing = false;\n      return this.trigger(Two.Events.pause);\n\n    },\n\n    /**\n     * @name Two#update\n     * @fires `Two.Events.update` event\n     * @description Update positions and calculations in one pass before rendering. Then render to the canvas.\n     * @nota-bene This function is called automatically if using {@link Two#play} or the `autostart` parameter in construction.\n     */\n    update: function() {\n\n      var animated = !!this._lastFrame;\n      var now = perf.now();\n\n      if (animated) {\n        this.timeDelta = parseFloat((now - this._lastFrame).toFixed(3));\n      }\n      this._lastFrame = now;\n\n      var width = this.width;\n      var height = this.height;\n      var renderer = this.renderer;\n\n      // Update width / height for the renderer\n      if (width !== renderer.width || height !== renderer.height) {\n        renderer.setSize(width, height, this.ratio);\n      }\n\n      this.trigger(Two.Events.update, this.frameCount, this.timeDelta);\n\n      return this.render();\n\n    },\n\n    /**\n     * @name Two#render\n     * @fires `Two.Events.render` event\n     * @description Render all drawable and visible objects of the scene.\n     */\n    render: function() {\n\n      this.renderer.render();\n      return this.trigger(Two.Events.render, this.frameCount++);\n\n    },\n\n    // Convenience Methods\n\n    /**\n     * @name Two#add\n     * @function\n     * @param {(Two.Shape[]|...Two.Shape)}} [objects] - An array of Two.js objects. Alternatively can add objects as individual arguments.\n     * @description A shorthand method to add specific Two.js objects to the scene.\n     */\n    add: function(o) {\n\n      var objects = o;\n      if (!(objects instanceof Array)) {\n        objects = _.toArray(arguments);\n      }\n\n      this.scene.add(objects);\n      return this;\n\n    },\n\n    /**\n     * @name Two#remove\n     * @function\n     * @param {(Two.Shape[]|...Two.Shape)} [objects] - An array of Two.js objects.\n     * @description A shorthand method to remove specific Two.js objects from the scene.\n     */\n    remove: function(o) {\n\n      var objects = o;\n      if (!(objects instanceof Array)) {\n        objects = _.toArray(arguments);\n      }\n\n      this.scene.remove(objects);\n\n      return this;\n\n    },\n\n    /**\n     * @name Two#clear\n     * @function\n     * @description Remove all all Two.js objects from the scene.\n     */\n    clear: function() {\n\n      this.scene.remove(this.scene.children);\n      return this;\n\n    },\n\n    /**\n     * @name Two#makeLine\n     * @function\n     * @param {Number} x1\n     * @param {Number} y1\n     * @param {Number} x2\n     * @param {Number} y2\n     * @returns {Two.Line}\n     * @description Creates a Two.js line and adds it to the scene.\n     */\n    makeLine: function(x1, y1, x2, y2) {\n\n      var line = new Two.Line(x1, y1, x2, y2);\n      this.scene.add(line);\n\n      return line;\n\n    },\n\n    /**\n     * @name Two#makeRectangle\n     * @function\n     * @param {Number} x\n     * @param {Number} y\n     * @param {Number} width\n     * @param {Number} height\n     * @returns {Two.Rectangle}\n     * @description Creates a Two.js rectangle and adds it to the scene.\n     */\n    makeRectangle: function(x, y, width, height) {\n\n      var rect = new Two.Rectangle(x, y, width, height);\n      this.scene.add(rect);\n\n      return rect;\n\n    },\n\n    /**\n     * @name Two#makeRoundedRectangle\n     * @function\n     * @param {Number} x\n     * @param {Number} y\n     * @param {Number} width\n     * @param {Number} height\n     * @param {Number} sides\n     * @returns {Two.Rectangle}\n     * @description Creates a Two.js rounded rectangle and adds it to the scene.\n     */\n    makeRoundedRectangle: function(x, y, width, height, sides) {\n\n      var rect = new Two.RoundedRectangle(x, y, width, height, sides);\n      this.scene.add(rect);\n\n      return rect;\n\n    },\n\n    /**\n     * @name Two#makeCircle\n     * @function\n     * @param {Number} x\n     * @param {Number} y\n     * @param {Number} radius\n     * @returns {Two.Circle}\n     * @description Creates a Two.js circle and adds it to the scene.\n     */\n    makeCircle: function(x, y, radius) {\n\n      var circle = new Two.Circle(x, y, radius);\n      this.scene.add(circle);\n\n      return circle;\n\n    },\n\n    /**\n     * @name Two#makeEllipse\n     * @function\n     * @param {Number} x\n     * @param {Number} y\n     * @param {Number} rx\n     * @param {Number} ry\n     * @returns {Two.Ellipse}\n     * @description Creates a Two.js ellipse and adds it to the scene.\n     */\n    makeEllipse: function(x, y, rx, ry) {\n\n      var ellipse = new Two.Ellipse(x, y, rx, ry);\n      this.scene.add(ellipse);\n\n      return ellipse;\n\n    },\n\n    /**\n     * @name Two#makeStar\n     * @function\n     * @param {Number} x\n     * @param {Number} y\n     * @param {Number} outerRadius\n     * @param {Number} innerRadius\n     * @param {Number} sides\n     * @returns {Two.Star}\n     * @description Creates a Two.js star and adds it to the scene.\n     */\n    makeStar: function(ox, oy, outerRadius, innerRadius, sides) {\n\n      var star = new Two.Star(ox, oy, outerRadius, innerRadius, sides);\n      this.scene.add(star);\n\n      return star;\n\n    },\n\n    /**\n     * @name Two#makeCurve\n     * @function\n     * @param {Two.Anchor[]} [points] - An array of `Two.Anchor` points.\n     * @param {...Number} - Alternatively you can pass alternating `x` / `y` coordinate values as individual arguments. These will be combined into `Two.Anchor`s for use in the path.\n     * @returns {Two.Path} - Where `path.curved` is set to `true`.\n     * @description Creates a Two.js path that is curved and adds it to the scene.\n     * @nota-bene In either case of passing an array or passing numbered arguments the last argument is an optional `Boolean` that defines whether the path should be open or closed.\n     */\n    makeCurve: function(p) {\n\n      var l = arguments.length, points = p;\n      if (!_.isArray(p)) {\n        points = [];\n        for (var i = 0; i < l; i+=2) {\n          var x = arguments[i];\n          if (!_.isNumber(x)) {\n            break;\n          }\n          var y = arguments[i + 1];\n          points.push(new Two.Anchor(x, y));\n        }\n      }\n\n      var last = arguments[l - 1];\n      var curve = new Two.Path(points, !(_.isBoolean(last) ? last : undefined), true);\n      var rect = curve.getBoundingClientRect();\n      curve.center().translation\n        .set(rect.left + rect.width / 2, rect.top + rect.height / 2);\n\n      this.scene.add(curve);\n\n      return curve;\n\n    },\n\n    /**\n     * @name Two#makePolygon\n     * @function\n     * @param {Number} x\n     * @param {Number} y\n     * @param {Number} radius\n     * @param {Number} sides\n     * @returns {Two.Polygon}\n     * @description Creates a Two.js polygon and adds it to the scene.\n     */\n    makePolygon: function(x, y, radius, sides) {\n\n      var poly = new Two.Polygon(x, y, radius, sides);\n      this.scene.add(poly);\n\n      return poly;\n\n    },\n\n    /**\n     * @name Two#makeArcSegment\n     * @function\n     * @param {Number} x\n     * @param {Number} y\n     * @param {Number} innerRadius\n     * @param {Number} outerRadius\n     * @param {Number} startAngle\n     * @param {Number} endAngle\n     * @param {Number} [resolution=Two.Resolution] - The number of vertices that should comprise the arc segment.\n     */\n    makeArcSegment: function(ox, oy, ir, or, sa, ea, res) {\n      var arcSegment = new Two.ArcSegment(ox, oy, ir, or, sa, ea, res);\n      this.scene.add(arcSegment);\n      return arcSegment;\n    },\n\n    /**\n     * @name Two#makePath\n     * @function\n     * @param {Two.Anchor[]} [points] - An array of `Two.Anchor` points.\n     * @param {...Number} - Alternatively you can pass alternating `x` / `y` coordinate values as individual arguments. These will be combined into `Two.Anchor`s for use in the path.\n     * @returns {Two.Path}\n     * @description Creates a Two.js path and adds it to the scene.\n     * @nota-bene In either case of passing an array or passing numbered arguments the last argument is an optional `Boolean` that defines whether the path should be open or closed.\n     */\n    makePath: function(p) {\n\n      var l = arguments.length, points = p;\n      if (!_.isArray(p)) {\n        points = [];\n        for (var i = 0; i < l; i+=2) {\n          var x = arguments[i];\n          if (!_.isNumber(x)) {\n            break;\n          }\n          var y = arguments[i + 1];\n          points.push(new Two.Anchor(x, y));\n        }\n      }\n\n      var last = arguments[l - 1];\n      var path = new Two.Path(points, !(_.isBoolean(last) ? last : undefined));\n      var rect = path.getBoundingClientRect();\n      path.center().translation\n        .set(rect.left + rect.width / 2, rect.top + rect.height / 2);\n\n      this.scene.add(path);\n\n      return path;\n\n    },\n\n    /**\n     * @name Two#makeText\n     * @function\n     * @param {String} message\n     * @param {Number} x\n     * @param {Number} y\n     * @param {Object} [styles] - An object to describe any of the {@link Two.Text.Properties} including `fill`, `stroke`, `linewidth`, `family`, `alignment`, `leading`, `opacity`, etc..\n     * @returns {Two.Text}\n     * @description Creates a Two.js text object and adds it to the scene.\n     */\n    makeText: function(message, x, y, styles) {\n      var text = new Two.Text(message, x, y, styles);\n      this.add(text);\n      return text;\n    },\n\n    /**\n     * @name Two#makeLinearGradient\n     * @function\n     * @param {Number} x1\n     * @param {Number} y1\n     * @param {Number} x2\n     * @param {Number} y2\n     * @param {...Two.Stop} [stops] - Any number of color stops sometimes reffered to as ramp stops. If none are supplied then the default black-to-white two stop gradient is applied.\n     * @returns {Two.LinearGradient}\n     * @description Creates a Two.js linear gradient and ads it to the scene. In the case of an effect it's added to an invisible \"definitions\" group.\n     */\n    makeLinearGradient: function(x1, y1, x2, y2 /* stops */) {\n\n      var stops = slice.call(arguments, 4);\n      var gradient = new Two.LinearGradient(x1, y1, x2, y2, stops);\n\n      this.add(gradient);\n\n      return gradient;\n\n    },\n\n    /**\n     * @name Two#makeRadialGradient\n     * @function\n     * @param {Number} x1\n     * @param {Number} y1\n     * @param {Number} radius\n     * @param {...Two.Stop} [stops] - Any number of color stops sometimes reffered to as ramp stops. If none are supplied then the default black-to-white two stop gradient is applied.\n     * @returns {Two.RadialGradient}\n     * @description Creates a Two.js linear-gradient object and ads it to the scene. In the case of an effect it's added to an invisible \"definitions\" group.\n     */\n    makeRadialGradient: function(x1, y1, r /* stops */) {\n\n      var stops = slice.call(arguments, 3);\n      var gradient = new Two.RadialGradient(x1, y1, r, stops);\n\n      this.add(gradient);\n\n      return gradient;\n\n    },\n\n    /**\n     * @name Two#makeSprite\n     * @function\n     * @param {(String|Two.Texture)} pathOrTexture - The URL path to an image or an already created `Two.Texture`.\n     * @param {Number} x\n     * @param {Number} y\n     * @param {Number} [columns=1]\n     * @param {Number} [rows=1]\n     * @param {Integer} [frameRate=0]\n     * @param {Boolean} [autostart=false]\n     * @returns {Two.Sprite}\n     * @description Creates a Two.js sprite object and adds it to the scene. Sprites can be used for still images as well as animations.\n     */\n    makeSprite: function(path, x, y, cols, rows, frameRate, autostart) {\n\n      var sprite = new Two.Sprite(path, x, y, cols, rows, frameRate);\n      if (!!autostart) {\n        sprite.play();\n      }\n      this.add(sprite);\n\n      return sprite;\n\n    },\n\n    /**\n     * @name Two#makeImageSequence\n     * @function\n     * @param {(String[]|Two.Texture[])} pathsOrTextures - An array of paths or of `Two.Textures`.\n     * @param {Number} x\n     * @param {Number} y\n     * @param {Number} [frameRate=0]\n     * @param {Boolean} [autostart=false]\n     * @returns {Two.ImageSequence}\n     * @description Creates a Two.js image sequence object and adds it to the scene.\n     */\n    makeImageSequence: function(paths, x, y, frameRate, autostart) {\n\n      var imageSequence = new Two.ImageSequence(paths, x, y, frameRate);\n      if (!!autostart) {\n        imageSequence.play();\n      }\n      this.add(imageSequence);\n\n      return imageSequence;\n\n    },\n\n    /**\n     * @name Two#makeTexture\n     * @function\n     * @param {(String|Image|Canvas|Video)} [pathOrSource] - The URL path to an image or a DOM image-like element.\n     * @param {Function} [callback] - Function to be invoked when the image is loaded.\n     * @returns {Two.Texture}\n     * @description Creates a Two.js texture object.\n     */\n    makeTexture: function(path, callback) {\n\n      var texture = new Two.Texture(path, callback);\n      return texture;\n\n    },\n\n    /**\n     * @name Two#makeGroup\n     * @function\n     * @param {(Two.Shape[]|...Two.Shape)} [objects] - Two.js objects to be added to the group in the form of an array or as individual arguments.\n     * @returns {Two.Group}\n     * @description Creates a Two.js group object and adds it to the scene.\n     */\n    makeGroup: function(o) {\n\n      var objects = o;\n      if (!(objects instanceof Array)) {\n        objects = _.toArray(arguments);\n      }\n\n      var group = new Two.Group();\n      this.scene.add(group);\n      group.add(objects);\n\n      return group;\n\n    },\n\n    /**\n     * @name Two#interpret\n     * @function\n     * @param {SvgNode} svgNode - The SVG node to be parsed.\n     * @param {Boolean} shallow - Don't create a top-most group but append all content directly.\n     * @param {Boolean} add  Automatically add the reconstructed SVG node to scene.\n     * @returns {Two.Group}\n     * @description Interpret an SVG Node and add it to this instance's scene. The distinction should be made that this doesn't `import` svg's, it solely interprets them into something compatible for Two.js this is slightly different than a direct transcription.\n     */\n    interpret: function(svgNode, shallow, add) {\n\n      var tag = svgNode.tagName.toLowerCase(),\n          add = (typeof add !== 'undefined') ? add : true;\n\n      if (!(tag in Two.Utils.read)) {\n        return null;\n      }\n\n      var node = Two.Utils.read[tag].call(this, svgNode);\n\n      if (!!add) {\n        this.add(shallow && node instanceof Two.Group ? node.children : node);\n      }\n\n      return node;\n\n    },\n\n    /**\n     * @name Two#load\n     * @function\n     * @param {String} pathOrSVGContent - The URL path of an SVG file or an SVG document as text.\n     * @param {Function} callback - Function to call once loading has completed.\n     * @returns {Two.Group}\n     * @description Load an SVG file or SVG text and interpret it into Two.js legible objects.\n     */\n    load: function(text, callback) {\n\n      var group = new Two.Group();\n      var elem, i, j;\n\n      var attach = _.bind(function(data) {\n\n        dom.temp.innerHTML = data;\n\n        for (i = 0; i < dom.temp.children.length; i++) {\n          elem = dom.temp.children[i];\n          if (/svg/i.test(elem.nodeName)) {\n            // Two.Utils.applySvgViewBox.call(this, group, elem.getAttribute('viewBox'));\n            for (j = 0; j < elem.children.length; j++) {\n              group.add(this.interpret(elem.children[j]));\n            }\n          } else {\n            group.add(this.interpret(elem));\n          }\n        }\n\n        if (_.isFunction(callback)) {\n          var svg = dom.temp.children.length <= 1\n            ? dom.temp.children[0] : dom.temp.children;\n          callback(group, svg);\n        }\n\n      }, this);\n\n      if (/.*\\.svg$/ig.test(text)) {\n\n        Two.Utils.xhr(text, attach);\n\n        return group;\n\n      }\n\n      attach(text);\n\n      return group;\n\n    }\n\n  });\n\n  function fitToWindow() {\n\n    var wr = document.body.getBoundingClientRect();\n\n    var width = this.width = wr.width;\n    var height = this.height = wr.height;\n\n    this.renderer.setSize(width, height, this.ratio);\n\n  }\n\n  function updateDimensions(width, height) {\n    this.width = width;\n    this.height = height;\n    this.trigger(Two.Events.resize, width, height);\n  }\n\n  // Request Animation Frame\n\n  var raf = dom.getRequestAnimationFrame();\n\n  function loop() {\n\n    for (var i = 0; i < Two.Instances.length; i++) {\n      var t = Two.Instances[i];\n      if (t.playing) {\n        t.update();\n      }\n    }\n\n    Two.nextFrameID = raf(loop);\n\n  }\n\n  if (typeof define === 'function' && define.amd) {\n    define('two', [], function() {\n      return Two;\n    });\n  } else if (typeof module != 'undefined' && module.exports) {\n    module.exports = Two;\n  }\n\n  return Two;\n\n})((typeof global !== 'undefined' ? global : (this || window)).Two);\n\n(function(Two) {\n\n  var _ = Two.Utils;\n\n  /**\n   * @name Two.Registry\n   * @class\n   * @description An arbitrary class to manage a directory of things. Mainly used for keeping tabs of textures in Two.js.\n   */\n  var Registry = Two.Registry = function() {\n\n    this.map = {};\n\n  };\n\n  _.extend(Registry.prototype, {\n\n    constructor: Registry,\n\n    /**\n     * @name Two.Registry#add\n     * @function\n     * @param {String} id - A unique identifier.\n     * @param value - Any type of variable to be registered to the directory.\n     * @description Adds any value to the directory. Assigned by the `id`.\n     */\n    add: function(id, obj) {\n      this.map[id] = obj;\n      return this;\n    },\n\n    /**\n     * @name Two.Registry#remove\n     * @function\n     * @param {String} id - A unique identifier.\n     * @description Remove any value from the directory by its `id`.\n     */\n    remove: function(id) {\n      delete this.map[id];\n      return this;\n    },\n\n    /**\n     * @name Two.Registry#get\n     * @function\n     * @param {String} id - A unique identifier.\n     * @returns value - The associated value. If unavailable then `undefined` is returned.\n     * @description Get a registered value by its `id`.\n     */\n    get: function(id) {\n      return this.map[id];\n    },\n\n    /**\n     * @name Two.Registry#contains\n     * @function\n     * @param {String} id - A unique identifier.\n     * @returns {Boolean}\n     * @description Convenience method to see if a value is registered to an `id` already.\n     */\n    contains: function(id) {\n      return id in this.map;\n    }\n\n  });\n\n})((typeof global !== 'undefined' ? global : (this || window)).Two);\n\n(function(Two) {\n\n  var _ = Two.Utils;\n\n  /**\n   * @name Two.Vector\n   * @class\n   * @param {Number} [x=0] - Any number to represent the horizontal x-component of the vector.\n   * @param {Number} [y=0] - Any number to represent the vertical y-component of the vector.\n   * @description A class to store x / y component vector data. In addition to storing data `Two.Vector` has suped up methods for commonplace mathematical operations.\n   */\n  var Vector = Two.Vector = function(x, y) {\n\n    /**\n     * @name Two.Vector#x\n     * @property {Number} - The horizontal x-component of the vector.\n     */\n    this.x = x || 0;\n\n    /**\n     * @name Two.Vector#y\n     * @property {Number} - The vertical y-component of the vector.\n     */\n    this.y = y || 0;\n\n  };\n\n  _.extend(Vector, {\n\n    /**\n     * @name Two.Vector.zero\n     * @readonly\n     * @property {Two.Vector} - Handy reference to a vector with component values 0, 0 at all times.\n     */\n    zero: new Two.Vector(),\n\n    /**\n     * @name Two.Vector.add\n     * @function\n     * @param {Two.Vector} v1\n     * @param {Two.Vector} v2\n     * @returns {Two.Vector}\n     * @description Add two vectors together.\n     */\n    add: function(v1, v2) {\n      return new Vector(v1.x + v2.x, v1.y + v2.y);\n    },\n\n    /**\n     * @name Two.Vector.sub\n     * @function\n     * @param {Two.Vector} v1\n     * @param {Two.Vector} v2\n     * @returns {Two.Vector}\n     * @description Subtract two vectors: `v2` from `v1`.\n     */\n    sub: function(v1, v2) {\n      return new Vector(v1.x - v2.x, v1.y - v2.y);\n    },\n\n    /**\n     * @name Two.Vector.subtract\n     * @borrows Two.Vector.sub as Two.Vector.subtract\n     */\n    subtract: function(v1, v2) {\n      return Vector.sub(v1, v2);\n    },\n\n    /**\n     * @name Two.Vector.ratioBetween\n     * @function\n     * @param {Two.Vector} A\n     * @param {Two.Vector} B\n     * @returns {Number} The ratio betwen two points `v1` and `v2`.\n     */\n    ratioBetween: function(v1, v2) {\n\n      return (v1.x * v2.x + v1.y * v2.y) / (v1.length() * v2.length());\n\n    },\n\n    /**\n     * @name Two.Vector.angleBetween\n     * @function\n     * @param {Two.Vector} v1\n     * @param {Two.Vector} v2\n     * @returns {Radians} The angle between points `v1` and `v2`.\n     */\n    angleBetween: function(v1, v2) {\n\n      var dx, dy;\n\n      if (arguments.length >= 4) {\n\n        dx = arguments[0] - arguments[2];\n        dy = arguments[1] - arguments[3];\n\n        return Math.atan2(dy, dx);\n\n      }\n\n      dx = v1.x - v2.x;\n      dy = v1.y - v2.y;\n\n      return Math.atan2(dy, dx);\n\n    },\n\n    /**\n     * @name Two.Vector.distanceBetween\n     * @function\n     * @param {Two.Vector} v1\n     * @param {Two.Vector} v2\n     * @returns {Number} The distance between points `v1` and `v2`. Distance is always positive.\n     */\n    distanceBetween: function(v1, v2) {\n\n      return Math.sqrt(Vector.distanceBetweenSquared(v1, v2));\n\n    },\n\n    /**\n     * @name Two.Vector.distanceBetweenSquared\n     * @function\n     * @param {Two.Vector} v1\n     * @param {Two.Vector} v2\n     * @returns {Number} The squared distance between points `v1` and `v2`.\n     */\n    distanceBetweenSquared: function(v1, v2) {\n\n      var dx = v1.x - v2.x;\n      var dy = v1.y - v2.y;\n\n      return dx * dx + dy * dy;\n\n    },\n\n    /**\n     * @name Two.Vector.MakeObservable\n     * @function\n     * @param {Object} object - The object to make observable.\n     * @description Convenience function to apply observable qualities of a `Two.Vector` to any object. Handy if you'd like to extend the `Two.Vector` class on a custom class.\n     */\n    MakeObservable: function(object) {\n\n      // /**\n      //  * Override Backbone bind / on in order to add properly broadcasting.\n      //  * This allows Two.Vector to not broadcast events unless event listeners\n      //  * are explicity bound to it.\n      //  */\n\n      object.bind = object.on = function() {\n\n        if (!this._bound) {\n          this._x = this.x;\n          this._y = this.y;\n          Object.defineProperty(this, 'x', xgs);\n          Object.defineProperty(this, 'y', ygs);\n          _.extend(this, BoundProto);\n          this._bound = true; // Reserved for event initialization check\n        }\n\n        Two.Utils.Events.bind.apply(this, arguments);\n\n        return this;\n\n      };\n\n    }\n\n  });\n\n  _.extend(Vector.prototype, Two.Utils.Events, {\n\n    constructor: Vector,\n\n    /**\n     * @name Two.Vector#set\n     * @function\n     * @param {Number} x\n     * @param {Number} y\n     * @returns {Two.Vector} - An instance of itself for the purpose of chaining.\n     * @description Set the x / y components of a vector to specific number values.\n     */\n    set: function(x, y) {\n      this.x = x;\n      this.y = y;\n      return this;\n    },\n\n    /**\n     * @name Two.Vector#copy\n     * @function\n     * @param {Two.Vector} v\n     * @returns {Two.Vector} - An instance of itself for the purpose of chaining.\n     * @description Copy the x / y components of another object `v`.\n     */\n    copy: function(v) {\n      this.x = v.x;\n      this.y = v.y;\n      return this;\n    },\n\n    /**\n     * @name Two.Vector#clear\n     * @function\n     * @returns {Two.Vector} - An instance of itself for the purpose of chaining.\n     * @description Set the x / y component values of the vector to zero.\n     */\n    clear: function() {\n      this.x = 0;\n      this.y = 0;\n      return this;\n    },\n\n    /**\n     * @name Two.Vector#clone\n     * @function\n     * @returns {Two.Vector} - A new instance of `Two.Vector`.\n     * @description Create a new vector and copy the existing values onto the newly created instance.\n     */\n    clone: function() {\n      return new Vector(this.x, this.y);\n    },\n\n    /**\n     * @name Two.Vector#add\n     * @function\n     * @param {Two.Vector} v\n     * @returns {Two.Vector} - An instance of itself for the purpose of chaining.\n     * @description Add an object with x / y component values to the instance.\n     * @overloaded\n     */\n\n    /**\n     * @name Two.Vector#add\n     * @function\n     * @param {Number} v\n     * @returns {Two.Vector} - An instance of itself for the purpose of chaining.\n     * @description Add the **same** number to both x / y component values of the instance.\n     * @overloaded\n     */\n\n    /**\n     * @name Two.Vector#add\n     * @function\n     * @param {Number} x\n     * @param {Number} y\n     * @returns {Two.Vector} - An instance of itself for the purpose of chaining.\n     * @description Add `x` / `y` values to their respective component value on the instance.\n     * @overloaded\n     */\n    add: function(x, y) {\n      if (arguments.length <= 0) {\n        return this;\n      } else if (arguments.length <= 1) {\n        if (_.isNumber(x)) {\n          this.x += x;\n          this.y += x;\n        } else if (x && _.isNumber(x.x) && _.isNumber(x.y)) {\n          this.x += x.x;\n          this.y += x.y;\n        }\n      } else {\n        this.x += x;\n        this.y += y;\n      }\n      return this;\n    },\n\n    /**\n     * @name Two.Vector#addSelf\n     * @borrows Two.Vector#add as Two.Vector#addSelf\n     */\n    addSelf: function(v) {\n      return this.add.apply(this, arguments);\n    },\n\n    /**\n     * @name Two.Vector#sub\n     * @function\n     * @param {Two.Vector} v\n     * @returns {Two.Vector} - An instance of itself for the purpose of chaining.\n     * @description Subtract an object with x / y component values to the instance.\n     * @overloaded\n     */\n\n    /**\n     * @name Two.Vector#sub\n     * @function\n     * @param {Number} v\n     * @returns {Two.Vector} - An instance of itself for the purpose of chaining.\n     * @description Subtract the **same** number to both x / y component values of the instance.\n     * @overloaded\n     */\n\n    /**\n     * @name Two.Vector#sub\n     * @function\n     * @param {Number} x\n     * @param {Number} y\n     * @returns {Two.Vector} - An instance of itself for the purpose of chaining.\n     * @description Subtract `x` / `y` values to their respective component value on the instance.\n     * @overloaded\n     */\n    sub: function(x, y) {\n      if (arguments.length <= 0) {\n        return this;\n      } else if (arguments.length <= 1) {\n        if (_.isNumber(x)) {\n          this.x -= x;\n          this.y -= x;\n        } else if (x && _.isNumber(x.x) && _.isNumber(x.y)) {\n          this.x -= x.x;\n          this.y -= x.y;\n        }\n      } else {\n        this.x -= x;\n        this.y -= y;\n      }\n      return this;\n    },\n\n    /**\n     * @name Two.Vector#subtract\n     * @borrows Two.Vector#sub as Two.Vector#subtract\n     */\n    subtract: function() {\n      return this.sub.apply(this, arguments);\n    },\n\n    /**\n     * @name Two.Vector#subSelf\n     * @borrows Two.Vector#sub as Two.Vector#subSelf\n     */\n    subSelf: function(v) {\n      return this.sub.apply(this, arguments);\n    },\n\n    /**\n     * @name Two.Vector#subtractSelf\n     * @borrows Two.Vector#sub as Two.Vector#subtractSelf\n     */\n    subtractSelf: function(v) {\n      return this.sub.apply(this, arguments);\n    },\n\n    /**\n     * @name Two.Vector#multiply\n     * @function\n     * @param {Two.Vector} v\n     * @returns {Two.Vector} - An instance of itself for the purpose of chaining.\n     * @description Multiply an object with x / y component values to the instance.\n     * @overloaded\n     */\n\n    /**\n     * @name Two.Vector#multiply\n     * @function\n     * @param {Number} v\n     * @returns {Two.Vector} - An instance of itself for the purpose of chaining.\n     * @description Multiply the **same** number to both x / y component values of the instance.\n     * @overloaded\n     */\n\n    /**\n     * @name Two.Vector#multiply\n     * @function\n     * @param {Number} x\n     * @param {Number} y\n     * @returns {Two.Vector} - An instance of itself for the purpose of chaining.\n     * @description Multiply `x` / `y` values to their respective component value on the instance.\n     * @overloaded\n     */\n    multiply: function(x, y) {\n      if (arguments.length <= 0) {\n        return this;\n      } else if (arguments.length <= 1) {\n        if (_.isNumber(x)) {\n          this.x *= x;\n          this.y *= x;\n        } else if (x && _.isNumber(x.x) && _.isNumber(x.y)) {\n          this.x *= x.x;\n          this.y *= x.y;\n        }\n      } else {\n        this.x *= x;\n        this.y *= y;\n      }\n      return this;\n    },\n\n    /**\n     * @name Two.Vector#multiplySelf\n     * @borrows Two.Vector#multiply as Two.Vector#multiplySelf\n     */\n    multiplySelf: function(v) {\n      return this.multiply.apply(this, arguments);\n    },\n\n    /**\n     * @name Two.Vector#multiplyScalar\n     * @function\n     * @param {Number} s - The scalar to multiply by.\n     * @description Mulitiply the vector by a single number. Shorthand to call {@link Two.Vector#multiply} directly.\n     */\n    multiplyScalar: function(s) {\n      return this.multiply(s);\n    },\n\n    /**\n     * @name Two.Vector#divide\n     * @function\n     * @param {Two.Vector} v\n     * @returns {Two.Vector} - An instance of itself for the purpose of chaining.\n     * @description Divide an object with x / y component values to the instance.\n     * @overloaded\n     */\n\n    /**\n     * @name Two.Vector#divide\n     * @function\n     * @param {Number} v\n     * @returns {Two.Vector} - An instance of itself for the purpose of chaining.\n     * @description Divide the **same** number to both x / y component values of the instance.\n     * @overloaded\n     */\n\n    /**\n     * @name Two.Vector#divide\n     * @function\n     * @param {Number} x\n     * @param {Number} y\n     * @returns {Two.Vector} - An instance of itself for the purpose of chaining.\n     * @description Divide `x` / `y` values to their respective component value on the instance.\n     * @overloaded\n     */\n    divide: function(x, y) {\n      if (arguments.length <= 0) {\n        return this;\n      } else if (arguments.length <= 1) {\n        if (_.isNumber(x)) {\n          this.x /= x;\n          this.y /= x;\n        } else if (x && _.isNumber(x.x) && _.isNumber(x.y)) {\n          this.x /= x.x;\n          this.y /= x.y;\n        }\n      } else {\n        this.x /= x;\n        this.y /= y;\n      }\n      if (_.isNaN(this.x)) {\n        this.x = 0;\n      }\n      if (_.isNaN(this.y)) {\n        this.y = 0;\n      }\n      return this;\n    },\n\n    /**\n     * @name Two.Vector#divideSelf\n     * @borrows Two.Vector#divide as Two.Vector#divideSelf\n     */\n    divideSelf: function(v) {\n      return this.divide.apply(this, arguments);\n    },\n\n    /**\n     * @name Two.Vector#divideScalar\n     * @function\n     * @param {Number} s - The scalar to divide by.\n     * @description Divide the vector by a single number. Shorthand to call {@link Two.Vector#divide} directly.\n     */\n    divideScalar: function(s) {\n      return this.divide(s);\n    },\n\n    /**\n     * @name Two.Vector#negate\n     * @function\n     * @description Invert each component's sign value.\n     */\n    negate: function() {\n      return this.multiply(-1);\n    },\n\n    /**\n     * @name Two.Vector#negate\n     * @function\n     * @returns {Number}\n     * @description Get the [dot product]{@link https://en.wikipedia.org/wiki/Dot_product} of the vector.\n     */\n    dot: function(v) {\n      return this.x * v.x + this.y * v.y;\n    },\n\n    /**\n     * @name Two.Vector#length\n     * @function\n     * @returns {Number}\n     * @description Get the length of a vector.\n     */\n    length: function() {\n      return Math.sqrt(this.lengthSquared());\n    },\n\n    /**\n     * @name Two.Vector#lengthSquared\n     * @function\n     * @returns {Number}\n     * @description Get the length of the vector to the power of two. Widely used as less expensive than {@link Two.Vector#length}, because it isn't square-rooting any numbers.\n     */\n    lengthSquared: function() {\n      return this.x * this.x + this.y * this.y;\n    },\n\n    /**\n     * @name Two.Vector#normalize\n     * @function\n     * @description Normalize the vector from negative one to one.\n     */\n    normalize: function() {\n      return this.divideScalar(this.length());\n    },\n\n    /**\n     * @name Two.Vector#distanceTo\n     * @function\n     * @returns {Number}\n     * @description Get the distance between two vectors.\n     */\n    distanceTo: function(v) {\n      return Math.sqrt(this.distanceToSquared(v));\n    },\n\n    /**\n     * @name Two.Vector#distanceToSquared\n     * @function\n     * @returns {Number}\n     * @description Get the distance between two vectors to the power of two. Widely used as less expensive than {@link Two.Vector#distanceTo}, because it isn't square-rooting any numbers.\n     */\n    distanceToSquared: function(v) {\n      var dx = this.x - v.x,\n          dy = this.y - v.y;\n      return dx * dx + dy * dy;\n    },\n\n    /**\n     * @name Two.Vector#setLength\n     * @function\n     * @param {Number} l - length to set vector to.\n     * @description Set the length of a vector.\n     */\n    setLength: function(l) {\n      return this.normalize().multiplyScalar(l);\n    },\n\n    /**\n     * @name Two.Vector#equals\n     * @function\n     * @param {Two.Vector} v - The vector to compare against.\n     * @param {Number} [eps=0.0001] - An options epsilon for precision.\n     * @returns {Boolean}\n     * @description Qualify if one vector roughly equal another. With a margin of error defined by epsilon.\n     */\n    equals: function(v, eps) {\n      eps = (typeof eps === 'undefined') ?  0.0001 : eps;\n      return (this.distanceTo(v) < eps);\n    },\n\n    /**\n     * @name Two.Vector#lerp\n     * @function\n     * @param {Two.Vector} v - The destination vector to step towards.\n     * @param {Number} t - The zero to one value of how close the current vector gets to the destination vector.\n     * @description Linear interpolate one vector to another by an amount `t` defined as a zero to one number.\n     * @see [Matt DesLauriers]{@link https://twitter.com/mattdesl/status/1031305279227478016} has a good thread about this.\n     */\n    lerp: function(v, t) {\n      var x = (v.x - this.x) * t + this.x;\n      var y = (v.y - this.y) * t + this.y;\n      return this.set(x, y);\n    },\n\n    /**\n     * @name Two.Vector#isZero\n     * @function\n     * @param {Number} [eps=0.0001] - Optional precision amount to check against.\n     * @returns {Boolean}\n     * @description Check to see if vector is roughly zero, based on the `epsilon` precision value.\n     */\n    isZero: function(eps) {\n      eps = (typeof eps === 'undefined') ?  0.0001 : eps;\n      return (this.length() < eps);\n    },\n\n    /**\n     * @name Two.Vector#toString\n     * @function\n     * @returns {String}\n     * @description Return a comma-separated string of x, y value. Great for storing in a database.\n     */\n    toString: function() {\n      return this.x + ', ' + this.y;\n    },\n\n    /**\n     * @name Two.Vector#toObject\n     * @function\n     * @returns {Object}\n     * @description Return a JSON compatible plain object that represents the vector.\n     */\n    toObject: function() {\n      return { x: this.x, y: this.y };\n    },\n\n    /**\n     * @name Two.Vector#rotate\n     * @function\n     * @param {Radians} radians - The amoun to rotate the vector by.\n     * @description Rotate a vector.\n     */\n    rotate: function(radians) {\n      var cos = Math.cos(radians);\n      var sin = Math.sin(radians);\n      this.x = this.x * cos - this.y * sin;\n      this.y = this.x * sin + this.y * cos;\n      return this;\n    }\n\n  });\n\n  // The same set of prototypical functions, but using the underlying\n  // getter or setter for `x` and `y` values. This set of functions\n  // is used instead of the previously documented ones above when\n  // Two.Vector#bind is invoked and there is event dispatching processed\n  // on x / y property changes.\n  var BoundProto = {\n\n    constructor: Vector,\n\n    set: function(x, y) {\n      this._x = x;\n      this._y = y;\n      return this.trigger(Two.Events.change);\n    },\n\n    copy: function(v) {\n      this._x = v.x;\n      this._y = v.y;\n      return this.trigger(Two.Events.change);\n    },\n\n    clear: function() {\n      this._x = 0;\n      this._y = 0;\n      return this.trigger(Two.Events.change);\n    },\n\n    clone: function() {\n      return new Vector(this._x, this._y);\n    },\n\n    add: function(x, y) {\n      if (arguments.length <= 0) {\n        return this;\n      } else if (arguments.length <= 1) {\n        if (_.isNumber(x)) {\n          this._x += x;\n          this._y += x;\n        }  else if (x && _.isNumber(x.x) && _.isNumber(x.y)) {\n          this._x += x.x;\n          this._y += x.y;\n        }\n      } else {\n        this._x += x;\n        this._y += y;\n      }\n      return this.trigger(Two.Events.change);\n    },\n\n    sub: function(x, y) {\n      if (arguments.length <= 0) {\n        return this;\n      } else if (arguments.length <= 1) {\n        if (_.isNumber(x)) {\n          this._x -= x;\n          this._y -= x;\n        } else if (x && _.isNumber(x.x) && _.isNumber(x.y)) {\n          this._x -= x.x;\n          this._y -= x.y;\n        }\n      } else {\n        this._x -= x;\n        this._y -= y;\n      }\n      return this.trigger(Two.Events.change);\n    },\n\n    multiply: function(x, y) {\n      if (arguments.length <= 0) {\n        return this;\n      } else if (arguments.length <= 1) {\n        if (_.isNumber(x)) {\n          this._x *= x;\n          this._y *= x;\n        } else if (x && _.isNumber(x.x) && _.isNumber(x.y)) {\n          this._x *= x.x;\n          this._y *= x.y;\n        }\n      } else {\n        this._x *= x;\n        this._y *= y;\n      }\n      return this.trigger(Two.Events.change);\n    },\n\n    divide: function(x, y) {\n      if (arguments.length <= 0) {\n        return this;\n      } else if (arguments.length <= 1) {\n        if (_.isNumber(x)) {\n          this._x /= x;\n          this._y /= x;\n        } else if (x && _.isNumber(x.x) && _.isNumber(x.y)) {\n          this._x /= x.x;\n          this._y /= x.y;\n        }\n      } else {\n        this._x /= x;\n        this._y /= y;\n      }\n      if (_.isNaN(this._x)) {\n        this._x = 0;\n      }\n      if (_.isNaN(this._y)) {\n        this._y = 0;\n      }\n      return this.trigger(Two.Events.change);\n    },\n\n    dot: function(v) {\n      return this._x * v.x + this._y * v.y;\n    },\n\n    lengthSquared: function() {\n      return this._x * this._x + this._y * this._y;\n    },\n\n    distanceToSquared: function(v) {\n      var dx = this._x - v.x,\n          dy = this._y - v.y;\n      return dx * dx + dy * dy;\n    },\n\n    lerp: function(v, t) {\n      var x = (v.x - this._x) * t + this._x;\n      var y = (v.y - this._y) * t + this._y;\n      return this.set(x, y);\n    },\n\n    toString: function() {\n      return this._x + ', ' + this._y;\n    },\n\n    toObject: function() {\n      return { x: this._x, y: this._y };\n    },\n\n    rotate: function (radians) {\n      var cos = Math.cos(radians);\n      var sin = Math.sin(radians);\n      this._x = this._x * cos - this._y * sin;\n      this._y = this._x * sin + this._y * cos;\n      return this;\n    }\n\n  };\n\n  var xgs = {\n    enumerable: true,\n    get: function() {\n      return this._x;\n    },\n    set: function(v) {\n      this._x = v;\n      this.trigger(Two.Events.change, 'x');\n    }\n  };\n\n  var ygs = {\n    enumerable: true,\n    get: function() {\n      return this._y;\n    },\n    set: function(v) {\n      this._y = v;\n      this.trigger(Two.Events.change, 'y');\n    }\n  };\n\n  Vector.MakeObservable(Vector.prototype);\n\n})((typeof global !== 'undefined' ? global : (this || window)).Two);\n\n(function(Two) {\n\n  // Localized variables\n  var commands = Two.Commands;\n  var _ = Two.Utils;\n\n  /**\n   * @class\n   * @name Two.Anchor\n   * @param {Number} [x=0] - The x position of the root anchor point.\n   * @param {Number} [y=0] - The y position of the root anchor point.\n   * @param {Number} [lx=0] - The x position of the left handle point.\n   * @param {Number} [ly=0] - The y position of the left handle point.\n   * @param {Number} [rx=0] - The x position of the right handle point.\n   * @param {Number} [ry=0] - The y position of the right handle point.\n   * @param {String} [command=Two.Commands.move] - The command to describe how to render. Applicable commands are {@link Two.Commands}\n   * @extends Two.Vector\n   * @description An object that holds 3 `Two.Vector`s, the anchor point and its corresponding handles: `left` and `right`. In order to properly describe the bezier curve about the point there is also a command property to describe what type of drawing should occur when Two.js renders the anchors.\n   */\n  var Anchor = Two.Anchor = function(x, y, lx, ly, rx, ry, command) {\n\n    Two.Vector.call(this, x, y);\n\n    this._broadcast = _.bind(function() {\n      this.trigger(Two.Events.change);\n    }, this);\n\n    this._command = command || commands.move;\n    this._relative = true;\n\n    var ilx = _.isNumber(lx);\n    var ily = _.isNumber(ly);\n    var irx = _.isNumber(rx);\n    var iry = _.isNumber(ry);\n\n    // Append the `controls` object only if control points are specified,\n    // keeping the Two.Anchor inline with a Two.Vector until it needs to\n    // evolve beyond those functions e.g: a simple 2 component vector.\n    if (ilx || ily || irx || iry) {\n      Two.Anchor.AppendCurveProperties(this);\n    }\n\n    if (ilx) {\n      this.controls.left.x = lx;\n    }\n    if (ily) {\n      this.controls.left.y = ly;\n    }\n    if (irx) {\n      this.controls.right.x = rx;\n    }\n    if (iry) {\n      this.controls.right.y = ry;\n    }\n\n  };\n\n  _.extend(Two.Anchor, {\n\n    /**\n     * @name Two.Anchor.AppendCurveProperties\n     * @function\n     * @param {Two.Anchor} anchor - The instance to append the `control`object to.\n     * @description Adds the `controls` property as an object with `left` and `right` properties to access the bezier control handles that define how the curve is drawn. It also sets the `relative` property to `true` making vectors in the `controls` object relative to their corresponding root anchor point.\n     */\n    AppendCurveProperties: function(anchor) {\n\n      anchor.relative = true;\n\n      /**\n       * @name Two.Anchor#controls\n       * @property {Object} controls\n       * @description An plain object that holds the controls handles for a {@link Two.Anchor}.\n       */\n      anchor.controls = {};\n\n      /**\n       * @name Two.Anchor#controls#left\n       * @property {Two.Vector} left\n       * @description The \"left\" control point to define handles on a bezier curve.\n       */\n      anchor.controls.left = new Two.Vector(0, 0);\n\n      /**\n       * @name Two.Anchor#controls#right\n       * @property {Two.Vector} right\n       * @description The \"left\" control point to define handles on a bezier curve.\n       */\n      anchor.controls.right = new Two.Vector(0, 0);\n\n    },\n\n    /**\n     * @name Two.Anchor.MakeObservable\n     * @function\n     * @param {Object} object - The object to make observable.\n     * @description Convenience function to apply observable qualities of a `Two.Anchor` to any object. Handy if you'd like to extend the `Two.Anchor` class on a custom class.\n     */\n    MakeObservable: function(object) {\n\n      /**\n       * @name Two.Anchor#command\n       * @property {Two.Commands}\n       * @description A draw command associated with the anchor point.\n       */\n      Object.defineProperty(object, 'command', {\n\n        enumerable: true,\n\n        get: function() {\n          return this._command;\n        },\n\n        set: function(c) {\n          this._command = c;\n          if (this._command === commands.curve && !_.isObject(this.controls)) {\n            Anchor.AppendCurveProperties(this);\n          }\n          return this.trigger(Two.Events.change);\n        }\n\n      });\n\n      /**\n       * @name Two.Anchor#relative\n       * @property {Boolean}\n       * @description A boolean to render control points relative to the root anchor point or in global coordinate-space to the rest of the scene.\n       */\n      Object.defineProperty(object, 'relative', {\n\n        enumerable: true,\n\n        get: function() {\n          return this._relative;\n        },\n\n        set: function(b) {\n          if (this._relative == b) {\n            return this;\n          }\n          this._relative = !!b;\n          return this.trigger(Two.Events.change);\n        }\n\n      });\n\n      _.extend(object, Two.Vector.prototype, AnchorProto);\n\n      // Make it possible to bind and still have the Anchor specific\n      // inheritance from Two.Vector. In this case relying on `Two.Vector`\n      // to do much of the heavy event-listener binding / unbinding.\n      object.bind = object.on = function() {\n        var bound = this._bound;\n        Two.Vector.prototype.bind.apply(this, arguments);\n        if (!bound) {\n          _.extend(this, AnchorProto);\n        }\n      };\n\n    }\n\n  });\n\n  var AnchorProto = {\n\n    constructor: Two.Anchor,\n\n    /**\n     * @name Two.Anchor#listen\n     * @function\n     * @description Convenience method used mainly by {@link Two.Path#vertices} to listen and propagate changes from control points up to their respective anchors and further if necessary.\n     */\n    listen: function() {\n\n      if (!_.isObject(this.controls)) {\n        Two.Anchor.AppendCurveProperties(this);\n      }\n\n      this.controls.left.bind(Two.Events.change, this._broadcast);\n      this.controls.right.bind(Two.Events.change, this._broadcast);\n\n      return this;\n\n    },\n\n    /**\n     * @name Two.Anchor#ignore\n     * @function\n     * @description Convenience method used mainly by {@link Two.Path#vertices} to ignore changes from a specific anchor's control points.\n     */\n    ignore: function() {\n\n      this.controls.left.unbind(Two.Events.change, this._broadcast);\n      this.controls.right.unbind(Two.Events.change, this._broadcast);\n\n      return this;\n\n    },\n\n    /**\n     * @name Two.Anchor#copy\n     * @function\n     * @param {Two.Anchor} v - The anchor to apply values to.\n     * @description Copy the properties of one {@link Two.Anchor} onto another.\n     */\n    copy: function(v) {\n\n      this.x = v.x;\n      this.y = v.y;\n\n      if (_.isString(v.command)) {\n        this.command = v.command;\n      }\n      if (_.isObject(v.controls)) {\n        if (!_.isObject(this.controls)) {\n          Two.Anchor.AppendCurveProperties(this);\n        }\n        // TODO: Do we need to listen here?\n        this.controls.left.copy(v.controls.left);\n        this.controls.right.copy(v.controls.right);\n      }\n      if (_.isBoolean(v.relative)) {\n        this.relative = v.relative;\n      }\n\n      // TODO: Hack for `Two.Commands.arc`\n      if (this.command === Two.Commands.arc) {\n        this.rx = v.rx;\n        this.ry = v.ry;\n        this.xAxisRotation = v.xAxisRotation;\n        this.largeArcFlag = v.largeArcFlag;\n        this.sweepFlag = v.sweepFlag;\n      }\n\n      return this;\n\n    },\n\n    /**\n     * @name Two.Anchor#clone\n     * @function\n     * @returns {Two.Anchor}\n     * @description Create a new {@link Two.Anchor}, set all its values to the current instance and return it for use.\n     */\n    clone: function() {\n\n      var controls = this.controls;\n\n      var clone = new Two.Anchor(\n        this.x,\n        this.y,\n        controls && controls.left.x,\n        controls && controls.left.y,\n        controls && controls.right.x,\n        controls && controls.right.y,\n        this.command\n      );\n      clone.relative = this._relative;\n      return clone;\n\n    },\n\n    /**\n     * @name Two.Anchor#toObject\n     * @function\n     * @returns {Object} - An object with properties filled out to mirror {@link Two.Anchor}.\n     * @description Create a JSON compatible plain object of the current instance. Intended for use with storing values in a database.\n     */\n    toObject: function() {\n      var o = {\n        x: this.x,\n        y: this.y\n      };\n      if (this._command) {\n        o.command = this._command;\n      }\n      if (this._relative) {\n        o.relative = this._relative;\n      }\n      if (this.controls) {\n        o.controls = {\n          left: this.controls.left.toObject(),\n          right: this.controls.right.toObject()\n        };\n      }\n      return o;\n    },\n\n    /**\n     * @name Two.Anchor#toString\n     * @function\n     * @returns {String} - A String with comma-separated values reflecting the various values on the current instance.\n     * @description Create a string form of the current instance. Intended for use with storing values in a database. This is lighter to store than the JSON compatible {@link Two.Anchor#toObject}.\n     */\n    toString: function() {\n      if (!this.controls) {\n        return [this._x, this._y].join(', ');\n      }\n      return [this._x, this._y, this.controls.left.x, this.controls.left.y,\n        this.controls.right.x, this.controls.right.y, this._command,\n        this._relative ? 1 : 0].join(', ');\n    }\n\n  };\n\n  Two.Anchor.MakeObservable(Two.Anchor.prototype);\n\n})((typeof global !== 'undefined' ? global : (this || window)).Two);\n\n(function(Two) {\n\n  // Constants\n\n  var cos = Math.cos, sin = Math.sin, tan = Math.tan;\n  var _ = Two.Utils, fix = _.toFixed;\n  var array = [];\n\n  /**\n   * @name Two.Matrix\n   * @class\n   * @param {Number} [a=1] - The value for element at the first column and first row.\n   * @param {Number} [b=0] - The value for element at the second column and first row.\n   * @param {Number} [c=0] - The value for element at the third column and first row.\n   * @param {Number} [d=0] - The value for element at the first column and second row.\n   * @param {Number} [e=1] - The value for element at the second column and second row.\n   * @param {Number} [f=0] - The value for element at the third column and second row.\n   * @param {Number} [g=0] - The value for element at the first column and third row.\n   * @param {Number} [h=0] - The value for element at the second column and third row.\n   * @param {Number} [i=1] - The value for element at the third column and third row.\n   * @description A class to store 3 x 3 transformation matrix information. In addition to storing data `Two.Matrix` has suped up methods for commonplace mathematical operations.\n   * @nota-bene Order is based on how to construct transformation strings for the browser.\n   */\n  var Matrix = Two.Matrix = function(a, b, c, d, e, f) {\n\n    /**\n     * @name Two.Matrix#elements\n     * @property {Array} - The underlying data stored as an array.\n     */\n    this.elements = new Two.Array(9);\n\n    var elements = a;\n    if (!_.isArray(elements)) {\n      elements = _.toArray(arguments);\n    }\n\n    // initialize the elements with default values.\n    this.identity();\n\n    if (elements.length > 0) {\n      this.set(elements);\n    }\n\n  };\n\n  _.extend(Matrix, {\n\n    /**\n     * @name Two.Matrix.Identity\n     * @property {Array} - A stored reference to the default value of a 3 x 3 matrix.\n     */\n    Identity: [\n      1, 0, 0,\n      0, 1, 0,\n      0, 0, 1\n    ],\n\n    /**\n     * @name Two.Matrix.Multiply\n     * @function\n     * @param {Two.Matrix} A\n     * @param {Two.Matrix} B\n     * @param {Two.Matrix} [C] - An optional matrix to apply the multiplication to.\n     * @returns {Two.Matrix} - If an optional `C` matrix isn't passed then a new one is created and returned.\n     * @description Multiply two matrices together and return the result.\n     */\n    Multiply: function(A, B, C) {\n\n      if (B.length <= 3) { // Multiply Vector\n\n        var x, y, z, e = A;\n\n        var a = B[0] || 0,\n            b = B[1] || 0,\n            c = B[2] || 0;\n\n        // Go down rows first\n        // a, d, g, b, e, h, c, f, i\n\n        x = e[0] * a + e[1] * b + e[2] * c;\n        y = e[3] * a + e[4] * b + e[5] * c;\n        z = e[6] * a + e[7] * b + e[8] * c;\n\n        return { x: x, y: y, z: z };\n\n      }\n\n      var A0 = A[0], A1 = A[1], A2 = A[2];\n      var A3 = A[3], A4 = A[4], A5 = A[5];\n      var A6 = A[6], A7 = A[7], A8 = A[8];\n\n      var B0 = B[0], B1 = B[1], B2 = B[2];\n      var B3 = B[3], B4 = B[4], B5 = B[5];\n      var B6 = B[6], B7 = B[7], B8 = B[8];\n\n      C = C || new Two.Array(9);\n\n      C[0] = A0 * B0 + A1 * B3 + A2 * B6;\n      C[1] = A0 * B1 + A1 * B4 + A2 * B7;\n      C[2] = A0 * B2 + A1 * B5 + A2 * B8;\n      C[3] = A3 * B0 + A4 * B3 + A5 * B6;\n      C[4] = A3 * B1 + A4 * B4 + A5 * B7;\n      C[5] = A3 * B2 + A4 * B5 + A5 * B8;\n      C[6] = A6 * B0 + A7 * B3 + A8 * B6;\n      C[7] = A6 * B1 + A7 * B4 + A8 * B7;\n      C[8] = A6 * B2 + A7 * B5 + A8 * B8;\n\n      return C;\n\n    }\n\n  });\n\n  _.extend(Matrix.prototype, Two.Utils.Events, {\n\n    constructor: Matrix,\n\n    /**\n     * @name Two.Matrix#manual\n     * @property {Boolean} - Determines whether Two.js automatically calculates the values for the matrix or if the developer intends to manage the matrix.\n     * @nota-bene - Setting to `true` nullifies {@link Two.Shape#translation}, {@link Two.Shape#rotation}, and {@link Two.Shape#scale}.\n     */\n    manual: false,\n\n    /**\n     * @name Two.Matrix#set\n     * @function\n     * @param {Number} a - The value for element at the first column and first row.\n     * @param {Number} b - The value for element at the second column and first row.\n     * @param {Number} c - The value for element at the third column and first row.\n     * @param {Number} d - The value for element at the first column and second row.\n     * @param {Number} e - The value for element at the second column and second row.\n     * @param {Number} f - The value for element at the third column and second row.\n     * @param {Number} g - The value for element at the first column and third row.\n     * @param {Number} h - The value for element at the second column and third row.\n     * @param {Number} i - The value for element at the third column and third row.\n     * @description Set an array of values onto the matrix. Order described in {@link Two.Matrix}.\n     */\n\n     /**\n      * @name Two.Matrix#set\n      * @function\n      * @param {Number[]} a - The array of elements to apply.\n      * @description Set an array of values onto the matrix. Order described in {@link Two.Matrix}.\n      */\n    set: function(a) {\n\n      var elements = a;\n      if (arguments.length > 1) {\n        elements = _.toArray(arguments);\n      }\n\n      this.elements[0] = elements[0];\n      this.elements[1] = elements[1];\n      this.elements[2] = elements[2];\n      this.elements[3] = elements[3];\n      this.elements[4] = elements[4];\n      this.elements[5] = elements[5];\n      this.elements[6] = elements[6];\n      this.elements[7] = elements[7];\n      this.elements[8] = elements[8];\n\n      return this.trigger(Two.Events.change);\n\n    },\n\n    /**\n     * @name Two.Matrix#identity\n     * @function\n     * @description Turn matrix to the identity, like resetting.\n     */\n    identity: function() {\n\n      this.elements[0] = Matrix.Identity[0];\n      this.elements[1] = Matrix.Identity[1];\n      this.elements[2] = Matrix.Identity[2];\n      this.elements[3] = Matrix.Identity[3];\n      this.elements[4] = Matrix.Identity[4];\n      this.elements[5] = Matrix.Identity[5];\n      this.elements[6] = Matrix.Identity[6];\n      this.elements[7] = Matrix.Identity[7];\n      this.elements[8] = Matrix.Identity[8];\n\n      return this.trigger(Two.Events.change);\n\n    },\n\n    /**\n     * @name Two.Matrix.multiply\n     * @function\n     * @param {Number} a - The scalar to be multiplied.\n     * @description Multiply all components of the matrix against a single scalar value.\n     */\n\n    /**\n     * @name Two.Matrix.multiply\n     * @function\n     * @param {Number} a - The x component to be multiplied.\n     * @param {Number} b - The y component to be multiplied.\n     * @param {Number} c - The z component to be multiplied.\n     * @description Multiply all components of a matrix against a 3 component vector.\n     */\n\n    /**\n     * @name Two.Matrix.multiply\n     * @function\n     * @param {Number} a - The value at the first column and first row of the matrix to be multiplied.\n     * @param {Number} b - The value at the second column and first row of the matrix to be multiplied.\n     * @param {Number} c - The value at the third column and first row of the matrix to be multiplied.\n     * @param {Number} d - The value at the first column and second row of the matrix to be multiplied.\n     * @param {Number} e - The value at the second column and second row of the matrix to be multiplied.\n     * @param {Number} f - The value at the third column and second row of the matrix to be multiplied.\n     * @param {Number} g - The value at the first column and third row of the matrix to be multiplied.\n     * @param {Number} h - The value at the second column and third row of the matrix to be multiplied.\n     * @param {Number} i - The value at the third column and third row of the matrix to be multiplied.\n     * @description Multiply all components of a matrix against another matrix.\n     */\n    multiply: function(a, b, c, d, e, f, g, h, i) {\n\n      var elements = arguments, l = elements.length;\n\n      // Multiply scalar\n\n      if (l <= 1) {\n\n        this.elements[0] *= a;\n        this.elements[1] *= a;\n        this.elements[2] *= a;\n        this.elements[3] *= a;\n        this.elements[4] *= a;\n        this.elements[5] *= a;\n        this.elements[6] *= a;\n        this.elements[7] *= a;\n        this.elements[8] *= a;\n\n        return this.trigger(Two.Events.change);\n\n      }\n\n      if (l <= 3) { // Multiply Vector\n\n        var x, y, z;\n        a = a || 0;\n        b = b || 0;\n        c = c || 0;\n        e = this.elements;\n\n        // Go down rows first\n        // a, d, g, b, e, h, c, f, i\n\n        x = e[0] * a + e[1] * b + e[2] * c;\n        y = e[3] * a + e[4] * b + e[5] * c;\n        z = e[6] * a + e[7] * b + e[8] * c;\n\n        return { x: x, y: y, z: z };\n\n      }\n\n      // Multiple matrix\n\n      var A = this.elements;\n      var B = elements;\n\n      var A0 = A[0], A1 = A[1], A2 = A[2];\n      var A3 = A[3], A4 = A[4], A5 = A[5];\n      var A6 = A[6], A7 = A[7], A8 = A[8];\n\n      var B0 = B[0], B1 = B[1], B2 = B[2];\n      var B3 = B[3], B4 = B[4], B5 = B[5];\n      var B6 = B[6], B7 = B[7], B8 = B[8];\n\n      this.elements[0] = A0 * B0 + A1 * B3 + A2 * B6;\n      this.elements[1] = A0 * B1 + A1 * B4 + A2 * B7;\n      this.elements[2] = A0 * B2 + A1 * B5 + A2 * B8;\n\n      this.elements[3] = A3 * B0 + A4 * B3 + A5 * B6;\n      this.elements[4] = A3 * B1 + A4 * B4 + A5 * B7;\n      this.elements[5] = A3 * B2 + A4 * B5 + A5 * B8;\n\n      this.elements[6] = A6 * B0 + A7 * B3 + A8 * B6;\n      this.elements[7] = A6 * B1 + A7 * B4 + A8 * B7;\n      this.elements[8] = A6 * B2 + A7 * B5 + A8 * B8;\n\n      return this.trigger(Two.Events.change);\n\n    },\n\n    /**\n     * @name Two.Matrix#inverse\n     * @function\n     * @param {Two.Matrix} [out] - The optional matrix to apply the inversion to.\n     * @description Return an inverted version of the matrix. If no optional one is passed a new matrix is created and returned.\n     */\n    inverse: function(out) {\n\n      var a = this.elements;\n      out = out || new Two.Matrix();\n\n      var a00 = a[0], a01 = a[1], a02 = a[2];\n      var a10 = a[3], a11 = a[4], a12 = a[5];\n      var a20 = a[6], a21 = a[7], a22 = a[8];\n\n      var b01 = a22 * a11 - a12 * a21;\n      var b11 = -a22 * a10 + a12 * a20;\n      var b21 = a21 * a10 - a11 * a20;\n\n      // Calculate the determinant\n      var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n      if (!det) {\n        return null;\n      }\n\n      det = 1.0 / det;\n\n      out.elements[0] = b01 * det;\n      out.elements[1] = (-a22 * a01 + a02 * a21) * det;\n      out.elements[2] = (a12 * a01 - a02 * a11) * det;\n      out.elements[3] = b11 * det;\n      out.elements[4] = (a22 * a00 - a02 * a20) * det;\n      out.elements[5] = (-a12 * a00 + a02 * a10) * det;\n      out.elements[6] = b21 * det;\n      out.elements[7] = (-a21 * a00 + a01 * a20) * det;\n      out.elements[8] = (a11 * a00 - a01 * a10) * det;\n\n      return out;\n\n    },\n\n    /**\n     * @name Two.Matrix#scale\n     * @function\n     * @param {Number} scale - The one dimensional scale to apply to the matrix.\n     * @description Uniformly scale the transformation matrix.\n     */\n\n    /**\n     * @name Two.Matrix#scale\n     * @function\n     * @param {Number} sx - The horizontal scale factor.\n     * @param {Number} sy - The vertical scale factor\n     * @description Scale the transformation matrix in two dimensions.\n     */\n    scale: function(sx, sy) {\n\n      var l = arguments.length;\n      if (l <= 1) {\n        sy = sx;\n      }\n\n      return this.multiply(sx, 0, 0, 0, sy, 0, 0, 0, 1);\n\n    },\n\n    /**\n     * @name Two.Matrix#rotate\n     * @function\n     * @param {Radians} radians - The amount to rotate in radians.\n     * @description Rotate the matrix.\n     */\n    rotate: function(radians) {\n\n      var c = cos(radians);\n      var s = sin(radians);\n\n      return this.multiply(c, -s, 0, s, c, 0, 0, 0, 1);\n\n    },\n\n    /**\n     * @name Two.Matrix#translate\n     * @function\n     * @param {Number} x - The horizontal translation value to apply.\n     * @param {Number} y - The vertical translation value to apply.\n     * @description Translate the matrix.\n     */\n    translate: function(x, y) {\n\n      return this.multiply(1, 0, x, 0, 1, y, 0, 0, 1);\n\n    },\n\n    /**\n     * @name Two.Matrix#skewX\n     * @function\n     * @param {Radians} radians - The amount to skew in radians.\n     * @description Skew the matrix by an angle in the x axis direction.\n     */\n    skewX: function(radians) {\n\n      var a = tan(radians);\n\n      return this.multiply(1, a, 0, 0, 1, 0, 0, 0, 1);\n\n    },\n\n    /**\n     * @name Two.Matrix#skewY\n     * @function\n     * @param {Radians} radians - The amount to skew in radians.\n     * @description Skew the matrix by an angle in the y axis direction.\n     */\n    skewY: function(radians) {\n\n      var a = tan(radians);\n\n      return this.multiply(1, 0, 0, a, 1, 0, 0, 0, 1);\n\n    },\n\n    /**\n     * @name Two.Matrix#toString\n     * @function\n     * @param {Boolean} [fullMatrix=false] - Return the full 9 elements of the matrix or just 6 for 2D transformations.\n     * @returns {String} - The transformation matrix as a 6 component string separated by spaces.\n     * @description Create a transform string. Used for the Two.js rendering APIs.\n     */\n    toString: function(fullMatrix) {\n\n      array.length = 0;\n      this.toArray(fullMatrix, array);\n\n      return array.join(' ');\n\n    },\n\n    /**\n     * @name Two.Matrix#toArray\n     * @function\n     * @param {Boolean} [fullMatrix=false] - Return the full 9 elements of the matrix or just 6 for 2D transformations.\n     * @param {Number[]} [output] - An array empty or otherwise to apply the values to.\n     * @description Create a transform array. Used for the Two.js rendering APIs.\n     */\n    toArray: function(fullMatrix, output) {\n\n     var elements = this.elements;\n     var hasOutput = !!output;\n\n     var a = fix(elements[0]);\n     var b = fix(elements[1]);\n     var c = fix(elements[2]);\n     var d = fix(elements[3]);\n     var e = fix(elements[4]);\n     var f = fix(elements[5]);\n\n      if (!!fullMatrix) {\n\n        var g = fix(elements[6]);\n        var h = fix(elements[7]);\n        var i = fix(elements[8]);\n\n        if (hasOutput) {\n          output[0] = a;\n          output[1] = d;\n          output[2] = g;\n          output[3] = b;\n          output[4] = e;\n          output[5] = h;\n          output[6] = c;\n          output[7] = f;\n          output[8] = i;\n          return;\n        }\n\n        return [\n          a, d, g, b, e, h, c, f, i\n        ];\n      }\n\n      if (hasOutput) {\n        output[0] = a;\n        output[1] = d;\n        output[2] = b;\n        output[3] = e;\n        output[4] = c;\n        output[5] = f;\n        return;\n      }\n\n      return [\n        a, d, b, e, c, f  // Specific format see LN:19\n      ];\n\n    },\n\n    /**\n     * @name Two.Matrix#clone\n     * @function\n     * @description Clone the current matrix.\n     */\n    clone: function() {\n      var a, b, c, d, e, f, g, h, i;\n\n      a = this.elements[0];\n      b = this.elements[1];\n      c = this.elements[2];\n      d = this.elements[3];\n      e = this.elements[4];\n      f = this.elements[5];\n      g = this.elements[6];\n      h = this.elements[7];\n      i = this.elements[8];\n\n      var matrix = new Two.Matrix(a, b, c, d, e, f, g, h, i);\n      matrix.manual = this.manual;\n\n      return matrix;\n\n    }\n\n  });\n\n})((typeof global !== 'undefined' ? global : (this || window)).Two);\n\n(function(Two) {\n\n  // Localize variables\n  var mod = Two.Utils.mod, toFixed = Two.Utils.toFixed;\n  var _ = Two.Utils;\n\n  var svg = {\n\n    version: 1.1,\n\n    ns: 'http://www.w3.org/2000/svg',\n    xlink: 'http://www.w3.org/1999/xlink',\n\n    alignments: {\n      left: 'start',\n      center: 'middle',\n      right: 'end'\n    },\n\n    /**\n     * Create an svg namespaced element.\n     */\n    createElement: function(name, attrs) {\n      var tag = name;\n      var elem = document.createElementNS(svg.ns, tag);\n      if (tag === 'svg') {\n        attrs = _.defaults(attrs || {}, {\n          version: svg.version\n        });\n      }\n      if (!_.isEmpty(attrs)) {\n        svg.setAttributes(elem, attrs);\n      }\n      return elem;\n    },\n\n    /**\n     * Add attributes from an svg element.\n     */\n    setAttributes: function(elem, attrs) {\n      var keys = Object.keys(attrs);\n      for (var i = 0; i < keys.length; i++) {\n        if (/href/.test(keys[i])) {\n          elem.setAttributeNS(svg.xlink, keys[i], attrs[keys[i]]);\n        } else {\n          elem.setAttribute(keys[i], attrs[keys[i]]);\n        }\n      }\n      return this;\n    },\n\n    /**\n     * Remove attributes from an svg element.\n     */\n    removeAttributes: function(elem, attrs) {\n      for (var key in attrs) {\n        elem.removeAttribute(key);\n      }\n      return this;\n    },\n\n    /**\n     * Turn a set of vertices into a string for the d property of a path\n     * element. It is imperative that the string collation is as fast as\n     * possible, because this call will be happening multiple times a\n     * second.\n     */\n    toString: function(points, closed) {\n\n      var l = points.length,\n        last = l - 1,\n        d, // The elusive last Two.Commands.move point\n        string = '';\n\n      for (var i = 0; i < l; i++) {\n        var b = points[i];\n        var command;\n        var prev = closed ? mod(i - 1, l) : Math.max(i - 1, 0);\n        var next = closed ? mod(i + 1, l) : Math.min(i + 1, last);\n\n        var a = points[prev];\n        var c = points[next];\n\n        var vx, vy, ux, uy, ar, bl, br, cl;\n        var rx, ry, xAxisRotation, largeArcFlag, sweepFlag;\n\n        // Access x and y directly,\n        // bypassing the getter\n        var x = toFixed(b.x);\n        var y = toFixed(b.y);\n\n        switch (b.command) {\n\n          case Two.Commands.close:\n            command = Two.Commands.close;\n            break;\n\n          case Two.Commands.arc:\n\n            rx = b.rx;\n            ry = b.ry;\n            xAxisRotation = b.xAxisRotation;\n            largeArcFlag = b.largeArcFlag;\n            sweepFlag = b.sweepFlag;\n\n            command = Two.Commands.arc + ' ' + rx + ' ' + ry + ' '\n              + xAxisRotation + ' ' + largeArcFlag + ' ' + sweepFlag + ' '\n              + x + ' ' + y;\n            break;\n\n          case Two.Commands.curve:\n\n            ar = (a.controls && a.controls.right) || Two.Vector.zero;\n            bl = (b.controls && b.controls.left) || Two.Vector.zero;\n\n            if (a.relative) {\n              vx = toFixed((ar.x + a.x));\n              vy = toFixed((ar.y + a.y));\n            } else {\n              vx = toFixed(ar.x);\n              vy = toFixed(ar.y);\n            }\n\n            if (b.relative) {\n              ux = toFixed((bl.x + b.x));\n              uy = toFixed((bl.y + b.y));\n            } else {\n              ux = toFixed(bl.x);\n              uy = toFixed(bl.y);\n            }\n\n            command = ((i === 0) ? Two.Commands.move : Two.Commands.curve) +\n              ' ' + vx + ' ' + vy + ' ' + ux + ' ' + uy + ' ' + x + ' ' + y;\n            break;\n\n          case Two.Commands.move:\n            d = b;\n            command = Two.Commands.move + ' ' + x + ' ' + y;\n            break;\n\n          default:\n            command = b.command + ' ' + x + ' ' + y;\n\n        }\n\n        // Add a final point and close it off\n\n        if (i >= last && closed) {\n\n          if (b.command === Two.Commands.curve) {\n\n            // Make sure we close to the most previous Two.Commands.move\n            c = d;\n\n            br = (b.controls && b.controls.right) || b;\n            cl = (c.controls && c.controls.left) || c;\n\n            if (b.relative) {\n              vx = toFixed((br.x + b.x));\n              vy = toFixed((br.y + b.y));\n            } else {\n              vx = toFixed(br.x);\n              vy = toFixed(br.y);\n            }\n\n            if (c.relative) {\n              ux = toFixed((cl.x + c.x));\n              uy = toFixed((cl.y + c.y));\n            } else {\n              ux = toFixed(cl.x);\n              uy = toFixed(cl.y);\n            }\n\n            x = toFixed(c.x);\n            y = toFixed(c.y);\n\n            command +=\n              ' C ' + vx + ' ' + vy + ' ' + ux + ' ' + uy + ' ' + x + ' ' + y;\n\n          }\n\n          if (b.command !== Two.Commands.close) {\n            command += ' Z';\n          }\n\n        }\n\n        string += command + ' ';\n\n      }\n\n      return string;\n\n    },\n\n    getClip: function(shape) {\n\n      var clip = shape._renderer.clip;\n\n      if (!clip) {\n\n        var root = shape;\n\n        while (root.parent) {\n          root = root.parent;\n        }\n\n        clip = shape._renderer.clip = svg.createElement('clipPath');\n        root.defs.appendChild(clip);\n\n      }\n\n      return clip;\n\n    },\n\n    group: {\n\n      // TODO: Can speed up.\n      // TODO: How does this effect a f\n      appendChild: function(object) {\n\n        var elem = object._renderer.elem;\n\n        if (!elem) {\n          return;\n        }\n\n        var tag = elem.nodeName;\n\n        if (!tag || /(radial|linear)gradient/i.test(tag) || object._clip) {\n          return;\n        }\n\n        this.elem.appendChild(elem);\n\n      },\n\n      removeChild: function(object) {\n\n        var elem = object._renderer.elem;\n\n        if (!elem || elem.parentNode != this.elem) {\n          return;\n        }\n\n        var tag = elem.nodeName;\n\n        if (!tag) {\n          return;\n        }\n\n        // Defer subtractions while clipping.\n        if (object._clip) {\n          return;\n        }\n\n        this.elem.removeChild(elem);\n\n      },\n\n      orderChild: function(object) {\n        this.elem.appendChild(object._renderer.elem);\n      },\n\n      renderChild: function(child) {\n        svg[child._renderer.type].render.call(child, this);\n      },\n\n      render: function(domElement) {\n\n        this._update();\n\n        // Shortcut for hidden objects.\n        // Doesn't reset the flags, so changes are stored and\n        // applied once the object is visible again\n        if (this._opacity === 0 && !this._flagOpacity) {\n          return this;\n        }\n\n        if (!this._renderer.elem) {\n          this._renderer.elem = svg.createElement('g', {\n            id: this.id\n          });\n          domElement.appendChild(this._renderer.elem);\n        }\n\n        // _Update styles for the <g>\n        var flagMatrix = this._matrix.manual || this._flagMatrix;\n        var context = {\n          domElement: domElement,\n          elem: this._renderer.elem\n        };\n\n        if (flagMatrix) {\n          this._renderer.elem.setAttribute('transform', 'matrix(' + this._matrix.toString() + ')');\n        }\n\n        for (var i = 0; i < this.children.length; i++) {\n          var child = this.children[i];\n          svg[child._renderer.type].render.call(child, domElement);\n        }\n\n        if (this._flagOpacity) {\n          this._renderer.elem.setAttribute('opacity', this._opacity);\n        }\n\n        if (this._flagClassName) {\n          this._renderer.elem.setAttribute('class', this._className);\n        }\n\n        if (this._flagAdditions) {\n          this.additions.forEach(svg.group.appendChild, context);\n        }\n\n        if (this._flagSubtractions) {\n          this.subtractions.forEach(svg.group.removeChild, context);\n        }\n\n        if (this._flagOrder) {\n          this.children.forEach(svg.group.orderChild, context);\n        }\n\n        /**\n         * Commented two-way functionality of clips / masks with groups and\n         * polygons. Uncomment when this bug is fixed:\n         * https://code.google.com/p/chromium/issues/detail?id=370951\n         */\n\n        // if (this._flagClip) {\n\n        //   clip = svg.getClip(this);\n        //   elem = this._renderer.elem;\n\n        //   if (this._clip) {\n        //     elem.removeAttribute('id');\n        //     clip.setAttribute('id', this.id);\n        //     clip.appendChild(elem);\n        //   } else {\n        //     clip.removeAttribute('id');\n        //     elem.setAttribute('id', this.id);\n        //     this.parent._renderer.elem.appendChild(elem); // TODO: should be insertBefore\n        //   }\n\n        // }\n\n        if (this._flagMask) {\n          if (this._mask) {\n            this._renderer.elem.setAttribute('clip-path', 'url(#' + this._mask.id + ')');\n          } else {\n            this._renderer.elem.removeAttribute('clip-path');\n          }\n        }\n\n        return this.flagReset();\n\n      }\n\n    },\n\n    path: {\n\n      render: function(domElement) {\n\n        this._update();\n\n        // Shortcut for hidden objects.\n        // Doesn't reset the flags, so changes are stored and\n        // applied once the object is visible again\n        if (this._opacity === 0 && !this._flagOpacity) {\n          return this;\n        }\n\n        // Collect any attribute that needs to be changed here\n        var changed = {};\n\n        var flagMatrix = this._matrix.manual || this._flagMatrix;\n\n        if (flagMatrix) {\n          changed.transform = 'matrix(' + this._matrix.toString() + ')';\n        }\n\n        if (this._flagVertices) {\n          var vertices = svg.toString(this._renderer.vertices, this._closed);\n          changed.d = vertices;\n        }\n\n        if (this._fill && this._fill._renderer) {\n          this._fill._update();\n          svg[this._fill._renderer.type].render.call(this._fill, domElement, true);\n        }\n\n        if (this._flagFill) {\n          changed.fill = this._fill && this._fill.id\n            ? 'url(#' + this._fill.id + ')' : this._fill;\n        }\n\n        if (this._stroke && this._stroke._renderer) {\n          this._stroke._update();\n          svg[this._stroke._renderer.type].render.call(this._stroke, domElement, true);\n        }\n\n        if (this._flagStroke) {\n          changed.stroke = this._stroke && this._stroke.id\n            ? 'url(#' + this._stroke.id + ')' : this._stroke;\n        }\n\n        if (this._flagLinewidth) {\n          changed['stroke-width'] = this._linewidth;\n        }\n\n        if (this._flagOpacity) {\n          changed['stroke-opacity'] = this._opacity;\n          changed['fill-opacity'] = this._opacity;\n        }\n\n        if (this._flagClassName) {\n          changed['class'] = this._className;\n        }\n\n        if (this._flagVisible) {\n          changed.visibility = this._visible ? 'visible' : 'hidden';\n        }\n\n        if (this._flagCap) {\n          changed['stroke-linecap'] = this._cap;\n        }\n\n        if (this._flagJoin) {\n          changed['stroke-linejoin'] = this._join;\n        }\n\n        if (this._flagMiter) {\n          changed['stroke-miterlimit'] = this._miter;\n        }\n\n        if (this.dashes && this.dashes.length > 0) {\n          changed['stroke-dasharray'] = this.dashes.join(' ');\n        }\n\n        // If there is no attached DOM element yet,\n        // create it with all necessary attributes.\n        if (!this._renderer.elem) {\n\n          changed.id = this.id;\n          this._renderer.elem = svg.createElement('path', changed);\n          domElement.appendChild(this._renderer.elem);\n\n        // Otherwise apply all pending attributes\n        } else {\n          svg.setAttributes(this._renderer.elem, changed);\n        }\n\n        if (this._flagClip) {\n\n          var clip = svg.getClip(this);\n          var elem = this._renderer.elem;\n\n          if (this._clip) {\n            elem.removeAttribute('id');\n            clip.setAttribute('id', this.id);\n            clip.appendChild(elem);\n          } else {\n            clip.removeAttribute('id');\n            elem.setAttribute('id', this.id);\n            this.parent._renderer.elem.appendChild(elem); // TODO: should be insertBefore\n          }\n\n        }\n\n        /**\n         * Commented two-way functionality of clips / masks with groups and\n         * polygons. Uncomment when this bug is fixed:\n         * https://code.google.com/p/chromium/issues/detail?id=370951\n         */\n\n        // if (this._flagMask) {\n        //   if (this._mask) {\n        //     elem.setAttribute('clip-path', 'url(#' + this._mask.id + ')');\n        //   } else {\n        //     elem.removeAttribute('clip-path');\n        //   }\n        // }\n\n        return this.flagReset();\n\n      }\n\n    },\n\n    text: {\n\n      render: function(domElement) {\n\n        this._update();\n\n        var changed = {};\n\n        var flagMatrix = this._matrix.manual || this._flagMatrix;\n\n        if (flagMatrix) {\n          changed.transform = 'matrix(' + this._matrix.toString() + ')';\n        }\n\n        if (this._flagFamily) {\n          changed['font-family'] = this._family;\n        }\n        if (this._flagSize) {\n          changed['font-size'] = this._size;\n        }\n        if (this._flagLeading) {\n          changed['line-height'] = this._leading;\n        }\n        if (this._flagAlignment) {\n          changed['text-anchor'] = svg.alignments[this._alignment] || this._alignment;\n        }\n        if (this._flagBaseline) {\n          changed['alignment-baseline'] = changed['dominant-baseline'] = this._baseline;\n        }\n        if (this._flagStyle) {\n          changed['font-style'] = this._style;\n        }\n        if (this._flagWeight) {\n          changed['font-weight'] = this._weight;\n        }\n        if (this._flagDecoration) {\n          changed['text-decoration'] = this._decoration;\n        }\n        if (this._fill && this._fill._renderer) {\n          this._fill._update();\n          svg[this._fill._renderer.type].render.call(this._fill, domElement, true);\n        }\n        if (this._flagFill) {\n          changed.fill = this._fill && this._fill.id\n            ? 'url(#' + this._fill.id + ')' : this._fill;\n        }\n        if (this._stroke && this._stroke._renderer) {\n          this._stroke._update();\n          svg[this._stroke._renderer.type].render.call(this._stroke, domElement, true);\n        }\n        if (this._flagStroke) {\n          changed.stroke = this._stroke && this._stroke.id\n            ? 'url(#' + this._stroke.id + ')' : this._stroke;\n        }\n        if (this._flagLinewidth) {\n          changed['stroke-width'] = this._linewidth;\n        }\n        if (this._flagOpacity) {\n          changed.opacity = this._opacity;\n        }\n        if (this._flagClassName) {\n          changed['class'] = this._className;\n        }\n        if (this._flagVisible) {\n          changed.visibility = this._visible ? 'visible' : 'hidden';\n        }\n        if (this.dashes && this.dashes.length > 0) {\n          changed['stroke-dasharray'] = this.dashes.join(' ');\n        }\n\n        if (!this._renderer.elem) {\n\n          changed.id = this.id;\n\n          this._renderer.elem = svg.createElement('text', changed);\n          domElement.defs.appendChild(this._renderer.elem);\n\n        } else {\n\n          svg.setAttributes(this._renderer.elem, changed);\n\n        }\n\n        if (this._flagClip) {\n\n          var clip = svg.getClip(this);\n          var elem = this._renderer.elem;\n\n          if (this._clip) {\n            elem.removeAttribute('id');\n            clip.setAttribute('id', this.id);\n            clip.appendChild(elem);\n          } else {\n            clip.removeAttribute('id');\n            elem.setAttribute('id', this.id);\n            this.parent._renderer.elem.appendChild(elem); // TODO: should be insertBefore\n          }\n\n        }\n\n        if (this._flagValue) {\n          this._renderer.elem.textContent = this._value;\n        }\n\n        return this.flagReset();\n\n      }\n\n    },\n\n    'linear-gradient': {\n\n      render: function(domElement, silent) {\n\n        if (!silent) {\n          this._update();\n        }\n\n        var changed = {};\n\n        if (this._flagEndPoints) {\n          changed.x1 = this.left._x;\n          changed.y1 = this.left._y;\n          changed.x2 = this.right._x;\n          changed.y2 = this.right._y;\n        }\n\n        if (this._flagSpread) {\n          changed.spreadMethod = this._spread;\n        }\n\n        // If there is no attached DOM element yet,\n        // create it with all necessary attributes.\n        if (!this._renderer.elem) {\n\n          changed.id = this.id;\n          changed.gradientUnits = 'userSpaceOnUse';\n          this._renderer.elem = svg.createElement('linearGradient', changed);\n          domElement.defs.appendChild(this._renderer.elem);\n\n        // Otherwise apply all pending attributes\n        } else {\n\n          svg.setAttributes(this._renderer.elem, changed);\n\n        }\n\n        if (this._flagStops) {\n\n          var lengthChanged = this._renderer.elem.childNodes.length\n            !== this.stops.length;\n\n          if (lengthChanged) {\n            this._renderer.elem.childNodes.length = 0;\n          }\n\n          for (var i = 0; i < this.stops.length; i++) {\n\n            var stop = this.stops[i];\n            var attrs = {};\n\n            if (stop._flagOffset) {\n              attrs.offset = 100 * stop._offset + '%';\n            }\n            if (stop._flagColor) {\n              attrs['stop-color'] = stop._color;\n            }\n            if (stop._flagOpacity) {\n              attrs['stop-opacity'] = stop._opacity;\n            }\n\n            if (!stop._renderer.elem) {\n              stop._renderer.elem = svg.createElement('stop', attrs);\n            } else {\n              svg.setAttributes(stop._renderer.elem, attrs);\n            }\n\n            if (lengthChanged) {\n              this._renderer.elem.appendChild(stop._renderer.elem);\n            }\n            stop.flagReset();\n\n          }\n\n        }\n\n        return this.flagReset();\n\n      }\n\n    },\n\n    'radial-gradient': {\n\n      render: function(domElement, silent) {\n\n        if (!silent) {\n          this._update();\n        }\n\n        var changed = {};\n\n        if (this._flagCenter) {\n          changed.cx = this.center._x;\n          changed.cy = this.center._y;\n        }\n        if (this._flagFocal) {\n          changed.fx = this.focal._x;\n          changed.fy = this.focal._y;\n        }\n\n        if (this._flagRadius) {\n          changed.r = this._radius;\n        }\n\n        if (this._flagSpread) {\n          changed.spreadMethod = this._spread;\n        }\n\n        // If there is no attached DOM element yet,\n        // create it with all necessary attributes.\n        if (!this._renderer.elem) {\n\n          changed.id = this.id;\n          changed.gradientUnits = 'userSpaceOnUse';\n          this._renderer.elem = svg.createElement('radialGradient', changed);\n          domElement.defs.appendChild(this._renderer.elem);\n\n        // Otherwise apply all pending attributes\n        } else {\n\n          svg.setAttributes(this._renderer.elem, changed);\n\n        }\n\n        if (this._flagStops) {\n\n          var lengthChanged = this._renderer.elem.childNodes.length\n            !== this.stops.length;\n\n          if (lengthChanged) {\n            this._renderer.elem.childNodes.length = 0;\n          }\n\n          for (var i = 0; i < this.stops.length; i++) {\n\n            var stop = this.stops[i];\n            var attrs = {};\n\n            if (stop._flagOffset) {\n              attrs.offset = 100 * stop._offset + '%';\n            }\n            if (stop._flagColor) {\n              attrs['stop-color'] = stop._color;\n            }\n            if (stop._flagOpacity) {\n              attrs['stop-opacity'] = stop._opacity;\n            }\n\n            if (!stop._renderer.elem) {\n              stop._renderer.elem = svg.createElement('stop', attrs);\n            } else {\n              svg.setAttributes(stop._renderer.elem, attrs);\n            }\n\n            if (lengthChanged) {\n              this._renderer.elem.appendChild(stop._renderer.elem);\n            }\n            stop.flagReset();\n\n          }\n\n        }\n\n        return this.flagReset();\n\n      }\n\n    },\n\n    texture: {\n\n      render: function(domElement, silent) {\n\n        if (!silent) {\n          this._update();\n        }\n\n        var changed = {};\n        var styles = { x: 0, y: 0 };\n        var image = this.image;\n\n        if (this._flagLoaded && this.loaded) {\n\n          switch (image.nodeName.toLowerCase()) {\n\n            case 'canvas':\n              styles.href = styles['xlink:href'] = image.toDataURL('image/png');\n              break;\n            case 'img':\n            case 'image':\n              styles.href = styles['xlink:href'] = this.src;\n              break;\n\n          }\n\n        }\n\n        if (this._flagOffset || this._flagLoaded || this._flagScale) {\n\n          changed.x = this._offset.x;\n          changed.y = this._offset.y;\n\n          if (image) {\n\n            changed.x -= image.width / 2;\n            changed.y -= image.height / 2;\n\n            if (this._scale instanceof Two.Vector) {\n              changed.x *= this._scale.x;\n              changed.y *= this._scale.y;\n            } else {\n              changed.x *= this._scale;\n              changed.y *= this._scale;\n            }\n          }\n\n          if (changed.x > 0) {\n            changed.x *= - 1;\n          }\n          if (changed.y > 0) {\n            changed.y *= - 1;\n          }\n\n        }\n\n        if (this._flagScale || this._flagLoaded || this._flagRepeat) {\n\n          changed.width = 0;\n          changed.height = 0;\n\n          if (image) {\n\n            styles.width = changed.width = image.width;\n            styles.height = changed.height = image.height;\n\n            // TODO: Hack / Bandaid\n            switch (this._repeat) {\n              case 'no-repeat':\n                changed.width += 1;\n                changed.height += 1;\n                break;\n            }\n\n            if (this._scale instanceof Two.Vector) {\n              changed.width *= this._scale.x;\n              changed.height *= this._scale.y;\n            } else {\n              changed.width *= this._scale;\n              changed.height *= this._scale;\n            }\n          }\n\n        }\n\n        if (this._flagScale || this._flagLoaded) {\n          if (!this._renderer.image) {\n            this._renderer.image = svg.createElement('image', styles);\n          } else if (!_.isEmpty(styles)) {\n            svg.setAttributes(this._renderer.image, styles);\n          }\n        }\n\n        if (!this._renderer.elem) {\n\n          changed.id = this.id;\n          changed.patternUnits = 'userSpaceOnUse';\n          this._renderer.elem = svg.createElement('pattern', changed);\n          domElement.defs.appendChild(this._renderer.elem);\n\n        } else if (!_.isEmpty(changed)) {\n\n          svg.setAttributes(this._renderer.elem, changed);\n\n        }\n\n        if (this._renderer.elem && this._renderer.image && !this._renderer.appended) {\n          this._renderer.elem.appendChild(this._renderer.image);\n          this._renderer.appended = true;\n        }\n\n        return this.flagReset();\n\n      }\n\n    }\n\n  };\n\n  /**\n   * @class\n   */\n  var Renderer = Two[Two.Types.svg] = function(params) {\n\n    this.domElement = params.domElement || svg.createElement('svg');\n\n    this.scene = new Two.Group();\n    this.scene.parent = this;\n\n    this.defs = svg.createElement('defs');\n    this.domElement.appendChild(this.defs);\n    this.domElement.defs = this.defs;\n    this.domElement.style.overflow = 'hidden';\n\n  };\n\n  _.extend(Renderer, {\n\n    Utils: svg\n\n  });\n\n  _.extend(Renderer.prototype, Two.Utils.Events, {\n\n    constructor: Renderer,\n\n    setSize: function(width, height) {\n\n      this.width = width;\n      this.height = height;\n\n      svg.setAttributes(this.domElement, {\n        width: width,\n        height: height\n      });\n\n      return this.trigger(Two.Events.resize, width, height);\n\n    },\n\n    render: function() {\n\n      svg.group.render.call(this.scene, this.domElement);\n\n      return this;\n\n    }\n\n  });\n\n})((typeof global !== 'undefined' ? global : (this || window)).Two);\n\n(function(Two) {\n\n  /**\n   * Constants\n   */\n  var mod = Two.Utils.mod, toFixed = Two.Utils.toFixed;\n  var getRatio = Two.Utils.getRatio;\n  var _ = Two.Utils;\n  var emptyArray = [];\n  var TWO_PI = Math.PI * 2,\n    max = Math.max,\n    min = Math.min,\n    abs = Math.abs,\n    sin = Math.sin,\n    cos = Math.cos,\n    acos = Math.acos,\n    sqrt = Math.sqrt;\n\n  // Returns true if this is a non-transforming matrix\n  var isDefaultMatrix = function (m) {\n    return (m[0] == 1 && m[3] == 0 && m[1] == 0 && m[4] == 1 && m[2] == 0 && m[5] == 0);\n  };\n\n  var canvas = {\n\n    isHidden: /(none|transparent)/i,\n\n    alignments: {\n      left: 'start',\n      middle: 'center',\n      right: 'end'\n    },\n\n    shim: function(elem, name) {\n      elem.tagName = elem.nodeName = name || 'canvas';\n      elem.nodeType = 1;\n      elem.getAttribute = function(prop) {\n        return this[prop];\n      };\n      elem.setAttribute = function(prop, val) {\n        this[prop] = val;\n        return this;\n      };\n      return elem;\n    },\n\n    group: {\n\n      renderChild: function(child) {\n        canvas[child._renderer.type].render.call(child, this.ctx, true, this.clip);\n      },\n\n      render: function(ctx) {\n\n        // TODO: Add a check here to only invoke _update if need be.\n        this._update();\n\n        var matrix = this._matrix.elements;\n        var parent = this.parent;\n        this._renderer.opacity = this._opacity * (parent && parent._renderer ? parent._renderer.opacity : 1);\n\n        var defaultMatrix = isDefaultMatrix(matrix);\n\n        var mask = this._mask;\n        // var clip = this._clip;\n\n        if (!this._renderer.context) {\n          this._renderer.context = {};\n        }\n\n        this._renderer.context.ctx = ctx;\n        // this._renderer.context.clip = clip;\n\n        if (!defaultMatrix) {\n          ctx.save();\n          ctx.transform(matrix[0], matrix[3], matrix[1], matrix[4], matrix[2], matrix[5]);\n        }\n\n        if (mask) {\n          canvas[mask._renderer.type].render.call(mask, ctx, true);\n        }\n\n        if (this.opacity > 0 && this.scale !== 0) {\n          for (var i = 0; i < this.children.length; i++) {\n            var child = this.children[i];\n            canvas[child._renderer.type].render.call(child, ctx);\n          }\n        }\n\n        if (!defaultMatrix) {\n          ctx.restore();\n        }\n\n       /**\n         * Commented two-way functionality of clips / masks with groups and\n         * polygons. Uncomment when this bug is fixed:\n         * https://code.google.com/p/chromium/issues/detail?id=370951\n         */\n\n        // if (clip) {\n        //   ctx.clip();\n        // }\n\n        return this.flagReset();\n\n      }\n\n    },\n\n    path: {\n\n      render: function(ctx, forced, parentClipped) {\n\n        var matrix, stroke, linewidth, fill, opacity, visible, cap, join, miter,\n            closed, commands, length, last, next, prev, a, b, c, d, ux, uy, vx, vy,\n            ar, bl, br, cl, x, y, mask, clip, defaultMatrix, isOffset, dashes;\n\n        // TODO: Add a check here to only invoke _update if need be.\n        this._update();\n\n        matrix = this._matrix.elements;\n        stroke = this._stroke;\n        linewidth = this._linewidth;\n        fill = this._fill;\n        opacity = this._opacity * this.parent._renderer.opacity;\n        visible = this._visible;\n        cap = this._cap;\n        join = this._join;\n        miter = this._miter;\n        closed = this._closed;\n        commands = this._renderer.vertices; // Commands\n        length = commands.length;\n        last = length - 1;\n        defaultMatrix = isDefaultMatrix(matrix);\n        dashes = this.dashes;\n\n        // mask = this._mask;\n        clip = this._clip;\n\n        if (!forced && (!visible || clip)) {\n          return this;\n        }\n\n        // Transform\n        if (!defaultMatrix) {\n          ctx.save();\n          ctx.transform(matrix[0], matrix[3], matrix[1], matrix[4], matrix[2], matrix[5]);\n        }\n\n       /**\n         * Commented two-way functionality of clips / masks with groups and\n         * polygons. Uncomment when this bug is fixed:\n         * https://code.google.com/p/chromium/issues/detail?id=370951\n         */\n\n        // if (mask) {\n        //   canvas[mask._renderer.type].render.call(mask, ctx, true);\n        // }\n\n        // Styles\n        if (fill) {\n          if (_.isString(fill)) {\n            ctx.fillStyle = fill;\n          } else {\n            canvas[fill._renderer.type].render.call(fill, ctx);\n            ctx.fillStyle = fill._renderer.effect;\n          }\n        }\n        if (stroke) {\n          if (_.isString(stroke)) {\n            ctx.strokeStyle = stroke;\n          } else {\n            canvas[stroke._renderer.type].render.call(stroke, ctx);\n            ctx.strokeStyle = stroke._renderer.effect;\n          }\n        }\n        if (linewidth) {\n          ctx.lineWidth = linewidth;\n        }\n        if (miter) {\n          ctx.miterLimit = miter;\n        }\n        if (join) {\n          ctx.lineJoin = join;\n        }\n        if (cap) {\n          ctx.lineCap = cap;\n        }\n        if (_.isNumber(opacity)) {\n          ctx.globalAlpha = opacity;\n        }\n\n        if (dashes && dashes.length > 0) {\n          ctx.setLineDash(dashes);\n        }\n\n        ctx.beginPath();\n\n        for (var i = 0; i < commands.length; i++) {\n\n          b = commands[i];\n\n          x = toFixed(b.x);\n          y = toFixed(b.y);\n\n          switch (b.command) {\n\n            case Two.Commands.close:\n              ctx.closePath();\n              break;\n\n            case Two.Commands.arc:\n\n              var rx = b.rx;\n              var ry = b.ry;\n              var xAxisRotation = b.xAxisRotation;\n              var largeArcFlag = b.largeArcFlag;\n              var sweepFlag = b.sweepFlag;\n\n              prev = closed ? mod(i - 1, length) : max(i - 1, 0);\n              a = commands[prev];\n\n              var ax = toFixed(a.x);\n              var ay = toFixed(a.y);\n\n              canvas.renderSvgArcCommand(ctx, ax, ay, rx, ry, largeArcFlag, sweepFlag, xAxisRotation, x, y);\n              break;\n\n            case Two.Commands.curve:\n\n              prev = closed ? mod(i - 1, length) : Math.max(i - 1, 0);\n              next = closed ? mod(i + 1, length) : Math.min(i + 1, last);\n\n              a = commands[prev];\n              c = commands[next];\n              ar = (a.controls && a.controls.right) || Two.Vector.zero;\n              bl = (b.controls && b.controls.left) || Two.Vector.zero;\n\n              if (a._relative) {\n                vx = (ar.x + toFixed(a.x));\n                vy = (ar.y + toFixed(a.y));\n              } else {\n                vx = toFixed(ar.x);\n                vy = toFixed(ar.y);\n              }\n\n              if (b._relative) {\n                ux = (bl.x + toFixed(b.x));\n                uy = (bl.y + toFixed(b.y));\n              } else {\n                ux = toFixed(bl.x);\n                uy = toFixed(bl.y);\n              }\n\n              ctx.bezierCurveTo(vx, vy, ux, uy, x, y);\n\n              if (i >= last && closed) {\n\n                c = d;\n\n                br = (b.controls && b.controls.right) || Two.Vector.zero;\n                cl = (c.controls && c.controls.left) || Two.Vector.zero;\n\n                if (b._relative) {\n                  vx = (br.x + toFixed(b.x));\n                  vy = (br.y + toFixed(b.y));\n                } else {\n                  vx = toFixed(br.x);\n                  vy = toFixed(br.y);\n                }\n\n                if (c._relative) {\n                  ux = (cl.x + toFixed(c.x));\n                  uy = (cl.y + toFixed(c.y));\n                } else {\n                  ux = toFixed(cl.x);\n                  uy = toFixed(cl.y);\n                }\n\n                x = toFixed(c.x);\n                y = toFixed(c.y);\n\n                ctx.bezierCurveTo(vx, vy, ux, uy, x, y);\n\n              }\n\n              break;\n\n            case Two.Commands.line:\n              ctx.lineTo(x, y);\n              break;\n\n            case Two.Commands.move:\n              d = b;\n              ctx.moveTo(x, y);\n              break;\n\n          }\n        }\n\n        // Loose ends\n\n        if (closed) {\n          ctx.closePath();\n        }\n\n        if (dashes && dashes.length > 0) {\n          ctx.setLineDash(emptyArray);\n        }\n\n        if (!clip && !parentClipped) {\n          if (!canvas.isHidden.test(fill)) {\n            isOffset = fill._renderer && fill._renderer.offset\n            if (isOffset) {\n              ctx.save();\n              ctx.translate(\n                - fill._renderer.offset.x, - fill._renderer.offset.y);\n              ctx.scale(fill._renderer.scale.x, fill._renderer.scale.y);\n            }\n            ctx.fill();\n            if (isOffset) {\n              ctx.restore();\n            }\n          }\n          if (!canvas.isHidden.test(stroke)) {\n            isOffset = stroke._renderer && stroke._renderer.offset;\n            if (isOffset) {\n              ctx.save();\n              ctx.translate(\n                - stroke._renderer.offset.x, - stroke._renderer.offset.y);\n              ctx.scale(stroke._renderer.scale.x, stroke._renderer.scale.y);\n              ctx.lineWidth = linewidth / stroke._renderer.scale.x;\n            }\n            ctx.stroke();\n            if (isOffset) {\n              ctx.restore();\n            }\n          }\n        }\n\n        if (!defaultMatrix) {\n          ctx.restore();\n        }\n\n        if (clip && !parentClipped) {\n          ctx.clip();\n        }\n\n        return this.flagReset();\n\n      }\n\n    },\n\n    text: {\n\n      render: function(ctx, forced, parentClipped) {\n\n        // TODO: Add a check here to only invoke _update if need be.\n        this._update();\n\n        var matrix = this._matrix.elements;\n        var stroke = this._stroke;\n        var linewidth = this._linewidth;\n        var fill = this._fill;\n        var opacity = this._opacity * this.parent._renderer.opacity;\n        var visible = this._visible;\n        var defaultMatrix = isDefaultMatrix(matrix);\n        var isOffset = fill._renderer && fill._renderer.offset\n          && stroke._renderer && stroke._renderer.offset;\n        var dashes = this.dashes;\n\n        var a, b, c, d, e, sx, sy;\n\n        // mask = this._mask;\n        var clip = this._clip;\n\n        if (!forced && (!visible || clip)) {\n          return this;\n        }\n\n        // Transform\n        if (!defaultMatrix) {\n          ctx.save();\n          ctx.transform(matrix[0], matrix[3], matrix[1], matrix[4], matrix[2], matrix[5]);\n        }\n\n       /**\n         * Commented two-way functionality of clips / masks with groups and\n         * polygons. Uncomment when this bug is fixed:\n         * https://code.google.com/p/chromium/issues/detail?id=370951\n         */\n\n        // if (mask) {\n        //   canvas[mask._renderer.type].render.call(mask, ctx, true);\n        // }\n\n        if (!isOffset) {\n          ctx.font = [this._style, this._weight, this._size + 'px/' +\n            this._leading + 'px', this._family].join(' ');\n        }\n\n        ctx.textAlign = canvas.alignments[this._alignment] || this._alignment;\n        ctx.textBaseline = this._baseline;\n\n        // Styles\n        if (fill) {\n          if (_.isString(fill)) {\n            ctx.fillStyle = fill;\n          } else {\n            canvas[fill._renderer.type].render.call(fill, ctx);\n            ctx.fillStyle = fill._renderer.effect;\n          }\n        }\n        if (stroke) {\n          if (_.isString(stroke)) {\n            ctx.strokeStyle = stroke;\n          } else {\n            canvas[stroke._renderer.type].render.call(stroke, ctx);\n            ctx.strokeStyle = stroke._renderer.effect;\n          }\n        }\n        if (linewidth) {\n          ctx.lineWidth = linewidth;\n        }\n        if (_.isNumber(opacity)) {\n          ctx.globalAlpha = opacity;\n        }\n        if (dashes && dashes.length > 0) {\n          ctx.setLineDash(dashes);\n        }\n\n        if (!clip && !parentClipped) {\n\n          if (!canvas.isHidden.test(fill)) {\n\n            if (fill._renderer && fill._renderer.offset) {\n\n              sx = toFixed(fill._renderer.scale.x);\n              sy = toFixed(fill._renderer.scale.y);\n\n              ctx.save();\n              ctx.translate( - toFixed(fill._renderer.offset.x),\n                - toFixed(fill._renderer.offset.y));\n              ctx.scale(sx, sy);\n\n              a = this._size / fill._renderer.scale.y;\n              b = this._leading / fill._renderer.scale.y;\n              ctx.font = [this._style, this._weight, toFixed(a) + 'px/',\n                toFixed(b) + 'px', this._family].join(' ');\n\n              c = fill._renderer.offset.x / fill._renderer.scale.x;\n              d = fill._renderer.offset.y / fill._renderer.scale.y;\n\n              ctx.fillText(this.value, toFixed(c), toFixed(d));\n              ctx.restore();\n\n            } else {\n              ctx.fillText(this.value, 0, 0);\n            }\n\n          }\n\n          if (!canvas.isHidden.test(stroke)) {\n\n            if (stroke._renderer && stroke._renderer.offset) {\n\n              sx = toFixed(stroke._renderer.scale.x);\n              sy = toFixed(stroke._renderer.scale.y);\n\n              ctx.save();\n              ctx.translate(- toFixed(stroke._renderer.offset.x),\n                - toFixed(stroke._renderer.offset.y));\n              ctx.scale(sx, sy);\n\n              a = this._size / stroke._renderer.scale.y;\n              b = this._leading / stroke._renderer.scale.y;\n              ctx.font = [this._style, this._weight, toFixed(a) + 'px/',\n                toFixed(b) + 'px', this._family].join(' ');\n\n              c = stroke._renderer.offset.x / stroke._renderer.scale.x;\n              d = stroke._renderer.offset.y / stroke._renderer.scale.y;\n              e = linewidth / stroke._renderer.scale.x;\n\n              ctx.lineWidth = toFixed(e);\n              ctx.strokeText(this.value, toFixed(c), toFixed(d));\n              ctx.restore();\n\n            } else {\n              ctx.strokeText(this.value, 0, 0);\n            }\n          }\n        }\n\n        if (!defaultMatrix) {\n          ctx.restore();\n        }\n\n        // TODO: Test for text\n        if (clip && !parentClipped) {\n          ctx.clip();\n        }\n\n        return this.flagReset();\n\n      }\n\n    },\n\n    'linear-gradient': {\n\n      render: function(ctx) {\n\n        this._update();\n\n        if (!this._renderer.effect || this._flagEndPoints || this._flagStops) {\n\n          this._renderer.effect = ctx.createLinearGradient(\n            this.left._x, this.left._y,\n            this.right._x, this.right._y\n          );\n\n          for (var i = 0; i < this.stops.length; i++) {\n            var stop = this.stops[i];\n            this._renderer.effect.addColorStop(stop._offset, stop._color);\n          }\n\n        }\n\n        return this.flagReset();\n\n      }\n\n    },\n\n    'radial-gradient': {\n\n      render: function(ctx) {\n\n        this._update();\n\n        if (!this._renderer.effect || this._flagCenter || this._flagFocal\n            || this._flagRadius || this._flagStops) {\n\n          this._renderer.effect = ctx.createRadialGradient(\n            this.center._x, this.center._y, 0,\n            this.focal._x, this.focal._y, this._radius\n          );\n\n          for (var i = 0; i < this.stops.length; i++) {\n            var stop = this.stops[i];\n            this._renderer.effect.addColorStop(stop._offset, stop._color);\n          }\n\n        }\n\n        return this.flagReset();\n\n      }\n\n    },\n\n    texture: {\n\n      render: function(ctx) {\n\n        this._update();\n\n        var image = this.image;\n        var repeat;\n\n        if (!this._renderer.effect || ((this._flagLoaded || this._flagImage || this._flagVideo || this._flagRepeat) && this.loaded)) {\n          this._renderer.effect = ctx.createPattern(this.image, this._repeat);\n        }\n\n        if (this._flagOffset || this._flagLoaded || this._flagScale) {\n\n          if (!(this._renderer.offset instanceof Two.Vector)) {\n            this._renderer.offset = new Two.Vector();\n          }\n\n          this._renderer.offset.x = - this._offset.x;\n          this._renderer.offset.y = - this._offset.y;\n\n          if (image) {\n\n            this._renderer.offset.x += image.width / 2;\n            this._renderer.offset.y += image.height / 2;\n\n            if (this._scale instanceof Two.Vector) {\n              this._renderer.offset.x *= this._scale.x;\n              this._renderer.offset.y *= this._scale.y;\n            } else {\n              this._renderer.offset.x *= this._scale;\n              this._renderer.offset.y *= this._scale;\n            }\n          }\n\n        }\n\n        if (this._flagScale || this._flagLoaded) {\n\n          if (!(this._renderer.scale instanceof Two.Vector)) {\n            this._renderer.scale = new Two.Vector();\n          }\n\n          if (this._scale instanceof Two.Vector) {\n            this._renderer.scale.copy(this._scale);\n          } else {\n            this._renderer.scale.set(this._scale, this._scale);\n          }\n\n        }\n\n        return this.flagReset();\n\n      }\n\n    },\n\n    renderSvgArcCommand: function(ctx, ax, ay, rx, ry, largeArcFlag, sweepFlag, xAxisRotation, x, y) {\n\n      xAxisRotation = xAxisRotation * Math.PI / 180;\n\n      // Ensure radii are positive\n      rx = abs(rx);\n      ry = abs(ry);\n\n      // Compute (x1, y1)\n      var dx2 = (ax - x) / 2.0;\n      var dy2 = (ay - y) / 2.0;\n      var x1p = cos(xAxisRotation) * dx2 + sin(xAxisRotation) * dy2;\n      var y1p = - sin(xAxisRotation) * dx2 + cos(xAxisRotation) * dy2;\n\n      // Compute (cx, cy)\n      var rxs = rx * rx;\n      var rys = ry * ry;\n      var x1ps = x1p * x1p;\n      var y1ps = y1p * y1p;\n\n      // Ensure radii are large enough\n      var cr = x1ps / rxs + y1ps / rys;\n\n      if (cr > 1) {\n\n        // scale up rx,ry equally so cr == 1\n        var s = sqrt(cr);\n        rx = s * rx;\n        ry = s * ry;\n        rxs = rx * rx;\n        rys = ry * ry;\n\n      }\n\n      var dq = (rxs * y1ps + rys * x1ps);\n      var pq = (rxs * rys - dq) / dq;\n      var q = sqrt(max(0, pq));\n      if (largeArcFlag === sweepFlag) q = - q;\n      var cxp = q * rx * y1p / ry;\n      var cyp = - q * ry * x1p / rx;\n\n      // Step 3: Compute (cx, cy) from (cx, cy)\n      var cx = cos(xAxisRotation) * cxp\n        - sin(xAxisRotation) * cyp + (ax + x) / 2;\n      var cy = sin(xAxisRotation) * cxp\n        + cos(xAxisRotation) * cyp + (ay + y) / 2;\n\n      // Step 4: Compute 1 and \n      var startAngle = svgAngle(1, 0, (x1p - cxp) / rx, (y1p - cyp) / ry);\n      var delta = svgAngle((x1p - cxp) / rx, (y1p - cyp) / ry,\n        (- x1p - cxp) / rx, (- y1p - cyp) / ry) % TWO_PI;\n\n      var endAngle = startAngle + delta;\n\n      var clockwise = sweepFlag === 0;\n\n      renderArcEstimate(ctx, cx, cy, rx, ry, startAngle, endAngle,\n        clockwise, xAxisRotation);\n\n    }\n\n  };\n\n  var Renderer = Two[Two.Types.canvas] = function(params) {\n    // Smoothing property. Defaults to true\n    // Set it to false when working with pixel art.\n    // false can lead to better performance, since it would use a cheaper interpolation algorithm.\n    // It might not make a big difference on GPU backed canvases.\n    var smoothing = (params.smoothing !== false);\n    this.domElement = params.domElement || document.createElement('canvas');\n    this.ctx = this.domElement.getContext('2d');\n    this.overdraw = params.overdraw || false;\n\n    if (!_.isUndefined(this.ctx.imageSmoothingEnabled)) {\n      this.ctx.imageSmoothingEnabled = smoothing;\n    }\n\n    // Everything drawn on the canvas needs to be added to the scene.\n    this.scene = new Two.Group();\n    this.scene.parent = this;\n  };\n\n\n  _.extend(Renderer, {\n\n    Utils: canvas\n\n  });\n\n  _.extend(Renderer.prototype, Two.Utils.Events, {\n\n    constructor: Renderer,\n\n    setSize: function(width, height, ratio) {\n\n      this.width = width;\n      this.height = height;\n\n      this.ratio = _.isUndefined(ratio) ? getRatio(this.ctx) : ratio;\n\n      this.domElement.width = width * this.ratio;\n      this.domElement.height = height * this.ratio;\n\n      if (this.domElement.style) {\n        _.extend(this.domElement.style, {\n          width: width + 'px',\n          height: height + 'px'\n        });\n      }\n\n      return this.trigger(Two.Events.resize, width, height, ratio);\n\n    },\n\n    render: function() {\n\n      var isOne = this.ratio === 1;\n\n      if (!isOne) {\n        this.ctx.save();\n        this.ctx.scale(this.ratio, this.ratio);\n      }\n\n      if (!this.overdraw) {\n        this.ctx.clearRect(0, 0, this.width, this.height);\n      }\n\n      canvas.group.render.call(this.scene, this.ctx);\n\n      if (!isOne) {\n        this.ctx.restore();\n      }\n\n      return this;\n\n    }\n\n  });\n\n  function renderArcEstimate(ctx, ox, oy, rx, ry, startAngle, endAngle, clockwise, xAxisRotation) {\n\n    var epsilon = Two.Utils.Curve.Tolerance.epsilon;\n    var deltaAngle = endAngle - startAngle;\n    var samePoints = Math.abs(deltaAngle) < epsilon;\n\n    // ensures that deltaAngle is 0 .. 2 PI\n    deltaAngle = mod(deltaAngle, TWO_PI);\n\n    if (deltaAngle < epsilon) {\n\n      if (samePoints) {\n\n        deltaAngle = 0;\n\n      } else {\n\n        deltaAngle = TWO_PI;\n\n      }\n\n    }\n\n    if (clockwise === true && ! samePoints) {\n\n      if (deltaAngle === TWO_PI) {\n\n        deltaAngle = - TWO_PI;\n\n      } else {\n\n        deltaAngle = deltaAngle - TWO_PI;\n\n      }\n\n    }\n\n    for (var i = 0; i < Two.Resolution; i++) {\n\n      var t = i / (Two.Resolution - 1);\n\n      var angle = startAngle + t * deltaAngle;\n      var x = ox + rx * Math.cos(angle);\n      var y = oy + ry * Math.sin(angle);\n\n      if (xAxisRotation !== 0) {\n\n        var cos = Math.cos(xAxisRotation);\n        var sin = Math.sin(xAxisRotation);\n\n        var tx = x - ox;\n        var ty = y - oy;\n\n        // Rotate the point about the center of the ellipse.\n        x = tx * cos - ty * sin + ox;\n        y = tx * sin + ty * cos + oy;\n\n      }\n\n      ctx.lineTo(x, y);\n\n    }\n\n  }\n\n  function svgAngle(ux, uy, vx, vy) {\n\n    var dot = ux * vx + uy * vy;\n    var len = sqrt(ux * ux + uy * uy) *  sqrt(vx * vx + vy * vy);\n    // floating point precision, slightly over values appear\n    var ang = acos(max(-1, min(1, dot / len)));\n    if ((ux * vy - uy * vx) < 0) {\n      ang = - ang;\n    }\n\n    return ang;\n\n  }\n\n  function resetTransform(ctx) {\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n  }\n\n})((typeof global !== 'undefined' ? global : (this || window)).Two);\n\n(function(Two) {\n\n  /**\n   * Constants\n   */\n\n  var root = Two.root,\n    multiplyMatrix = Two.Matrix.Multiply,\n    mod = Two.Utils.mod,\n    identity = [1, 0, 0, 0, 1, 0, 0, 0, 1],\n    transformation = new Two.Array(9),\n    getRatio = Two.Utils.getRatio,\n    getComputedMatrix = Two.Utils.getComputedMatrix,\n    toFixed = Two.Utils.toFixed,\n    CanvasUtils = Two[Two.Types.canvas].Utils,\n    _ = Two.Utils;\n\n  var webgl = {\n\n    isHidden: /(none|transparent)/i,\n\n    canvas: (root.document ? root.document.createElement('canvas') : { getContext: _.identity }),\n\n    alignments: {\n      left: 'start',\n      middle: 'center',\n      right: 'end'\n    },\n\n    matrix: new Two.Matrix(),\n\n    uv: new Two.Array([\n      0, 0,\n      1, 0,\n      0, 1,\n      0, 1,\n      1, 0,\n      1, 1\n    ]),\n\n    group: {\n\n      removeChild: function(child, gl) {\n        if (child.children) {\n          for (var i = 0; i < child.children.length; i++) {\n            webgl.group.removeChild(child.children[i], gl);\n          }\n          return;\n        }\n        // Deallocate texture to free up gl memory.\n        gl.deleteTexture(child._renderer.texture);\n        delete child._renderer.texture;\n      },\n\n      renderChild: function(child) {\n        webgl[child._renderer.type].render.call(child, this.gl, this.program);\n      },\n\n      render: function(gl, program) {\n\n        this._update();\n\n        var parent = this.parent;\n        var flagParentMatrix = (parent._matrix && parent._matrix.manual) || parent._flagMatrix;\n        var flagMatrix = this._matrix.manual || this._flagMatrix;\n\n        if (flagParentMatrix || flagMatrix) {\n\n          if (!this._renderer.matrix) {\n            this._renderer.matrix = new Two.Array(9);\n          }\n\n          // Reduce amount of object / array creation / deletion\n          this._matrix.toArray(true, transformation);\n\n          multiplyMatrix(transformation, parent._renderer.matrix, this._renderer.matrix);\n          this._renderer.scale = this._scale * parent._renderer.scale;\n\n          if (flagParentMatrix) {\n            this._flagMatrix = true;\n          }\n\n        }\n\n        if (this._mask) {\n\n          gl.enable(gl.STENCIL_TEST);\n          gl.stencilFunc(gl.ALWAYS, 1, 1);\n\n          gl.colorMask(false, false, false, true);\n          gl.stencilOp(gl.KEEP, gl.KEEP, gl.INCR);\n\n          webgl[this._mask._renderer.type].render.call(this._mask, gl, program, this);\n\n          gl.colorMask(true, true, true, true);\n          gl.stencilFunc(gl.NOTEQUAL, 0, 1);\n          gl.stencilOp(gl.KEEP, gl.KEEP, gl.KEEP);\n\n        }\n\n        this._flagOpacity = parent._flagOpacity || this._flagOpacity;\n\n        this._renderer.opacity = this._opacity\n          * (parent && parent._renderer ? parent._renderer.opacity : 1);\n\n        if (this._flagSubtractions) {\n          for (var i = 0; i < this.subtractions.length; i++) {\n            webgl.group.removeChild(this.subtractions[i], gl);\n          }\n        }\n\n        for (var i = 0; i < this.children.length; i++) {\n          var child = this.children[i];\n          webgl[child._renderer.type].render.call(child, gl, program);\n        }\n\n        this.children.forEach(webgl.group.renderChild, {\n          gl: gl,\n          program: program\n        });\n\n        if (this._mask) {\n\n          gl.colorMask(false, false, false, false);\n          gl.stencilOp(gl.KEEP, gl.KEEP, gl.DECR);\n\n          webgl[this._mask._renderer.type].render.call(this._mask, gl, program, this);\n\n          gl.colorMask(true, true, true, true);\n          gl.stencilFunc(gl.NOTEQUAL, 0, 1);\n          gl.stencilOp(gl.KEEP, gl.KEEP, gl.KEEP);\n\n          gl.disable(gl.STENCIL_TEST);\n\n        }\n\n        return this.flagReset();\n\n      }\n\n    },\n\n    path: {\n\n      updateCanvas: function(elem) {\n\n        var next, prev, a, c, ux, uy, vx, vy, ar, bl, br, cl, x, y;\n        var isOffset;\n\n        var commands = elem._renderer.vertices;\n        var canvas = this.canvas;\n        var ctx = this.ctx;\n\n        // Styles\n        var scale = elem._renderer.scale;\n        var stroke = elem._stroke;\n        var linewidth = elem._linewidth;\n        var fill = elem._fill;\n        var opacity = elem._renderer.opacity || elem._opacity;\n        var cap = elem._cap;\n        var join = elem._join;\n        var miter = elem._miter;\n        var closed = elem._closed;\n        var dashes = elem.dashes;\n        var length = commands.length;\n        var last = length - 1;\n\n        canvas.width = Math.max(Math.ceil(elem._renderer.rect.width * scale), 1);\n        canvas.height = Math.max(Math.ceil(elem._renderer.rect.height * scale), 1);\n\n        var centroid = elem._renderer.rect.centroid;\n        var cx = centroid.x;\n        var cy = centroid.y;\n\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n        if (fill) {\n          if (_.isString(fill)) {\n            ctx.fillStyle = fill;\n          } else {\n            webgl[fill._renderer.type].render.call(fill, ctx, elem);\n            ctx.fillStyle = fill._renderer.effect;\n          }\n        }\n        if (stroke) {\n          if (_.isString(stroke)) {\n            ctx.strokeStyle = stroke;\n          } else {\n            webgl[stroke._renderer.type].render.call(stroke, ctx, elem);\n            ctx.strokeStyle = stroke._renderer.effect;\n          }\n        }\n        if (linewidth) {\n          ctx.lineWidth = linewidth;\n        }\n        if (miter) {\n          ctx.miterLimit = miter;\n        }\n        if (join) {\n          ctx.lineJoin = join;\n        }\n        if (cap) {\n          ctx.lineCap = cap;\n        }\n        if (_.isNumber(opacity)) {\n          ctx.globalAlpha = opacity;\n        }\n\n        if (dashes && dashes.length > 0) {\n          ctx.setLineDash(dashes);\n        }\n\n        var d;\n        ctx.save();\n        ctx.scale(scale, scale);\n        ctx.translate(cx, cy);\n\n        ctx.beginPath();\n        for (var i = 0; i < commands.length; i++) {\n\n          var b = commands[i];\n\n          x = toFixed(b.x);\n          y = toFixed(b.y);\n\n          switch (b.command) {\n\n            case Two.Commands.close:\n              ctx.closePath();\n              break;\n\n            case Two.Commands.arc:\n\n              var rx = b.rx;\n              var ry = b.ry;\n              var xAxisRotation = b.xAxisRotation;\n              var largeArcFlag = b.largeArcFlag;\n              var sweepFlag = b.sweepFlag;\n\n              prev = closed ? mod(i - 1, length) : max(i - 1, 0);\n              a = commands[prev];\n\n              var ax = toFixed(a.x);\n              var ay = toFixed(a.y);\n\n              CanvasUtils.renderSvgArcCommand(ctx, ax, ay, rx, ry, largeArcFlag, sweepFlag, xAxisRotation, x, y);\n              break;\n\n            case Two.Commands.curve:\n\n              prev = closed ? mod(i - 1, length) : Math.max(i - 1, 0);\n              next = closed ? mod(i + 1, length) : Math.min(i + 1, last);\n\n              a = commands[prev];\n              c = commands[next];\n              ar = (a.controls && a.controls.right) || Two.Vector.zero;\n              bl = (b.controls && b.controls.left) || Two.Vector.zero;\n\n              if (a._relative) {\n                vx = toFixed((ar.x + a.x));\n                vy = toFixed((ar.y + a.y));\n              } else {\n                vx = toFixed(ar.x);\n                vy = toFixed(ar.y);\n              }\n\n              if (b._relative) {\n                ux = toFixed((bl.x + b.x));\n                uy = toFixed((bl.y + b.y));\n              } else {\n                ux = toFixed(bl.x);\n                uy = toFixed(bl.y);\n              }\n\n              ctx.bezierCurveTo(vx, vy, ux, uy, x, y);\n\n              if (i >= last && closed) {\n\n                c = d;\n\n                br = (b.controls && b.controls.right) || Two.Vector.zero;\n                cl = (c.controls && c.controls.left) || Two.Vector.zero;\n\n                if (b._relative) {\n                  vx = toFixed((br.x + b.x));\n                  vy = toFixed((br.y + b.y));\n                } else {\n                  vx = toFixed(br.x);\n                  vy = toFixed(br.y);\n                }\n\n                if (c._relative) {\n                  ux = toFixed((cl.x + c.x));\n                  uy = toFixed((cl.y + c.y));\n                } else {\n                  ux = toFixed(cl.x);\n                  uy = toFixed(cl.y);\n                }\n\n                x = toFixed(c.x);\n                y = toFixed(c.y);\n\n                ctx.bezierCurveTo(vx, vy, ux, uy, x, y);\n\n              }\n\n              break;\n\n            case Two.Commands.line:\n              ctx.lineTo(x, y);\n              break;\n\n            case Two.Commands.move:\n              d = b;\n              ctx.moveTo(x, y);\n              break;\n\n          }\n\n        }\n\n        // Loose ends\n\n        if (closed) {\n          ctx.closePath();\n        }\n\n        if (!webgl.isHidden.test(fill)) {\n          isOffset = fill._renderer && fill._renderer.offset\n          if (isOffset) {\n            ctx.save();\n            ctx.translate(\n              - fill._renderer.offset.x, - fill._renderer.offset.y);\n            ctx.scale(fill._renderer.scale.x, fill._renderer.scale.y);\n          }\n          ctx.fill();\n          if (isOffset) {\n            ctx.restore();\n          }\n        }\n\n        if (!webgl.isHidden.test(stroke)) {\n          isOffset = stroke._renderer && stroke._renderer.offset;\n          if (isOffset) {\n            ctx.save();\n            ctx.translate(\n              - stroke._renderer.offset.x, - stroke._renderer.offset.y);\n            ctx.scale(stroke._renderer.scale.x, stroke._renderer.scale.y);\n            ctx.lineWidth = linewidth / stroke._renderer.scale.x;\n          }\n          ctx.stroke();\n          if (isOffset) {\n            ctx.restore();\n          }\n        }\n\n        ctx.restore();\n\n      },\n\n      /**\n       * Returns the rect of a set of verts. Typically takes vertices that are\n       * \"centered\" around 0 and returns them to be anchored upper-left.\n       */\n      getBoundingClientRect: function(vertices, border, rect) {\n\n        var left = Infinity, right = -Infinity,\n            top = Infinity, bottom = -Infinity,\n            width, height;\n\n        vertices.forEach(function(v) {\n\n          var x = v.x, y = v.y, controls = v.controls;\n          var a, b, c, d, cl, cr;\n\n          top = Math.min(y, top);\n          left = Math.min(x, left);\n          right = Math.max(x, right);\n          bottom = Math.max(y, bottom);\n\n          if (!v.controls) {\n            return;\n          }\n\n          cl = controls.left;\n          cr = controls.right;\n\n          if (!cl || !cr) {\n            return;\n          }\n\n          a = v._relative ? cl.x + x : cl.x;\n          b = v._relative ? cl.y + y : cl.y;\n          c = v._relative ? cr.x + x : cr.x;\n          d = v._relative ? cr.y + y : cr.y;\n\n          if (!a || !b || !c || !d) {\n            return;\n          }\n\n          top = Math.min(b, d, top);\n          left = Math.min(a, c, left);\n          right = Math.max(a, c, right);\n          bottom = Math.max(b, d, bottom);\n\n        });\n\n        // Expand borders\n\n        if (_.isNumber(border)) {\n          top -= border;\n          left -= border;\n          right += border;\n          bottom += border;\n        }\n\n        width = right - left;\n        height = bottom - top;\n\n        rect.top = top;\n        rect.left = left;\n        rect.right = right;\n        rect.bottom = bottom;\n        rect.width = width;\n        rect.height = height;\n\n        if (!rect.centroid) {\n          rect.centroid = {};\n        }\n\n        rect.centroid.x = - left;\n        rect.centroid.y = - top;\n\n      },\n\n      render: function(gl, program, forcedParent) {\n\n        if (!this._visible || !this._opacity) {\n          return this;\n        }\n\n        this._update();\n\n        // Calculate what changed\n\n        var parent = this.parent;\n        var flagParentMatrix = parent._matrix.manual || parent._flagMatrix;\n        var flagMatrix = this._matrix.manual || this._flagMatrix;\n        var flagTexture = this._flagVertices || this._flagFill\n          || (this._fill instanceof Two.LinearGradient && (this._fill._flagSpread || this._fill._flagStops || this._fill._flagEndPoints))\n          || (this._fill instanceof Two.RadialGradient && (this._fill._flagSpread || this._fill._flagStops || this._fill._flagRadius || this._fill._flagCenter || this._fill._flagFocal))\n          || (this._fill instanceof Two.Texture && (this._fill._flagLoaded && this._fill.loaded || this._fill._flagImage || this._fill._flagVideo || this._fill._flagRepeat || this._fill._flagOffset || this._fill._flagScale))\n          || (this._stroke instanceof Two.LinearGradient && (this._stroke._flagSpread || this._stroke._flagStops || this._stroke._flagEndPoints))\n          || (this._stroke instanceof Two.RadialGradient && (this._stroke._flagSpread || this._stroke._flagStops || this._stroke._flagRadius || this._stroke._flagCenter || this._stroke._flagFocal))\n          || (this._stroke instanceof Two.Texture && (this._stroke._flagLoaded && this._stroke.loaded || this._stroke._flagImage || this._stroke._flagVideo || this._stroke._flagRepeat || this._stroke._flagOffset || this._fill._flagScale))\n          || this._flagStroke || this._flagLinewidth || this._flagOpacity\n          || parent._flagOpacity || this._flagVisible || this._flagCap\n          || this._flagJoin || this._flagMiter || this._flagScale\n          || (this.dashes && this.dashes.length > 0)\n          || !this._renderer.texture;\n\n        if (flagParentMatrix || flagMatrix) {\n\n          if (!this._renderer.matrix) {\n            this._renderer.matrix = new Two.Array(9);\n          }\n\n          // Reduce amount of object / array creation / deletion\n\n          this._matrix.toArray(true, transformation);\n\n          multiplyMatrix(transformation, parent._renderer.matrix, this._renderer.matrix);\n          this._renderer.scale = this._scale * parent._renderer.scale;\n\n        }\n\n        if (flagTexture) {\n\n          if (!this._renderer.rect) {\n            this._renderer.rect = {};\n          }\n\n          if (!this._renderer.triangles) {\n            this._renderer.triangles = new Two.Array(12);\n          }\n\n          this._renderer.opacity = this._opacity * parent._renderer.opacity;\n\n          webgl.path.getBoundingClientRect(this._renderer.vertices, this._linewidth, this._renderer.rect);\n          webgl.getTriangles(this._renderer.rect, this._renderer.triangles);\n\n          webgl.updateBuffer.call(webgl, gl, this, program);\n          webgl.updateTexture.call(webgl, gl, this);\n\n        } else {\n\n          // We still need to update child Two elements on the fill and\n          // stroke properties.\n          if (!_.isString(this._fill)) {\n            this._fill._update();\n          }\n          if (!_.isString(this._stroke)) {\n            this._stroke._update();\n          }\n\n        }\n\n        // if (this._mask) {\n        //   webgl[this._mask._renderer.type].render.call(mask, gl, program, this);\n        // }\n\n        if (this._clip && !forcedParent) {\n          return;\n        }\n\n        // Draw Texture\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._renderer.textureCoordsBuffer);\n\n        gl.vertexAttribPointer(program.textureCoords, 2, gl.FLOAT, false, 0, 0);\n\n        gl.bindTexture(gl.TEXTURE_2D, this._renderer.texture);\n\n\n        // Draw Rect\n\n        gl.uniformMatrix3fv(program.matrix, false, this._renderer.matrix);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._renderer.buffer);\n\n        gl.vertexAttribPointer(program.position, 2, gl.FLOAT, false, 0, 0);\n\n        gl.drawArrays(gl.TRIANGLES, 0, 6);\n\n        return this.flagReset();\n\n      }\n\n    },\n\n    text: {\n\n      updateCanvas: function(elem) {\n\n        var canvas = this.canvas;\n        var ctx = this.ctx;\n\n        // Styles\n        var scale = elem._renderer.scale;\n        var stroke = elem._stroke;\n        var linewidth = elem._linewidth * scale;\n        var fill = elem._fill;\n        var opacity = elem._renderer.opacity || elem._opacity;\n        var dashes = elem.dashes;\n\n        canvas.width = Math.max(Math.ceil(elem._renderer.rect.width * scale), 1);\n        canvas.height = Math.max(Math.ceil(elem._renderer.rect.height * scale), 1);\n\n        var centroid = elem._renderer.rect.centroid;\n        var cx = centroid.x;\n        var cy = centroid.y;\n\n        var a, b, c, d, e, sx, sy;\n        var isOffset = fill._renderer && fill._renderer.offset\n          && stroke._renderer && stroke._renderer.offset;\n\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n        if (!isOffset) {\n          ctx.font = [elem._style, elem._weight, elem._size + 'px/' +\n            elem._leading + 'px', elem._family].join(' ');\n        }\n\n        ctx.textAlign = 'center';\n        ctx.textBaseline = 'middle';\n\n        // Styles\n        if (fill) {\n          if (_.isString(fill)) {\n            ctx.fillStyle = fill;\n          } else {\n            webgl[fill._renderer.type].render.call(fill, ctx, elem);\n            ctx.fillStyle = fill._renderer.effect;\n          }\n        }\n        if (stroke) {\n          if (_.isString(stroke)) {\n            ctx.strokeStyle = stroke;\n          } else {\n            webgl[stroke._renderer.type].render.call(stroke, ctx, elem);\n            ctx.strokeStyle = stroke._renderer.effect;\n          }\n        }\n        if (linewidth) {\n          ctx.lineWidth = linewidth;\n        }\n        if (_.isNumber(opacity)) {\n          ctx.globalAlpha = opacity;\n        }\n        if (dashes && dashes.length > 0) {\n          ctx.setLineDash(dashes);\n        }\n\n        ctx.save();\n        ctx.scale(scale, scale);\n        ctx.translate(cx, cy);\n\n        if (!webgl.isHidden.test(fill)) {\n\n          if (fill._renderer && fill._renderer.offset) {\n\n            sx = toFixed(fill._renderer.scale.x);\n            sy = toFixed(fill._renderer.scale.y);\n\n            ctx.save();\n            ctx.translate( - toFixed(fill._renderer.offset.x),\n              - toFixed(fill._renderer.offset.y));\n            ctx.scale(sx, sy);\n\n            a = elem._size / fill._renderer.scale.y;\n            b = elem._leading / fill._renderer.scale.y;\n            ctx.font = [elem._style, elem._weight, toFixed(a) + 'px/',\n              toFixed(b) + 'px', elem._family].join(' ');\n\n            c = fill._renderer.offset.x / fill._renderer.scale.x;\n            d = fill._renderer.offset.y / fill._renderer.scale.y;\n\n            ctx.fillText(elem.value, toFixed(c), toFixed(d));\n            ctx.restore();\n\n          } else {\n            ctx.fillText(elem.value, 0, 0);\n          }\n\n        }\n\n        if (!webgl.isHidden.test(stroke)) {\n\n          if (stroke._renderer && stroke._renderer.offset) {\n\n            sx = toFixed(stroke._renderer.scale.x);\n            sy = toFixed(stroke._renderer.scale.y);\n\n            ctx.save();\n            ctx.translate(- toFixed(stroke._renderer.offset.x),\n              - toFixed(stroke._renderer.offset.y));\n            ctx.scale(sx, sy);\n\n            a = elem._size / stroke._renderer.scale.y;\n            b = elem._leading / stroke._renderer.scale.y;\n            ctx.font = [elem._style, elem._weight, toFixed(a) + 'px/',\n              toFixed(b) + 'px', elem._family].join(' ');\n\n            c = stroke._renderer.offset.x / stroke._renderer.scale.x;\n            d = stroke._renderer.offset.y / stroke._renderer.scale.y;\n            e = linewidth / stroke._renderer.scale.x;\n\n            ctx.lineWidth = toFixed(e);\n            ctx.strokeText(elem.value, toFixed(c), toFixed(d));\n            ctx.restore();\n\n          } else {\n            ctx.strokeText(elem.value, 0, 0);\n          }\n\n        }\n\n        ctx.restore();\n\n      },\n\n      getBoundingClientRect: function(elem, rect) {\n\n        var ctx = webgl.ctx;\n\n        ctx.font = [elem._style, elem._weight, elem._size + 'px/' +\n          elem._leading + 'px', elem._family].join(' ');\n\n        ctx.textAlign = 'center';\n        ctx.textBaseline = elem._baseline;\n\n        // TODO: Estimate this better\n        var width = ctx.measureText(elem._value).width;\n        var height = Math.max(elem._size || elem._leading);\n\n        if (this._linewidth && !webgl.isHidden.test(this._stroke)) {\n          // width += this._linewidth; // TODO: Not sure if the `measure` calcs this.\n          height += this._linewidth;\n        }\n\n        var w = width / 2;\n        var h = height / 2;\n\n        switch (webgl.alignments[elem._alignment] || elem._alignment) {\n\n          case webgl.alignments.left:\n            rect.left = 0;\n            rect.right = width;\n            break;\n          case webgl.alignments.right:\n            rect.left = - width;\n            rect.right = 0;\n            break;\n          default:\n            rect.left = - w;\n            rect.right = w;\n        }\n\n        // TODO: Gradients aren't inherited...\n        switch (elem._baseline) {\n          case 'bottom':\n            rect.top = - height;\n            rect.bottom = 0;\n            break;\n          case 'top':\n            rect.top = 0;\n            rect.bottom = height;\n            break;\n          default:\n            rect.top = - h;\n            rect.bottom = h;\n        }\n\n        rect.width = width;\n        rect.height = height;\n\n        if (!rect.centroid) {\n          rect.centroid = {};\n        }\n\n        // TODO:\n        rect.centroid.x = w;\n        rect.centroid.y = h;\n\n      },\n\n      render: function(gl, program, forcedParent) {\n\n        if (!this._visible || !this._opacity) {\n          return this;\n        }\n\n        this._update();\n\n        // Calculate what changed\n\n        var parent = this.parent;\n        var flagParentMatrix = parent._matrix.manual || parent._flagMatrix;\n        var flagMatrix = this._matrix.manual || this._flagMatrix;\n        var flagTexture = this._flagVertices || this._flagFill\n          || (this._fill instanceof Two.LinearGradient && (this._fill._flagSpread || this._fill._flagStops || this._fill._flagEndPoints))\n          || (this._fill instanceof Two.RadialGradient && (this._fill._flagSpread || this._fill._flagStops || this._fill._flagRadius || this._fill._flagCenter || this._fill._flagFocal))\n          || (this._fill instanceof Two.Texture && (this._fill._flagLoaded && this._fill.loaded || this._fill._flagImage || this._fill._flagVideo || this._fill._flagRepeat || this._fill._flagOffset || this._fill._flagScale))\n          || (this._stroke instanceof Two.LinearGradient && (this._stroke._flagSpread || this._stroke._flagStops || this._stroke._flagEndPoints))\n          || (this._stroke instanceof Two.RadialGradient && (this._stroke._flagSpread || this._stroke._flagStops || this._stroke._flagRadius || this._stroke._flagCenter || this._stroke._flagFocal))\n          || (this._stroke instanceof Two.Texture && (this._stroke._flagLoaded && this._stroke.loaded || this._stroke._flagImage || this._stroke._flagVideo || this._stroke._flagRepeat || this._stroke._flagOffset || this._fill._flagScale))\n          || this._flagStroke || this._flagLinewidth || this._flagOpacity\n          || parent._flagOpacity || this._flagVisible || this._flagScale\n          || this._flagValue || this._flagFamily || this._flagSize\n          || this._flagLeading || this._flagAlignment || this._flagBaseline\n          || this._flagStyle || this._flagWeight || this._flagDecoration\n          || (this.dashes && this.dashes.length > 0)\n          || !this._renderer.texture;\n\n        if (flagParentMatrix || flagMatrix) {\n\n          if (!this._renderer.matrix) {\n            this._renderer.matrix = new Two.Array(9);\n          }\n\n          // Reduce amount of object / array creation / deletion\n\n          this._matrix.toArray(true, transformation);\n\n          multiplyMatrix(transformation, parent._renderer.matrix, this._renderer.matrix);\n          this._renderer.scale = this._scale * parent._renderer.scale;\n\n        }\n\n        if (flagTexture) {\n\n          if (!this._renderer.rect) {\n            this._renderer.rect = {};\n          }\n\n          if (!this._renderer.triangles) {\n            this._renderer.triangles = new Two.Array(12);\n          }\n\n          this._renderer.opacity = this._opacity * parent._renderer.opacity;\n\n          webgl.text.getBoundingClientRect(this, this._renderer.rect);\n          webgl.getTriangles(this._renderer.rect, this._renderer.triangles);\n\n          webgl.updateBuffer.call(webgl, gl, this, program);\n          webgl.updateTexture.call(webgl, gl, this);\n\n        } else {\n\n          // We still need to update child Two elements on the fill and\n          // stroke properties.\n          if (!_.isString(this._fill)) {\n            this._fill._update();\n          }\n          if (!_.isString(this._stroke)) {\n            this._stroke._update();\n          }\n\n        }\n\n        // if (this._mask) {\n        //   webgl[this._mask._renderer.type].render.call(mask, gl, program, this);\n        // }\n\n        if (this._clip && !forcedParent) {\n          return;\n        }\n\n        // Draw Texture\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._renderer.textureCoordsBuffer);\n\n        gl.vertexAttribPointer(program.textureCoords, 2, gl.FLOAT, false, 0, 0);\n\n        gl.bindTexture(gl.TEXTURE_2D, this._renderer.texture);\n\n\n        // Draw Rect\n\n        gl.uniformMatrix3fv(program.matrix, false, this._renderer.matrix);\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this._renderer.buffer);\n\n        gl.vertexAttribPointer(program.position, 2, gl.FLOAT, false, 0, 0);\n\n        gl.drawArrays(gl.TRIANGLES, 0, 6);\n\n        return this.flagReset();\n\n      }\n\n    },\n\n    'linear-gradient': {\n\n      render: function(ctx, elem) {\n\n        if (!ctx.canvas.getContext('2d')) {\n          return;\n        }\n\n        this._update();\n\n        if (!this._renderer.effect || this._flagEndPoints || this._flagStops) {\n\n          this._renderer.effect = ctx.createLinearGradient(\n            this.left._x, this.left._y,\n            this.right._x, this.right._y\n          );\n\n          for (var i = 0; i < this.stops.length; i++) {\n            var stop = this.stops[i];\n            this._renderer.effect.addColorStop(stop._offset, stop._color);\n          }\n\n        }\n\n        return this.flagReset();\n\n      }\n\n    },\n\n    'radial-gradient': {\n\n      render: function(ctx, elem) {\n\n        if (!ctx.canvas.getContext('2d')) {\n          return;\n        }\n\n        this._update();\n\n        if (!this._renderer.effect || this._flagCenter || this._flagFocal\n            || this._flagRadius || this._flagStops) {\n\n          this._renderer.effect = ctx.createRadialGradient(\n            this.center._x, this.center._y, 0,\n            this.focal._x, this.focal._y, this._radius\n          );\n\n          for (var i = 0; i < this.stops.length; i++) {\n            var stop = this.stops[i];\n            this._renderer.effect.addColorStop(stop._offset, stop._color);\n          }\n\n        }\n\n        return this.flagReset();\n\n      }\n\n    },\n\n    texture: {\n\n      render: function(ctx, elem) {\n\n        if (!ctx.canvas.getContext('2d')) {\n          return;\n        }\n\n        this._update();\n\n        var image = this.image;\n        var repeat;\n\n        if (((this._flagLoaded || this._flagImage || this._flagVideo || this._flagRepeat) && this.loaded)) {\n          this._renderer.effect = ctx.createPattern(image, this._repeat);\n        } else if (!this._renderer.effect) {\n          return this.flagReset();\n        }\n\n        if (this._flagOffset || this._flagLoaded || this._flagScale) {\n\n          if (!(this._renderer.offset instanceof Two.Vector)) {\n            this._renderer.offset = new Two.Vector();\n          }\n\n          this._renderer.offset.x = - this._offset.x;\n          this._renderer.offset.y = - this._offset.y;\n\n          if (image) {\n\n            this._renderer.offset.x += image.width / 2;\n            this._renderer.offset.y += image.height / 2;\n\n            if (this._scale instanceof Two.Vector) {\n              this._renderer.offset.x *= this._scale.x;\n              this._renderer.offset.y *= this._scale.y;\n            } else {\n              this._renderer.offset.x *= this._scale;\n              this._renderer.offset.y *= this._scale;\n            }\n          }\n\n        }\n\n        if (this._flagScale || this._flagLoaded) {\n\n          if (!(this._renderer.scale instanceof Two.Vector)) {\n            this._renderer.scale = new Two.Vector();\n          }\n\n          if (this._scale instanceof Two.Vector) {\n            this._renderer.scale.copy(this._scale);\n          } else {\n            this._renderer.scale.set(this._scale, this._scale);\n          }\n\n        }\n\n        return this.flagReset();\n\n      }\n\n    },\n\n    getTriangles: function(rect, triangles) {\n\n      var top = rect.top,\n          left = rect.left,\n          right = rect.right,\n          bottom = rect.bottom;\n\n      // First Triangle\n\n      triangles[0] = left;\n      triangles[1] = top;\n\n      triangles[2] = right;\n      triangles[3] = top;\n\n      triangles[4] = left;\n      triangles[5] = bottom;\n\n      // Second Triangle\n\n      triangles[6] = left;\n      triangles[7] = bottom;\n\n      triangles[8] = right;\n      triangles[9] = top;\n\n      triangles[10] = right;\n      triangles[11] = bottom;\n\n    },\n\n    updateTexture: function(gl, elem) {\n\n      this[elem._renderer.type].updateCanvas.call(webgl, elem);\n\n      if (elem._renderer.texture) {\n        gl.deleteTexture(elem._renderer.texture);\n      }\n\n      gl.bindBuffer(gl.ARRAY_BUFFER, elem._renderer.textureCoordsBuffer);\n\n      // TODO: Is this necessary every time or can we do once?\n      // TODO: Create a registry for textures\n      elem._renderer.texture = gl.createTexture();\n      gl.bindTexture(gl.TEXTURE_2D, elem._renderer.texture);\n\n      // Set the parameters so we can render any size image.\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n      // gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n      // gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n      // gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\n      if (this.canvas.width <= 0 || this.canvas.height <= 0) {\n        return;\n      }\n\n      // Upload the image into the texture.\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.canvas);\n\n    },\n\n    updateBuffer: function(gl, elem, program) {\n\n      if (_.isObject(elem._renderer.buffer)) {\n        gl.deleteBuffer(elem._renderer.buffer);\n      }\n\n      elem._renderer.buffer = gl.createBuffer();\n\n      gl.bindBuffer(gl.ARRAY_BUFFER, elem._renderer.buffer);\n      gl.enableVertexAttribArray(program.position);\n\n      gl.bufferData(gl.ARRAY_BUFFER, elem._renderer.triangles, gl.STATIC_DRAW);\n\n      if (_.isObject(elem._renderer.textureCoordsBuffer)) {\n        gl.deleteBuffer(elem._renderer.textureCoordsBuffer);\n      }\n\n      elem._renderer.textureCoordsBuffer = gl.createBuffer();\n\n      gl.bindBuffer(gl.ARRAY_BUFFER, elem._renderer.textureCoordsBuffer);\n      gl.enableVertexAttribArray(program.textureCoords);\n\n      gl.bufferData(gl.ARRAY_BUFFER, this.uv, gl.STATIC_DRAW);\n\n    },\n\n    program: {\n\n      create: function(gl, shaders) {\n        var program, linked, error;\n        program = gl.createProgram();\n        _.each(shaders, function(s) {\n          gl.attachShader(program, s);\n        });\n\n        gl.linkProgram(program);\n        linked = gl.getProgramParameter(program, gl.LINK_STATUS);\n        if (!linked) {\n          error = gl.getProgramInfoLog(program);\n          gl.deleteProgram(program);\n          throw new Two.Utils.Error('unable to link program: ' + error);\n        }\n\n        return program;\n\n      }\n\n    },\n\n    shaders: {\n\n      create: function(gl, source, type) {\n        var shader, compiled, error;\n        shader = gl.createShader(gl[type]);\n        gl.shaderSource(shader, source);\n        gl.compileShader(shader);\n\n        compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n        if (!compiled) {\n          error = gl.getShaderInfoLog(shader);\n          gl.deleteShader(shader);\n          throw new Two.Utils.Error('unable to compile shader ' + shader + ': ' + error);\n        }\n\n        return shader;\n\n      },\n\n      types: {\n        vertex: 'VERTEX_SHADER',\n        fragment: 'FRAGMENT_SHADER'\n      },\n\n      vertex: [\n        'attribute vec2 a_position;',\n        'attribute vec2 a_textureCoords;',\n        '',\n        'uniform mat3 u_matrix;',\n        'uniform vec2 u_resolution;',\n        '',\n        'varying vec2 v_textureCoords;',\n        '',\n        'void main() {',\n        '   vec2 projected = (u_matrix * vec3(a_position, 1.0)).xy;',\n        '   vec2 normal = projected / u_resolution;',\n        '   vec2 clipspace = (normal * 2.0) - 1.0;',\n        '',\n        '   gl_Position = vec4(clipspace * vec2(1.0, -1.0), 0.0, 1.0);',\n        '   v_textureCoords = a_textureCoords;',\n        '}'\n      ].join('\\n'),\n\n      fragment: [\n        'precision mediump float;',\n        '',\n        'uniform sampler2D u_image;',\n        'varying vec2 v_textureCoords;',\n        '',\n        'void main() {',\n        '  gl_FragColor = texture2D(u_image, v_textureCoords);',\n        '}'\n      ].join('\\n')\n\n    },\n\n    TextureRegistry: new Two.Registry()\n\n  };\n\n  webgl.ctx = webgl.canvas.getContext('2d');\n\n  var Renderer = Two[Two.Types.webgl] = function(options) {\n\n    var params, gl, vs, fs;\n    this.domElement = options.domElement || document.createElement('canvas');\n\n    // Everything drawn on the canvas needs to come from the stage.\n    this.scene = new Two.Group();\n    this.scene.parent = this;\n\n    this._renderer = {\n      matrix: new Two.Array(identity),\n      scale: 1,\n      opacity: 1\n    };\n    this._flagMatrix = true;\n\n    // http://games.greggman.com/game/webgl-and-alpha/\n    // http://www.khronos.org/registry/webgl/specs/latest/#5.2\n    params = _.defaults(options || {}, {\n      antialias: false,\n      alpha: true,\n      premultipliedAlpha: true,\n      stencil: true,\n      preserveDrawingBuffer: true,\n      overdraw: false\n    });\n\n    this.overdraw = params.overdraw;\n\n    gl = this.ctx = this.domElement.getContext('webgl', params) ||\n      this.domElement.getContext('experimental-webgl', params);\n\n    if (!this.ctx) {\n      throw new Two.Utils.Error(\n        'unable to create a webgl context. Try using another renderer.');\n    }\n\n    // Compile Base Shaders to draw in pixel space.\n    vs = webgl.shaders.create(\n      gl, webgl.shaders.vertex, webgl.shaders.types.vertex);\n    fs = webgl.shaders.create(\n      gl, webgl.shaders.fragment, webgl.shaders.types.fragment);\n\n    this.program = webgl.program.create(gl, [vs, fs]);\n    gl.useProgram(this.program);\n\n    // Create and bind the drawing buffer\n\n    // look up where the vertex data needs to go.\n    this.program.position = gl.getAttribLocation(this.program, 'a_position');\n    this.program.matrix = gl.getUniformLocation(this.program, 'u_matrix');\n    this.program.textureCoords = gl.getAttribLocation(this.program, 'a_textureCoords');\n\n    // Copied from Three.js WebGLRenderer\n    gl.disable(gl.DEPTH_TEST);\n\n    // Setup some initial statements of the gl context\n    gl.enable(gl.BLEND);\n\n    // https://code.google.com/p/chromium/issues/detail?id=316393\n    // gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, gl.TRUE);\n\n    gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\n    gl.blendFuncSeparate(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA,\n      gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\n\n  };\n\n  _.extend(Renderer, {\n\n    Utils: webgl\n\n  });\n\n  _.extend(Renderer.prototype, Two.Utils.Events, {\n\n    constructor: Renderer,\n\n    setSize: function(width, height, ratio) {\n\n      this.width = width;\n      this.height = height;\n\n      this.ratio = _.isUndefined(ratio) ? getRatio(this.ctx) : ratio;\n\n      this.domElement.width = width * this.ratio;\n      this.domElement.height = height * this.ratio;\n\n      _.extend(this.domElement.style, {\n        width: width + 'px',\n        height: height + 'px'\n      });\n\n      width *= this.ratio;\n      height *= this.ratio;\n\n      // Set for this.stage parent scaling to account for HDPI\n      this._renderer.matrix[0] = this._renderer.matrix[4] = this._renderer.scale = this.ratio;\n\n      this._flagMatrix = true;\n\n      this.ctx.viewport(0, 0, width, height);\n\n      var resolutionLocation = this.ctx.getUniformLocation(\n        this.program, 'u_resolution');\n      this.ctx.uniform2f(resolutionLocation, width, height);\n\n      return this.trigger(Two.Events.resize, width, height, ratio);\n\n    },\n\n    render: function() {\n\n      var gl = this.ctx;\n\n      if (!this.overdraw) {\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n      }\n\n      webgl.group.render.call(this.scene, gl, this.program);\n      this._flagMatrix = false;\n\n      return this;\n\n    }\n\n  });\n\n})((typeof global !== 'undefined' ? global : (this || window)).Two);\n\n(function(Two) {\n\n  var _ = Two.Utils;\n\n  /**\n   * @name Two.Shape\n   * @class\n   * @extends Two.Utils.Events\n   * @description The foundational transformation object for the Two.js scenegraph.\n   */\n  var Shape = Two.Shape = function() {\n\n    /**\n     * @name Two.Shape#_renderer\n     * @property {Object}\n     * @private\n     * @description A private object to store relevant renderer specific variables.\n     * @nota-bene With the {@link Two.SvgRenderer} you can access the underlying SVG element created via `shape._renderer.elem`.\n     */\n    this._renderer = {};\n    this._renderer.flagMatrix = _.bind(Shape.FlagMatrix, this);\n    this.isShape = true;\n\n    /**\n     * @name Two.Shape#id\n     * @property {String} - Session specific unique identifier.\n     * @nota-bene In the {@link Two.SvgRenderer} change this to change the underlying SVG element's id too.\n     */\n    this.id = Two.Identifier + Two.uniqueId();\n\n    /**\n     * @name Two.Shape#classList\n     * @property {Array}\n     * @description A list of class strings stored if imported / interpreted  from an SVG element.\n     */\n    this.classList = [];\n\n    /**\n     * @name Two.Shape#_matrix\n     * @property\n     * @description The transformation matrix of the shape.\n     * @nota-bene {@link Two.Shape#translation}, {@link Two.Shape#rotation}, and {@link Two.Shape#scale} apply their values to the matrix when changed. The matrix is what is sent to the renderer to be drawn.\n     */\n    this._matrix = new Two.Matrix();\n\n    /**\n     * @name Two.Shape#translation\n     * @property {Two.Vector} - The x and y value for where the shape is placed relative to its parent.\n     */\n    this.translation = new Two.Vector();\n\n    /**\n     * @name Two.Shape#rotation\n     * @property {Radians} - The value in radians for how much the shape is rotated relative to its parent.\n     */\n    this.rotation = 0;\n\n    /**\n     * @name Two.Shape#scale\n     * @property {Number} - The value for how much the shape is scaled relative to its parent.\n     * @nota-bene This value can be replaced with a {@link Two.Vector} to do non-uniform scaling. e.g: `shape.scale = new Two.Vector(2, 1);`\n     */\n    this.scale = 1;\n\n  };\n\n  _.extend(Shape, {\n\n    /**\n     * @name Two.Shape.FlagMatrix\n     * @function\n     * @description Utility function used in conjunction with event handlers to update the flagMatrix of a shape.\n     */\n    FlagMatrix: function() {\n      this._flagMatrix = true;\n    },\n\n    /**\n     * @name Two.Shape.MakeObservable\n     * @function\n     * @param {Object} object - The object to make observable.\n     * @description Convenience function to apply observable qualities of a `Two.Shape` to any object. Handy if you'd like to extend the `Two.Shape` class on a custom class.\n     */\n    MakeObservable: function(object) {\n\n      Object.defineProperty(object, 'translation', {\n        enumerable: true,\n        get: function() {\n          return this._translation;\n        },\n        set: function(v) {\n          if (this._translation) {\n            this._translation.unbind(Two.Events.change, this._renderer.flagMatrix);\n          }\n          this._translation = v;\n          this._translation.bind(Two.Events.change, this._renderer.flagMatrix);\n          Shape.FlagMatrix.call(this);\n        }\n      });\n\n      Object.defineProperty(object, 'rotation', {\n        enumerable: true,\n        get: function() {\n          return this._rotation;\n        },\n        set: function(v) {\n          this._rotation = v;\n          this._flagMatrix = true;\n        }\n      });\n\n      Object.defineProperty(object, 'scale', {\n        enumerable: true,\n        get: function() {\n          return this._scale;\n        },\n        set: function(v) {\n\n          if (this._scale instanceof Two.Vector) {\n            this._scale.unbind(Two.Events.change, this._renderer.flagMatrix);\n          }\n\n          this._scale = v;\n\n          if (this._scale instanceof Two.Vector) {\n            this._scale.bind(Two.Events.change, this._renderer.flagMatrix);\n          }\n\n          this._flagMatrix = true;\n          this._flagScale = true;\n\n        }\n      });\n\n    }\n\n  });\n\n  _.extend(Shape.prototype, Two.Utils.Events, {\n\n    // Flags\n\n    /**\n     * @name Two.Shape#_flagMatrix\n     * @private\n     * @property {Boolean} - Determines whether the matrix needs updating.\n     */\n    _flagMatrix: true,\n\n    /**\n     * @name Two.Shape#_flagScale\n     * @private\n     * @property {Boolean} - Determines whether the scale needs updating.\n     */\n    _flagScale: false,\n\n    // _flagMask: false,\n    // _flagClip: false,\n\n    // Underlying Properties\n\n    /**\n     * @name Two.Shape#_translation\n     * @private\n     * @property {Two.Vector} - The translation values as a {@link Two.Vector}.\n     */\n    _translation: null,\n\n    /**\n     * @name Two.Shape#_rotation\n     * @private\n     * @property {Radians} - The rotation value in radians.\n     */\n    _rotation: 0,\n\n    /**\n     * @name Two.Shape#_translation\n     * @private\n     * @property {Two.Vector} - The translation values as a {@link Two.Vector}.\n     */\n    _scale: 1,\n\n    // _mask: null,\n    // _clip: false,\n\n    constructor: Shape,\n\n    /**\n     * @name Two.Shape#addTo\n     * @function\n     * @param {Two.Group} group - The parent the shape adds itself to.\n     * @description Convenience method to add itself to the scenegraph.\n     */\n    addTo: function(group) {\n      group.add(this);\n      return this;\n    },\n\n    /**\n     * @name Two.Shape#clone\n     * @function\n     * @param {Two.Group} [parent] - Optional argument to automatically add the shape to a scenegraph.\n     * @returns {Two.Shape}\n     * @description Create a new `Two.Shape` with the same values as the current shape.\n     */\n    clone: function(parent) {\n\n      var clone = new Shape();\n\n      clone.translation.copy(this.translation);\n      clone.rotation = this.rotation;\n      clone.scale = this.scale;\n\n      if (parent) {\n        parent.add(clone);\n      }\n\n      return clone._update();\n\n    },\n\n    /**\n     * @name Two.Shape#_update\n     * @function\n     * @private\n     * @param {Boolean} [bubbles=false] - Force the parent to `_update` as well.\n     * @description This is called before rendering happens by the renderer. This applies all changes necessary so that rendering is up-to-date but not updated more than it needs to be.\n     * @nota-bene Try not to call this method more than once a frame.\n     */\n    _update: function(bubbles) {\n\n      if (!this._matrix.manual && this._flagMatrix) {\n\n        this._matrix\n          .identity()\n          .translate(this.translation.x, this.translation.y);\n\n          if (this._scale instanceof Two.Vector) {\n            this._matrix.scale(this._scale.x, this._scale.y);\n          } else {\n            this._matrix.scale(this._scale);\n          }\n\n          this._matrix.rotate(this.rotation);\n\n      }\n\n      if (bubbles) {\n        if (this.parent && this.parent._update) {\n          this.parent._update();\n        }\n      }\n\n      return this;\n\n    },\n\n    /**\n     * @name Two.Shape#flagReset\n     * @function\n     * @private\n     * @description Called internally to reset all flags. Ensures that only properties that change are updated before being sent to the renderer.\n     */\n    flagReset: function() {\n\n      this._flagMatrix = this._flagScale = false;\n\n      return this;\n\n    }\n\n  });\n\n  Shape.MakeObservable(Shape.prototype);\n\n})((typeof global !== 'undefined' ? global : (this || window)).Two);\n\n(function(Two) {\n\n  // Constants\n\n  var min = Math.min, max = Math.max, round = Math.round,\n    ceil = Math.ceil, floor = Math.floor,\n    getComputedMatrix = Two.Utils.getComputedMatrix;\n\n  var commands = {};\n  var _ = Two.Utils;\n\n  _.each(Two.Commands, function(v, k) {\n    commands[k] = new RegExp(v);\n  });\n\n  /**\n   * @name Two.Path\n   * @class\n   * @extends Two.Shape\n   * @param {Two#Anchor[]} [vertices] - A list of Two.Anchors that represent the order and coordinates to construct the rendered shape.\n   * @param {Boolean} [closed=false] - Describes whether the shape is closed or open.\n   * @param {Boolean} [curved=false] - Describes whether the shape automatically calculates bezier handles for each vertex.\n   * @param {Boolean} [manual=false] - Describes whether the developer controls how vertices are plotted or if Two.js automatically plots coordinates based on closed and curved booleans.\n   * @description This is the primary primitive class for creating all drawable shapes in Two.js. Unless specified methods return their instance of `Two.Path` for the purpose of chaining.\n   */\n  var Path = Two.Path = function(vertices, closed, curved, manual) {\n\n    Two.Shape.call(this);\n\n    this._renderer.type = 'path';\n    this._renderer.flagVertices = _.bind(Path.FlagVertices, this);\n    this._renderer.bindVertices = _.bind(Path.BindVertices, this);\n    this._renderer.unbindVertices = _.bind(Path.UnbindVertices, this);\n\n    this._renderer.flagFill = _.bind(Path.FlagFill, this);\n    this._renderer.flagStroke = _.bind(Path.FlagStroke, this);\n    this._renderer.vertices = [];\n    this._renderer.collection = [];\n\n    /**\n     * @name Two.Path#closed\n     * @property {Boolean} - Determines whether a final line is drawn between the final point in the `vertices` array and the first point.\n     */\n    this._closed = !!closed;\n\n    /**\n     * @name Two.Path#curved\n     * @property {Boolean} - When the path is `automatic = true` this boolean determines whether the lines between the points are curved or not.\n     */\n    this._curved = !!curved;\n\n    /**\n     * @name Two.Path#beginning\n     * @property {Number} - Number between zero and one to state the beginning of where the path is rendered.\n     * @description `Two.Path.beginning` is a percentage value that represents at what percentage into the path should the renderer start drawing.\n     * @nota-bene This is great for animating in and out stroked paths in conjunction with {@link Two.Path#ending}.\n     */\n    this.beginning = 0;\n\n    /**\n     * @name Two.Path#ending\n     * @property {Number} - Number between zero and one to state the ending of where the path is rendered.\n     * @description `Two.Path.ending` is a percentage value that represents at what percentage into the path should the renderer start drawing.\n     * @nota-bene This is great for animating in and out stroked paths in conjunction with {@link Two.Path#beginning}.\n     */\n    this.ending = 1;\n\n    // Style properties\n\n    /**\n     * @name Two.Path#fill\n     * @property {(CssColor|Two.Gradient|Two.Texture)} - The value of what the path should be filled in with.\n     * @see {@link https://developer.mozilla.org/en-US/docs/Web/CSS/color_value} for more information on CSS Colors.\n     */\n    this.fill = '#fff';\n\n    /**\n     * @name Two.Path#stroke\n     * @property {(CssColor|Two.Gradient|Two.Texture)} - The value of what the path should be outlined in with.\n     * @see {@link https://developer.mozilla.org/en-US/docs/Web/CSS/color_value} for more information on CSS Colors.\n     */\n    this.stroke = '#000';\n\n    /**\n     * @name Two.Path#linewidth\n     * @property {Number} - The thickness in pixels of the stroke.\n     */\n    this.linewidth = 1.0;\n\n    /**\n     * @name Two.Path#opacity\n     * @property {Number} - The opaqueness of the path.\n     * @nota-bene Can be used in conjunction with CSS Colors that have an alpha value.\n     */\n    this.opacity = 1.0;\n\n    /**\n     * @name Two.Path#className\n     * @property {String} - A class name to be searched by in {@link Two.Group}s.\n     */\n    this.className = '';\n\n    /**\n     * @name Two.Path#visible\n     * @property {Boolean} - Display the path or not.\n     * @nota-bene For {@link Two.CanvasRenderer} and {@link Two.WebGLRenderer} when set to false all updating is disabled improving performance dramatically with many objects in the scene.\n     */\n    this.visible = true;\n\n    /**\n     * @name Two.Path#cap\n     * @property {String}\n     * @see {@link https://www.w3.org/TR/SVG11/painting.html#StrokeLinecapProperty}\n     */\n    this.cap = 'butt';      // Default of Adobe Illustrator\n\n    /**\n     * @name Two.Path#join\n     * @property {String}\n     * @see {@link https://www.w3.org/TR/SVG11/painting.html#StrokeLinejoinProperty}\n     */\n    this.join = 'miter';    // Default of Adobe Illustrator\n\n    /**\n     * @name Two.Path#miter\n     * @property {String}\n     * @see {@link https://www.w3.org/TR/SVG11/painting.html#StrokeMiterlimitProperty}\n     */\n    this.miter = 4;         // Default of Adobe Illustrator\n\n    /**\n     * @name Two.Path#vertices\n     * @property {Two.Anchor[]} - An ordered list of anchor points for rendering the path.\n     * @description An of `Two.Anchor` objects that consist of what form the path takes.\n     * @nota-bene The array when manipulating is actually a {@link Two.Utils.Collection}.\n     */\n    this.vertices = vertices;\n\n    /**\n     * @name Two.Path#automatic\n     * @property {Boolean} - Determines whether or not Two.js should calculate curves, lines, and commands automatically for you or to let the developer manipulate them for themselves.\n     */\n    this.automatic = !manual;\n\n    /**\n     * @name Two.Path#dashes\n     * @property {String} - List of dash and gap values.\n     * @see {@link https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-dasharray} for more information on the SVG stroke-dasharray attribute.\n     */\n    this.dashes = [];\n\n  };\n\n  _.extend(Path, {\n\n    /**\n     * @name Two.Path.Properties\n     * @property {String[]} - A list of properties that are on every {@link Two.Path}.\n     */\n    Properties: [\n      'fill',\n      'stroke',\n      'linewidth',\n      'opacity',\n      'className',\n      'visible',\n      'cap',\n      'join',\n      'miter',\n\n      'closed',\n      'curved',\n      'automatic',\n      'beginning',\n      'ending'\n    ],\n\n    Utils: {\n      getCurveLength: getCurveLength\n    },\n\n    /**\n     * @name Two.Path.FlagVertices\n     * @function\n     * @description Cached method to let renderers know vertices have been updated on a {@link Two.Path}.\n     */\n    FlagVertices: function() {\n      this._flagVertices = true;\n      this._flagLength = true;\n      if (this.parent) {\n        this.parent._flagLength = true;\n      }\n    },\n\n    /**\n     * @name Two.Path.BindVertices\n     * @function\n     * @description Cached method to let {@link Two.Path} know vertices have been added to the instance.\n     */\n    BindVertices: function(items) {\n\n      // This function is called a lot\n      // when importing a large SVG\n      var i = items.length;\n      while (i--) {\n        items[i].bind(Two.Events.change, this._renderer.flagVertices);\n      }\n\n      this._renderer.flagVertices();\n\n    },\n\n    /**\n     * @name Two.Path.BindVertices\n     * @function\n     * @description Cached method to let {@link Two.Path} know vertices have been removed from the instance.\n     */\n    UnbindVertices: function(items) {\n\n      var i = items.length;\n      while (i--) {\n        items[i].unbind(Two.Events.change, this._renderer.flagVertices);\n      }\n\n      this._renderer.flagVertices();\n\n    },\n\n    /**\n     * @name Two.Path.FlagFill\n     * @function\n     * @description Cached method to let {@link Two.Path} know the fill has changed.\n     */\n    FlagFill: function() {\n      this._flagFill = true;\n    },\n\n    /**\n     * @name Two.Path.FlagFill\n     * @function\n     * @description Cached method to let {@link Two.Path} know the stroke has changed.\n     */\n    FlagStroke: function() {\n      this._flagStroke = true;\n    },\n\n    /**\n     * @name Two.Path.MakeObservable\n     * @function\n     * @param {Object} object - The object to make observable.\n     * @description Convenience function to apply observable qualities of a `Two.Path` to any object. Handy if you'd like to extend the `Two.Path` class on a custom class.\n     */\n    MakeObservable: function(object) {\n\n      Two.Shape.MakeObservable(object);\n\n      // Only the 7 defined properties are flagged like this. The subsequent\n      // properties behave differently and need to be hand written.\n      _.each(Path.Properties.slice(2, 9), Two.Utils.defineProperty, object);\n\n      Object.defineProperty(object, 'fill', {\n        enumerable: true,\n        get: function() {\n          return this._fill;\n        },\n        set: function(f) {\n\n          if (this._fill instanceof Two.Gradient\n            || this._fill instanceof Two.LinearGradient\n            || this._fill instanceof Two.RadialGradient\n            || this._fill instanceof Two.Texture) {\n            this._fill.unbind(Two.Events.change, this._renderer.flagFill);\n          }\n\n          this._fill = f;\n          this._flagFill = true;\n\n          if (this._fill instanceof Two.Gradient\n            || this._fill instanceof Two.LinearGradient\n            || this._fill instanceof Two.RadialGradient\n            || this._fill instanceof Two.Texture) {\n            this._fill.bind(Two.Events.change, this._renderer.flagFill);\n          }\n\n        }\n      });\n\n      Object.defineProperty(object, 'stroke', {\n        enumerable: true,\n        get: function() {\n          return this._stroke;\n        },\n        set: function(f) {\n\n          if (this._stroke instanceof Two.Gradient\n            || this._stroke instanceof Two.LinearGradient\n            || this._stroke instanceof Two.RadialGradient\n            || this._stroke instanceof Two.Texture) {\n            this._stroke.unbind(Two.Events.change, this._renderer.flagStroke);\n          }\n\n          this._stroke = f;\n          this._flagStroke = true;\n\n          if (this._stroke instanceof Two.Gradient\n            || this._stroke instanceof Two.LinearGradient\n            || this._stroke instanceof Two.RadialGradient\n            || this._stroke instanceof Two.Texture) {\n            this._stroke.bind(Two.Events.change, this._renderer.flagStroke);\n          }\n\n        }\n      });\n\n      /**\n       * @name Two.Path#length\n       * @property {Number} - The sum of distances between all {@link Two.Path#vertices}.\n       */\n      Object.defineProperty(object, 'length', {\n        get: function() {\n          if (this._flagLength) {\n            this._updateLength();\n          }\n          return this._length;\n        }\n      });\n\n      Object.defineProperty(object, 'closed', {\n        enumerable: true,\n        get: function() {\n          return this._closed;\n        },\n        set: function(v) {\n          this._closed = !!v;\n          this._flagVertices = true;\n        }\n      });\n\n      Object.defineProperty(object, 'curved', {\n        enumerable: true,\n        get: function() {\n          return this._curved;\n        },\n        set: function(v) {\n          this._curved = !!v;\n          this._flagVertices = true;\n        }\n      });\n\n      Object.defineProperty(object, 'automatic', {\n        enumerable: true,\n        get: function() {\n          return this._automatic;\n        },\n        set: function(v) {\n          if (v === this._automatic) {\n            return;\n          }\n          this._automatic = !!v;\n          var method = this._automatic ? 'ignore' : 'listen';\n          _.each(this.vertices, function(v) {\n            v[method]();\n          });\n        }\n      });\n\n      Object.defineProperty(object, 'beginning', {\n        enumerable: true,\n        get: function() {\n          return this._beginning;\n        },\n        set: function(v) {\n          this._beginning = v;\n          this._flagVertices = true;\n        }\n      });\n\n      Object.defineProperty(object, 'ending', {\n        enumerable: true,\n        get: function() {\n          return this._ending;\n        },\n        set: function(v) {\n          this._ending = v;\n          this._flagVertices = true;\n        }\n      });\n\n      Object.defineProperty(object, 'vertices', {\n\n        enumerable: true,\n\n        get: function() {\n          return this._collection;\n        },\n\n        set: function(vertices) {\n\n          var updateVertices = this._renderer.flagVertices;\n          var bindVertices = this._renderer.bindVertices;\n          var unbindVertices = this._renderer.unbindVertices;\n\n          // Remove previous listeners\n          if (this._collection) {\n            this._collection\n              .unbind(Two.Events.insert, bindVertices)\n              .unbind(Two.Events.remove, unbindVertices);\n          }\n\n          // Create new Collection with copy of vertices\n          if (vertices instanceof Two.Utils.Collection) {\n            this._collection = vertices;\n          } else {\n            this._collection = new Two.Utils.Collection(vertices || []);\n          }\n\n\n          // Listen for Collection changes and bind / unbind\n          this._collection\n            .bind(Two.Events.insert, bindVertices)\n            .bind(Two.Events.remove, unbindVertices);\n\n          // Bind Initial Vertices\n          bindVertices(this._collection);\n\n        }\n\n      });\n\n      /**\n       * @name Two.Path#clip\n       * @property {Two.Shape} - Object to define clipping area.\n       * @nota-bene This property is currently not working becuase of SVG spec issues found here {@link https://code.google.com/p/chromium/issues/detail?id=370951}.\n       */\n      Object.defineProperty(object, 'clip', {\n        enumerable: true,\n        get: function() {\n          return this._clip;\n        },\n        set: function(v) {\n          this._clip = v;\n          this._flagClip = true;\n        }\n      });\n\n    }\n\n  });\n\n  _.extend(Path.prototype, Two.Shape.prototype, {\n\n    // Flags\n    // http://en.wikipedia.org/wiki/Flag\n\n    /**\n     * @name Two.Path#_flagVertices\n     * @private\n     * @property {Boolean} - Determines whether the {@link Two.Path#vertices} need updating.\n     */\n    _flagVertices: true,\n\n    /**\n     * @name Two.Path#_flagLength\n     * @private\n     * @property {Boolean} - Determines whether the {@link Two.Path#length} needs updating.\n     */\n    _flagLength: true,\n\n    /**\n     * @name Two.Path#_flagFill\n     * @private\n     * @property {Boolean} - Determines whether the {@link Two.Path#fill} needs updating.\n     */\n    _flagFill: true,\n\n    /**\n     * @name Two.Path#_flagStroke\n     * @private\n     * @property {Boolean} - Determines whether the {@link Two.Path#stroke} needs updating.\n     */\n    _flagStroke: true,\n\n    /**\n     * @name Two.Path#_flagLinewidth\n     * @private\n     * @property {Boolean} - Determines whether the {@link Two.Path#linewidth} needs updating.\n     */\n    _flagLinewidth: true,\n\n    /**\n     * @name Two.Path#_flagOpacity\n     * @private\n     * @property {Boolean} - Determines whether the {@link Two.Path#opacity} needs updating.\n     */\n    _flagOpacity: true,\n\n    /**\n     * @name Two.Path#_flagVisible\n     * @private\n     * @property {Boolean} - Determines whether the {@link Two.Path#visible} needs updating.\n     */\n    _flagVisible: true,\n\n    /**\n     * @name Two.Path#_flagClassName\n     * @private\n     * @property {Boolean} - Determines whether the {@link Two.Path#className} needs updating.\n     */\n    _flagClassName: true,\n\n    /**\n     * @name Two.Path#_flagCap\n     * @private\n     * @property {Boolean} - Determines whether the {@link Two.Path#cap} needs updating.\n     */\n    _flagCap: true,\n\n    /**\n     * @name Two.Path#_flagJoin\n     * @private\n     * @property {Boolean} - Determines whether the {@link Two.Path#join} needs updating.\n     */\n    _flagJoin: true,\n\n    /**\n     * @name Two.Path#_flagMiter\n     * @private\n     * @property {Boolean} - Determines whether the {@link Two.Path#miter} needs updating.\n     */\n    _flagMiter: true,\n\n    /**\n     * @name Two.Path#_flagClip\n     * @private\n     * @property {Boolean} - Determines whether the {@link Two.Path#clip} needs updating.\n     */\n    _flagClip: false,\n\n    // Underlying Properties\n\n    /**\n     * @name Two.Path#_length\n     * @private\n     * @see {@link Two.Path#length}\n     */\n    _length: 0,\n\n    /**\n     * @name Two.Path#_fill\n     * @private\n     * @see {@link Two.Path#fill}\n     */\n    _fill: '#fff',\n\n    /**\n     * @name Two.Path#_stroke\n     * @private\n     * @see {@link Two.Path#stroke}\n     */\n    _stroke: '#000',\n\n    /**\n     * @name Two.Path#_linewidth\n     * @private\n     * @see {@link Two.Path#linewidth}\n     */\n    _linewidth: 1.0,\n\n    /**\n     * @name Two.Path#_opacity\n     * @private\n     * @see {@link Two.Path#opacity}\n     */\n    _opacity: 1.0,\n\n    /**\n     * @name Two.Path#_className\n     * @private\n     * @see {@link Two.Path#className}\n     */\n    _className: '',\n\n    /**\n     * @name Two.Path#_visible\n     * @private\n     * @see {@link Two.Path#visible}\n     */\n    _visible: true,\n\n    /**\n     * @name Two.Path#_cap\n     * @private\n     * @see {@link Two.Path#cap}\n     */\n    _cap: 'round',\n\n    /**\n     * @name Two.Path#_join\n     * @private\n     * @see {@link Two.Path#join}\n     */\n    _join: 'round',\n\n    /**\n     * @name Two.Path#_miter\n     * @private\n     * @see {@link Two.Path#miter}\n     */\n    _miter: 4,\n\n    /**\n     * @name Two.Path#_closed\n     * @private\n     * @see {@link Two.Path#closed}\n     */\n    _closed: true,\n\n    /**\n     * @name Two.Path#_curved\n     * @private\n     * @see {@link Two.Path#curved}\n     */\n    _curved: false,\n\n    /**\n     * @name Two.Path#_automatic\n     * @private\n     * @see {@link Two.Path#automatic}\n     */\n    _automatic: true,\n\n    /**\n     * @name Two.Path#_beginning\n     * @private\n     * @see {@link Two.Path#beginning}\n     */\n    _beginning: 0,\n\n    /**\n     * @name Two.Path#_ending\n     * @private\n     * @see {@link Two.Path#ending}\n     */\n    _ending: 1.0,\n\n    /**\n     * @name Two.Path#_clip\n     * @private\n     * @see {@link Two.Path#clip}\n     */\n    _clip: false,\n\n    constructor: Path,\n\n    /**\n     * @name Two.Path#clone\n     * @function\n     * @param {Two.Group} parent - The parent group or scene to add the clone to.\n     * @returns {Two.Path}\n     * @description Create a new instance of {@link Two.Path} with the same properties of the current path.\n     */\n    clone: function(parent) {\n\n      var clone = new Path();\n\n      clone.vertices = this.vertices;\n\n      for (var i = 0; i < Path.Properties.length; i++) {\n        var k = Path.Properties[i];\n        clone[k] = this[k];\n      }\n\n      clone.translation.copy(this.translation);\n      clone.rotation = this.rotation;\n      clone.scale = this.scale;\n\n      if (parent) {\n        parent.add(clone);\n      }\n\n      return clone._update();\n\n    },\n\n    /**\n     * @name Two.Path#toObject\n     * @function\n     * @returns {Object}\n     * @description Return a JSON compatible plain object that represents the path.\n     */\n    toObject: function() {\n\n      var result = {\n        vertices: _.map(this.vertices, function(v) {\n          return v.toObject();\n        })\n      };\n\n      _.each(Two.Shape.Properties, function(k) {\n        result[k] = this[k];\n      }, this);\n\n      result.translation = this.translation.toObject();\n      result.rotation = this.rotation;\n      result.scale = this.scale instanceof Two.Vector ? this.scale.toObject() : this.scale;\n\n      return result;\n\n    },\n\n    /**\n     * @name Two.Path#noFill\n     * @function\n     * @description Short hand method to set fill to `transparent`.\n     */\n    noFill: function() {\n      this.fill = 'transparent';\n      return this;\n    },\n\n    /**\n     * @name Two.Path#noStroke\n     * @function\n     * @description Short hand method to set stroke to `transparent`.\n     */\n    noStroke: function() {\n      this.stroke = 'transparent';\n      return this;\n    },\n\n    /**\n     * @name Two.Path#corner\n     * @function\n     * @description Orient the vertices of the shape to the upper left-hand corner of the path.\n     */\n    corner: function() {\n\n      var rect = this.getBoundingClientRect(true);\n\n      rect.centroid = {\n        x: rect.left + rect.width / 2,\n        y: rect.top + rect.height / 2\n      };\n\n      _.each(this.vertices, function(v) {\n        v.addSelf(rect.centroid);\n      });\n\n      return this;\n\n    },\n\n    /**\n     * @name Two.Path#center\n     * @function\n     * @description Orient the vertices of the shape to the center of the path.\n     */\n    center: function() {\n\n      var rect = this.getBoundingClientRect(true);\n\n      rect.centroid = {\n        x: rect.left + rect.width / 2,\n        y: rect.top + rect.height / 2\n      };\n\n      _.each(this.vertices, function(v) {\n        v.subSelf(rect.centroid);\n      });\n\n      // this.translation.addSelf(rect.centroid);\n\n      return this;\n\n    },\n\n    /**\n     * @name Two.Path#remove\n     * @function\n     * @description Remove self from the scene / parent.\n     */\n    remove: function() {\n\n      if (!this.parent) {\n        return this;\n      }\n\n      this.parent.remove(this);\n\n      return this;\n\n    },\n\n    /**\n     * @name Two.Path#getBoundingClientRect\n     * @function\n     * @param {Boolean} [shallow=false] - Describes whether to calculate off local matrix or world matrix.\n     * @returns {Object} - Returns object with top, left, right, bottom, width, height attributes.\n     * @description Return an object with top, left, right, bottom, width, and height parameters of the path.\n     */\n    getBoundingClientRect: function(shallow) {\n      var matrix, border, l, x, y, i, v0, c0, c1, v1;\n\n      var left = Infinity, right = -Infinity,\n          top = Infinity, bottom = -Infinity;\n\n      // TODO: Update this to not __always__ update. Just when it needs to.\n      this._update(true);\n\n      matrix = !!shallow ? this._matrix : getComputedMatrix(this);\n\n      border = this.linewidth / 2;\n      l = this._renderer.vertices.length;\n\n      if (l <= 0) {\n        v = matrix.multiply(0, 0, 1);\n        return {\n          top: v.y,\n          left: v.x,\n          right: v.x,\n          bottom: v.y,\n          width: 0,\n          height: 0\n        };\n      }\n\n      for (i = 1; i < l; i++) {\n\n        v1 = this._renderer.vertices[i];\n        v0 = this._renderer.vertices[i - 1];\n\n        if (v0.controls && v1.controls) {\n\n          if (v0.relative) {\n            c0 = matrix.multiply(\n              v0.controls.right.x + v0.x, v0.controls.right.y + v0.y, 1);\n          } else {\n            c0 = matrix.multiply(\n              v0.controls.right.x, v0.controls.right.y, 1);\n          }\n          v0 = matrix.multiply(v0.x, v0.y, 1);\n\n          if (v1.relative) {\n            c1 = matrix.multiply(\n              v1.controls.left.x + v1.x, v1.controls.left.y + v1.y, 1);\n          } else {\n            c1 = matrix.multiply(\n              v1.controls.left.x, v1.controls.left.y, 1);\n          }\n          v1 = matrix.multiply(v1.x, v1.y, 1);\n\n          var bb = Two.Utils.getCurveBoundingBox(\n            v0.x, v0.y, c0.x, c0.y, c1.x, c1.y, v1.x, v1.y);\n\n          top = min(bb.min.y - border, top);\n          left = min(bb.min.x - border, left);\n          right = max(bb.max.x + border, right);\n          bottom = max(bb.max.y + border, bottom);\n\n        } else {\n\n          if (i <= 1) {\n\n            v0 = matrix.multiply(v0.x, v0.y, 1);\n\n            top = min(v0.y - border, top);\n            left = min(v0.x - border, left);\n            right = max(v0.x + border, right);\n            bottom = max(v0.y + border, bottom);\n\n          }\n\n          v1 = matrix.multiply(v1.x, v1.y, 1);\n\n          top = min(v1.y - border, top);\n          left = min(v1.x - border, left);\n          right = max(v1.x + border, right);\n          bottom = max(v1.y + border, bottom);\n\n        }\n\n      }\n\n      return {\n        top: top,\n        left: left,\n        right: right,\n        bottom: bottom,\n        width: right - left,\n        height: bottom - top\n      };\n\n    },\n\n    /**\n     * @name Two.Path#getPointAt\n     * @function\n     * @param {Boolean} t - Percentage value describing where on the Two.Path to estimate and assign coordinate values.\n     * @param {Two.Vector} [obj=undefined] - Object to apply calculated x, y to. If none available returns new Object.\n     * @returns {Object}\n     * @description Given a float `t` from 0 to 1, return a point or assign a passed `obj`'s coordinates to that percentage on this Two.Path's curve.\n     */\n    getPointAt: function(t, obj) {\n\n      var ia, ib, result;\n      var x, x1, x2, x3, x4, y, y1, y2, y3, y4, left, right;\n      var target = this.length * Math.min(Math.max(t, 0), 1);\n      var length = this.vertices.length;\n      var last = length - 1;\n\n      var a = null;\n      var b = null;\n\n      for (var i = 0, l = this._lengths.length, sum = 0; i < l; i++) {\n\n        if (sum + this._lengths[i] >= target) {\n\n          if (this._closed) {\n            ia = Two.Utils.mod(i, length);\n            ib = Two.Utils.mod(i - 1, length);\n            if (i === 0) {\n              ia = ib;\n              ib = i;\n            }\n          } else {\n            ia = i;\n            ib = Math.min(Math.max(i - 1, 0), last);\n          }\n\n          a = this.vertices[ia];\n          b = this.vertices[ib];\n          target -= sum;\n          if (this._lengths[i] !== 0) {\n            t = target / this._lengths[i];\n          } else {\n            t = 0;\n          }\n\n          break;\n\n        }\n\n        sum += this._lengths[i];\n\n      }\n\n      if (_.isNull(a) || _.isNull(b)) {\n        return null;\n      }\n\n      if (!a) {\n        return b;\n      } else if (!b) {\n        return a;\n      }\n\n      right = b.controls && b.controls.right;\n      left = a.controls && a.controls.left;\n\n      x1 = b.x;\n      y1 = b.y;\n      x2 = (right || b).x;\n      y2 = (right || b).y;\n      x3 = (left || a).x;\n      y3 = (left || a).y;\n      x4 = a.x;\n      y4 = a.y;\n\n      if (right && b.relative) {\n        x2 += b.x;\n        y2 += b.y;\n      }\n\n      if (left && a.relative) {\n        x3 += a.x;\n        y3 += a.y;\n      }\n\n      x = Two.Utils.getComponentOnCubicBezier(t, x1, x2, x3, x4);\n      y = Two.Utils.getComponentOnCubicBezier(t, y1, y2, y3, y4);\n\n      // Higher order points for control calculation.\n      var t1x = Two.Utils.lerp(x1, x2, t);\n      var t1y = Two.Utils.lerp(y1, y2, t);\n      var t2x = Two.Utils.lerp(x2, x3, t);\n      var t2y = Two.Utils.lerp(y2, y3, t);\n      var t3x = Two.Utils.lerp(x3, x4, t);\n      var t3y = Two.Utils.lerp(y3, y4, t);\n\n      // Calculate the returned points control points.\n      var brx = Two.Utils.lerp(t1x, t2x, t);\n      var bry = Two.Utils.lerp(t1y, t2y, t);\n      var alx = Two.Utils.lerp(t2x, t3x, t);\n      var aly = Two.Utils.lerp(t2y, t3y, t);\n\n      if (_.isObject(obj)) {\n\n        obj.x = x;\n        obj.y = y;\n\n        if (!_.isObject(obj.controls)) {\n          Two.Anchor.AppendCurveProperties(obj);\n        }\n\n        obj.controls.left.x = brx;\n        obj.controls.left.y = bry;\n        obj.controls.right.x = alx;\n        obj.controls.right.y = aly;\n\n        if (!_.isBoolean(obj.relative) || obj.relative) {\n          obj.controls.left.x -= x;\n          obj.controls.left.y -= y;\n          obj.controls.right.x -= x;\n          obj.controls.right.y -= y;\n        }\n\n        obj.t = t;\n\n        return obj;\n\n      }\n\n      result = new Two.Anchor(\n        x, y, brx - x, bry - y, alx - x, aly - y,\n        this._curved ? Two.Commands.curve : Two.Commands.line\n      );\n\n      result.t = t;\n\n      return result;\n\n    },\n\n    /**\n     * @name Two.Path#plot\n     * @function\n     * @description Based on closed / curved and sorting of vertices plot where all points should be and where the respective handles should be too.\n     * @nota-bene While this method is public it is internally called by {@link Two.Path#_update} when `automatic = true`.\n     */\n    plot: function() {\n\n      if (this.curved) {\n        Two.Utils.getCurveFromPoints(this._collection, this.closed);\n        return this;\n      }\n\n      for (var i = 0; i < this._collection.length; i++) {\n        this._collection[i].command = i === 0 ? Two.Commands.move : Two.Commands.line;\n      }\n\n      return this;\n\n    },\n\n    /**\n     * @name Two.Path#subdivide\n     * @function\n     * @param {Integer} limit - How many times to recurse subdivisions.\n     * @description Insert a {@link Two.Anchor} at the midpoint between every item in {@link Two.Path#vertices}.\n     */\n    subdivide: function(limit) {\n      //TODO: DRYness (function below)\n      this._update();\n\n      var last = this.vertices.length - 1;\n      var b = this.vertices[last];\n      var closed = this._closed || this.vertices[last]._command === Two.Commands.close;\n      var points = [];\n      _.each(this.vertices, function(a, i) {\n\n        if (i <= 0 && !closed) {\n          b = a;\n          return;\n        }\n\n        if (a.command === Two.Commands.move) {\n          points.push(new Two.Anchor(b.x, b.y));\n          if (i > 0) {\n            points[points.length - 1].command = Two.Commands.line;\n          }\n          b = a;\n          return;\n        }\n\n        var verts = getSubdivisions(a, b, limit);\n        points = points.concat(verts);\n\n        // Assign commands to all the verts\n        _.each(verts, function(v, i) {\n          if (i <= 0 && b.command === Two.Commands.move) {\n            v.command = Two.Commands.move;\n          } else {\n            v.command = Two.Commands.line;\n          }\n        });\n\n        if (i >= last) {\n\n          // TODO: Add check if the two vectors in question are the same values.\n          if (this._closed && this._automatic) {\n\n            b = a;\n\n            verts = getSubdivisions(a, b, limit);\n            points = points.concat(verts);\n\n            // Assign commands to all the verts\n            _.each(verts, function(v, i) {\n              if (i <= 0 && b.command === Two.Commands.move) {\n                v.command = Two.Commands.move;\n              } else {\n                v.command = Two.Commands.line;\n              }\n            });\n\n          } else if (closed) {\n            points.push(new Two.Anchor(a.x, a.y));\n          }\n\n          points[points.length - 1].command = closed\n            ? Two.Commands.close : Two.Commands.line;\n\n        }\n\n        b = a;\n\n      }, this);\n\n      this._automatic = false;\n      this._curved = false;\n      this.vertices = points;\n\n      return this;\n\n    },\n\n    /**\n     * @name Two.Path#_updateLength\n     * @function\n     * @private\n     * @param {Integer} [limit=] -\n     * @param {Boolean} [silent=false] - If set to `true` then the path isn't updated before calculation. Useful for internal use.\n     * @description Recalculate the {@link Two.Path#length} value.\n     */\n    _updateLength: function(limit, silent) {\n      //TODO: DRYness (function above)\n      if (!silent) {\n        this._update();\n      }\n\n      var length = this.vertices.length;\n      var last = length - 1;\n      var b = this.vertices[last];\n      var closed = false;//this._closed || this.vertices[last]._command === Two.Commands.close;\n      var sum = 0;\n\n      if (_.isUndefined(this._lengths)) {\n        this._lengths = [];\n      }\n\n      _.each(this.vertices, function(a, i) {\n\n        if ((i <= 0 && !closed) || a.command === Two.Commands.move) {\n          b = a;\n          this._lengths[i] = 0;\n          return;\n        }\n\n        this._lengths[i] = getCurveLength(a, b, limit);\n        this._lengths[i] = Two.Utils.toFixed(this._lengths[i]);\n        sum += this._lengths[i];\n\n        if (i >= last && closed) {\n\n          b = this.vertices[(i + 1) % length];\n\n          this._lengths[i + 1] = getCurveLength(a, b, limit);\n          this._lengths[i + 1] = Two.Utils.toFixed(this._lengths[i + 1]);\n          sum += this._lengths[i + 1];\n\n        }\n\n        b = a;\n\n      }, this);\n\n      this._length = sum;\n      this._flagLength = false;\n\n      return this;\n\n    },\n\n    /**\n     * @name Two.Path#_update\n     * @function\n     * @private\n     * @param {Boolean} [bubbles=false] - Force the parent to `_update` as well.\n     * @description This is called before rendering happens by the renderer. This applies all changes necessary so that rendering is up-to-date but not updated more than it needs to be.\n     * @nota-bene Try not to call this method more than once a frame.\n     */\n    _update: function() {\n\n      if (this._flagVertices) {\n\n        if (this._automatic) {\n          this.plot();\n        }\n\n        if (this._flagLength) {\n          this._updateLength(undefined, true);\n        }\n\n        var l = this._collection.length;\n        var last = l - 1;\n        var closed = this._closed;\n\n        var beginning = Math.min(this._beginning, this._ending);\n        var ending = Math.max(this._beginning, this._ending);\n\n        var bid = getIdByLength(this, beginning * this._length);\n        var eid = getIdByLength(this, ending * this._length);\n\n        var low = ceil(bid);\n        var high = floor(eid);\n\n        var left, right, prev, next, v;\n\n        this._renderer.vertices.length = 0;\n\n        for (var i = 0; i < l; i++) {\n\n          if (this._renderer.collection.length <= i) {\n            // Expected to be `relative` anchor points.\n            this._renderer.collection.push(new Two.Anchor());\n          }\n\n          if (i > high && !right) {\n\n            v = this._renderer.collection[i];\n            v.copy(this._collection[i]);\n            this.getPointAt(ending, v);\n            v.command = this._renderer.collection[i].command;\n            this._renderer.vertices.push(v);\n\n            right = v;\n            prev = this._collection[i - 1];\n\n            // Project control over the percentage `t`\n            // of the in-between point\n            if (prev && prev.controls) {\n\n              v.controls.right.clear();\n\n              this._renderer.collection[i - 1].controls.right\n                .clear()\n                .lerp(prev.controls.right, v.t);\n\n            }\n\n          } else if (i >= low && i <= high) {\n\n            v = this._renderer.collection[i]\n              .copy(this._collection[i]);\n            this._renderer.vertices.push(v);\n\n            if (i === high && contains(this, ending)) {\n              right = v;\n              if (!closed && right.controls) {\n                right.controls.right.clear();\n              }\n            } else if (i === low && contains(this, beginning)) {\n              left = v;\n              left.command = Two.Commands.move;\n              if (!closed && left.controls) {\n                left.controls.left.clear();\n              }\n            }\n\n          }\n\n        }\n\n        // Prepend the trimmed point if necessary.\n        if (low > 0 && !left) {\n\n          i = low - 1;\n\n          v = this._renderer.collection[i];\n          v.copy(this._collection[i]);\n          this.getPointAt(beginning, v);\n          v.command = Two.Commands.move;\n          this._renderer.vertices.unshift(v);\n\n          left = v;\n          next = this._collection[i + 1];\n\n          // Project control over the percentage `t`\n          // of the in-between point\n          if (next && next.controls) {\n\n            v.controls.left.clear();\n\n            this._renderer.collection[i + 1].controls.left\n              .copy(next.controls.left)\n              .lerp(Two.Vector.zero, v.t);\n\n          }\n\n        }\n\n      }\n\n      Two.Shape.prototype._update.apply(this, arguments);\n\n      return this;\n\n    },\n\n    /**\n     * @name Two.Path#flagReset\n     * @function\n     * @private\n     * @description Called internally to reset all flags. Ensures that only properties that change are updated before being sent to the renderer.\n     */\n    flagReset: function() {\n\n      this._flagVertices =  this._flagFill =  this._flagStroke =\n         this._flagLinewidth = this._flagOpacity = this._flagVisible =\n         this._flagCap = this._flagJoin = this._flagMiter =\n         this._flagClassName = this._flagClip = false;\n\n      Two.Shape.prototype.flagReset.call(this);\n\n      return this;\n\n    }\n\n  });\n\n  Path.MakeObservable(Path.prototype);\n\n   // Utility functions\n\n  function contains(path, t) {\n\n    if (t === 0 || t === 1) {\n      return true;\n    }\n\n    var length = path._length;\n    var target = length * t;\n    var elapsed = 0;\n\n    for (var i = 0; i < path._lengths.length; i++) {\n      var dist = path._lengths[i];\n      if (elapsed >= target) {\n        return target - elapsed >= 0;\n      }\n      elapsed += dist;\n    }\n\n    return false;\n\n  }\n\n  /**\n   * @protected\n   * @param {Two.Path} path - The path to analyze against.\n   * @param {Number} target - The target length at which to find an anchor.\n   * @returns {Integer}\n   * @description Return the id of an anchor based on a target length.\n   */\n  function getIdByLength(path, target) {\n\n    var total = path._length;\n\n    if (target <= 0) {\n      return 0;\n    } else if (target >= total) {\n      return path._lengths.length - 1;\n    }\n\n    for (var i = 0, sum = 0; i < path._lengths.length; i++) {\n\n      if (sum + path._lengths[i] >= target) {\n        target -= sum;\n        return Math.max(i - 1, 0) + target / path._lengths[i];\n      }\n\n      sum += path._lengths[i];\n\n    }\n\n    return - 1;\n\n  }\n\n  function getCurveLength(a, b, limit) {\n    // TODO: DRYness\n    var x1, x2, x3, x4, y1, y2, y3, y4;\n\n    var right = b.controls && b.controls.right;\n    var left = a.controls && a.controls.left;\n\n    x1 = b.x;\n    y1 = b.y;\n    x2 = (right || b).x;\n    y2 = (right || b).y;\n    x3 = (left || a).x;\n    y3 = (left || a).y;\n    x4 = a.x;\n    y4 = a.y;\n\n    if (right && b._relative) {\n      x2 += b.x;\n      y2 += b.y;\n    }\n\n    if (left && a._relative) {\n      x3 += a.x;\n      y3 += a.y;\n    }\n\n    return Two.Utils.getCurveLength(x1, y1, x2, y2, x3, y3, x4, y4, limit);\n\n  }\n\n  function getSubdivisions(a, b, limit) {\n    // TODO: DRYness\n    var x1, x2, x3, x4, y1, y2, y3, y4;\n\n    var right = b.controls && b.controls.right;\n    var left = a.controls && a.controls.left;\n\n    x1 = b.x;\n    y1 = b.y;\n    x2 = (right || b).x;\n    y2 = (right || b).y;\n    x3 = (left || a).x;\n    y3 = (left || a).y;\n    x4 = a.x;\n    y4 = a.y;\n\n    if (right && b._relative) {\n      x2 += b.x;\n      y2 += b.y;\n    }\n\n    if (left && a._relative) {\n      x3 += a.x;\n      y3 += a.y;\n    }\n\n    return Two.Utils.subdivide(x1, y1, x2, y2, x3, y3, x4, y4, limit);\n\n  }\n\n})((typeof global !== 'undefined' ? global : (this || window)).Two);\n\n(function(Two) {\n\n  var Path = Two.Path;\n  var _ = Two.Utils;\n\n  var Line = Two.Line = function(x1, y1, x2, y2) {\n\n    var width = x2 - x1;\n    var height = y2 - y1;\n\n    var w2 = width / 2;\n    var h2 = height / 2;\n\n    Path.call(this, [\n        new Two.Anchor(x1, y1),\n        new Two.Anchor(x2, y2)\n    ]);\n\n    this.vertices[0].command = Two.Commands.move;\n    this.vertices[1].command = Two.Commands.line;\n\n    this.automatic = false;\n\n  };\n\n  _.extend(Line.prototype, Path.prototype);\n  Line.prototype.constructor = Line;\n\n  Path.MakeObservable(Line.prototype);\n\n})((typeof global !== 'undefined' ? global : (this || window)).Two);\n\n(function(Two) {\n\n  var Path = Two.Path;\n  var _ = Two.Utils;\n\n  var Rectangle = Two.Rectangle = function(x, y, width, height) {\n\n    Path.call(this, [\n      new Two.Anchor(),\n      new Two.Anchor(),\n      new Two.Anchor(),\n      new Two.Anchor()\n      // new Two.Anchor() // TODO: Figure out how to handle this for `beginning` / `ending` animations\n    ], true, false, true);\n\n    this.width = width;\n    this.height = height;\n\n    this.origin = new Two.Vector();\n    this.translation.set(x, y);\n\n    this._update();\n\n  };\n\n  _.extend(Rectangle, {\n\n    Properties: ['width', 'height'],\n\n    MakeObservable: function(object) {\n\n      Path.MakeObservable(object);\n      _.each(Rectangle.Properties, Two.Utils.defineProperty, object);\n\n      Object.defineProperty(object, 'origin', {\n        enumerable: true,\n        get: function() {\n          return this._origin;\n        },\n        set: function(v) {\n          if (this._origin) {\n            this._origin.unbind(Two.Events.change, this._renderer.flagVertices);\n          }\n          this._origin = v;\n          this._origin.bind(Two.Events.change, this._renderer.flagVertices);\n          this._renderer.flagVertices();\n        }\n      });\n\n    }\n\n  });\n\n  _.extend(Rectangle.prototype, Path.prototype, {\n\n    _width: 0,\n    _height: 0,\n\n    _flagWidth: 0,\n    _flagHeight: 0,\n\n    _origin: null,\n\n    constructor: Rectangle,\n\n    _update: function() {\n\n      if (this._flagWidth || this._flagHeight) {\n\n        var xr = this._width / 2;\n        var yr = this._height / 2;\n\n        this.vertices[0].set(-xr, -yr).add(this._origin).command = Two.Commands.move;\n        this.vertices[1].set(xr, -yr).add(this._origin).command = Two.Commands.line;\n        this.vertices[2].set(xr, yr).add(this._origin).command = Two.Commands.line;\n        this.vertices[3].set(-xr, yr).add(this._origin).command = Two.Commands.line;\n        // FYI: Two.Sprite and Two.ImageSequence have 4 verts\n        if (this.vertices[4]) {\n          this.vertices[4].set(-xr, -yr).add(this._origin).command = Two.Commands.line;\n        }\n\n      }\n\n      Path.prototype._update.call(this);\n\n      return this;\n\n    },\n\n    flagReset: function() {\n\n      this._flagWidth = this._flagHeight = false;\n      Path.prototype.flagReset.call(this);\n\n      return this;\n\n    },\n\n    clone: function(parent) {\n\n      var clone = new Rectangle(0, 0, this.width, this.height);\n      clone.translation.copy(this.translation);\n      clone.rotation = this.rotation;\n      clone.scale = this.scale;\n\n      _.each(Two.Path.Properties, function(k) {\n        clone[k] = this[k];\n      }, this);\n\n      if (parent) {\n        parent.add(clone);\n      }\n\n      return clone;\n\n    }\n\n  });\n\n  Rectangle.MakeObservable(Rectangle.prototype);\n\n})((typeof global !== 'undefined' ? global : (this || window)).Two);\n\n(function(Two) {\n\n  var Path = Two.Path, TWO_PI = Math.PI * 2, HALF_PI = Math.PI / 2;\n  var cos = Math.cos, sin = Math.sin;\n  var _ = Two.Utils;\n\n  // Circular coefficient\n  var c = (4 / 3) * Math.tan(Math.PI / 8);\n\n  var Ellipse = Two.Ellipse = function(ox, oy, rx, ry, resolution) {\n\n    if (!_.isNumber(ry)) {\n      ry = rx;\n    }\n\n    var amount = resolution || 5;\n\n    var points = _.map(_.range(amount), function(i) {\n      return new Two.Anchor();\n    }, this);\n\n    Path.call(this, points, true, true, true);\n\n    this.width = rx * 2;\n    this.height = ry * 2;\n\n    this._update();\n    this.translation.set(ox, oy);\n\n  };\n\n  _.extend(Ellipse, {\n\n    Properties: ['width', 'height'],\n\n    MakeObservable: function(obj) {\n\n      Path.MakeObservable(obj);\n      _.each(Ellipse.Properties, Two.Utils.defineProperty, obj);\n\n    }\n\n  });\n\n  _.extend(Ellipse.prototype, Path.prototype, {\n\n    _width: 0,\n    _height: 0,\n\n    _flagWidth: false,\n    _flagHeight: false,\n\n    constructor: Ellipse,\n\n    _update: function() {\n\n      if (this._flagWidth || this._flagHeight) {\n        for (var i = 0, l = this.vertices.length, last = l - 1; i < l; i++) {\n\n          var pct = i / last;\n          var theta = pct * TWO_PI;\n\n          var rx = this._width / 2;\n          var ry = this._height / 2;\n          var ct = cos(theta);\n          var st = sin(theta);\n\n          var x = rx * cos(theta);\n          var y = ry * sin(theta);\n\n          var lx = i === 0 ? 0 : rx * c * cos(theta - HALF_PI);\n          var ly = i === 0 ? 0 : ry * c * sin(theta - HALF_PI);\n\n          var rx = i === last ? 0 : rx * c * cos(theta + HALF_PI);\n          var ry = i === last ? 0 : ry * c * sin(theta + HALF_PI);\n\n          var v = this.vertices[i];\n\n          v.command = i === 0 ? Two.Commands.move : Two.Commands.curve;\n          v.set(x, y);\n          v.controls.left.set(lx, ly);\n          v.controls.right.set(rx, ry);\n\n        }\n      }\n\n      Path.prototype._update.call(this);\n      return this;\n\n    },\n\n    flagReset: function() {\n\n      this._flagWidth = this._flagHeight = false;\n\n      Path.prototype.flagReset.call(this);\n      return this;\n\n    },\n\n    clone: function(parent) {\n\n      var rx = this.width / 2;\n      var ry = this.height / 2;\n      var resolution = this.vertices.length;\n      var clone = new Ellipse(0, 0, rx, ry, resolution);\n\n      clone.translation.copy(this.translation);\n      clone.rotation = this.rotation;\n      clone.scale = this.scale;\n\n      _.each(Two.Path.Properties, function(k) {\n        clone[k] = this[k];\n      }, this);\n\n      if (parent) {\n        parent.add(clone);\n      }\n\n      return clone;\n\n    }\n\n  });\n\n  Ellipse.MakeObservable(Ellipse.prototype);\n\n})((typeof global !== 'undefined' ? global : (this || window)).Two);\n\n(function(Two) {\n\n  var Path = Two.Path, TWO_PI = Math.PI * 2, HALF_PI = Math.PI / 2;\n  var cos = Math.cos, sin = Math.sin;\n  var _ = Two.Utils;\n\n  // Circular coefficient\n  var c = (4 / 3) * Math.tan(Math.PI / 8);\n\n  var Circle = Two.Circle = function(ox, oy, r, res) {\n\n    var amount = res || 5;\n\n    var points = _.map(_.range(amount), function(i) {\n      return new Two.Anchor();\n    }, this);\n\n    Path.call(this, points, true, true, true);\n\n    this.radius = r;\n\n    this._update();\n    this.translation.set(ox, oy);\n\n  };\n\n  _.extend(Circle, {\n\n    Properties: ['radius'],\n\n    MakeObservable: function(obj) {\n\n      Path.MakeObservable(obj);\n      _.each(Circle.Properties, Two.Utils.defineProperty, obj);\n\n    }\n\n  });\n\n  _.extend(Circle.prototype, Path.prototype, {\n\n    _radius: 0,\n    _flagRadius: false,\n\n    constructor: Circle,\n\n    _update: function() {\n\n      if (this._flagRadius) {\n        for (var i = 0, l = this.vertices.length, last = l - 1; i < l; i++) {\n\n          var pct = i / last;\n          var theta = pct * TWO_PI;\n\n          var radius = this._radius;\n          var ct = cos(theta);\n          var st = sin(theta);\n          var rc = radius * c;\n\n          var x = radius * cos(theta);\n          var y = radius * sin(theta);\n\n          var lx = i === 0 ? 0 : rc * cos(theta - HALF_PI);\n          var ly = i === 0 ? 0 : rc * sin(theta - HALF_PI);\n\n          var rx = i === last ? 0 : rc * cos(theta + HALF_PI);\n          var ry = i === last ? 0 : rc * sin(theta + HALF_PI);\n\n          var v = this.vertices[i];\n\n          v.command = i === 0 ? Two.Commands.move : Two.Commands.curve;\n          v.set(x, y);\n          v.controls.left.set(lx, ly);\n          v.controls.right.set(rx, ry);\n\n        }\n      }\n\n      Path.prototype._update.call(this);\n      return this;\n\n    },\n\n    flagReset: function() {\n\n      this._flagRadius = false;\n\n      Path.prototype.flagReset.call(this);\n      return this;\n\n    },\n\n    clone: function(parent) {\n\n      var clone = new Circle(0, 0, this.radius, this.vertices.length);\n      clone.translation.copy(this.translation);\n      clone.rotation = this.rotation;\n      clone.scale = this.scale;\n\n      _.each(Two.Path.Properties, function(k) {\n        clone[k] = this[k];\n      }, this);\n\n      if (parent) {\n        parent.add(clone);\n      }\n\n      return clone;\n\n    }\n\n  });\n\n  Circle.MakeObservable(Circle.prototype);\n\n})((typeof global !== 'undefined' ? global : (this || window)).Two);\n\n(function(Two) {\n\n  var Path = Two.Path, TWO_PI = Math.PI * 2, cos = Math.cos, sin = Math.sin;\n  var _ = Two.Utils;\n\n  var Polygon = Two.Polygon = function(ox, oy, r, sides) {\n\n    sides = Math.max(sides || 0, 3);\n\n    Path.call(this);\n\n    this.closed = true;\n    this.automatic = false;\n\n    this.width = r * 2;\n    this.height = r * 2;\n    this.sides = sides;\n\n    this._update();\n    this.translation.set(ox, oy);\n\n  };\n\n  _.extend(Polygon, {\n\n    Properties: ['width', 'height', 'sides'],\n\n    MakeObservable: function(obj) {\n\n      Path.MakeObservable(obj);\n      _.each(Polygon.Properties, Two.Utils.defineProperty, obj);\n\n    }\n\n  });\n\n  _.extend(Polygon.prototype, Path.prototype, {\n\n    _width: 0,\n    _height: 0,\n    _sides: 0,\n\n    _flagWidth: false,\n    _flagHeight: false,\n    _flagSides: false,\n\n    constructor: Polygon,\n\n    _update: function() {\n\n      if (this._flagWidth || this._flagHeight || this._flagSides) {\n\n        var sides = this._sides;\n        var amount = sides + 1;\n        var length = this.vertices.length;\n\n        if (length > sides) {\n          this.vertices.splice(sides - 1, length - sides);\n          length = sides;\n        }\n\n        for (var i = 0; i < amount; i++) {\n\n          var pct = (i + 0.5) / sides;\n          var theta = TWO_PI * pct + Math.PI / 2;\n          var x = this._width * cos(theta) / 2;\n          var y = this._height * sin(theta) / 2;\n\n          if (i >= length) {\n            this.vertices.push(new Two.Anchor(x, y));\n          } else {\n            this.vertices[i].set(x, y);\n          }\n\n          this.vertices[i].command = i === 0\n            ? Two.Commands.move : Two.Commands.line;\n\n        }\n\n      }\n\n      Path.prototype._update.call(this);\n      return this;\n\n    },\n\n    flagReset: function() {\n\n      this._flagWidth = this._flagHeight = this._flagSides = false;\n      Path.prototype.flagReset.call(this);\n\n      return this;\n\n    },\n\n    clone: function(parent) {\n\n      var clone = new Polygon(0, 0, this.radius, this.sides);\n      clone.translation.copy(this.translation);\n      clone.rotation = this.rotation;\n      clone.scale = this.scale;\n\n      _.each(Two.Path.Properties, function(k) {\n        clone[k] = this[k];\n      }, this);\n\n      if (parent) {\n        parent.add(clone);\n      }\n\n      return clone;\n\n    }\n\n  });\n\n  Polygon.MakeObservable(Polygon.prototype);\n\n})((typeof global !== 'undefined' ? global : (this || window)).Two);\n\n(function(Two) {\n\n  var Path = Two.Path, PI = Math.PI, TWO_PI = Math.PI * 2, HALF_PI = Math.PI / 2,\n    cos = Math.cos, sin = Math.sin, abs = Math.abs, _ = Two.Utils;\n\n  var ArcSegment = Two.ArcSegment = function(ox, oy, ir, or, sa, ea, res) {\n\n    var amount = res || (Two.Resolution * 3);\n    var points = _.map(_.range(amount), function() {\n      return new Two.Anchor();\n    });\n\n    Path.call(this, points, true, false, true);\n\n    this.innerRadius = ir;\n    this.outerRadius = or;\n\n    this.startAngle = sa;\n    this.endAngle = ea;\n\n    this._update();\n    this.translation.set(ox, oy);\n\n  }\n\n  _.extend(ArcSegment, {\n\n    Properties: ['startAngle', 'endAngle', 'innerRadius', 'outerRadius'],\n\n    MakeObservable: function(obj) {\n\n      Path.MakeObservable(obj);\n      _.each(ArcSegment.Properties, Two.Utils.defineProperty, obj);\n\n    }\n\n  });\n\n  _.extend(ArcSegment.prototype, Path.prototype, {\n\n    _flagStartAngle: false,\n    _flagEndAngle: false,\n    _flagInnerRadius: false,\n    _flagOuterRadius: false,\n\n    _startAngle: 0,\n    _endAngle: TWO_PI,\n    _innerRadius: 0,\n    _outerRadius: 0,\n\n    constructor: ArcSegment,\n\n    _update: function() {\n\n      if (this._flagStartAngle || this._flagEndAngle || this._flagInnerRadius\n        || this._flagOuterRadius) {\n\n        var sa = this._startAngle;\n        var ea = this._endAngle;\n\n        var ir = this._innerRadius;\n        var or = this._outerRadius;\n\n        var connected = mod(sa, TWO_PI) === mod(ea, TWO_PI);\n        var punctured = ir > 0;\n\n        var vertices = this.vertices;\n        var length = (punctured ? vertices.length / 2 : vertices.length);\n        var command, id = 0;\n\n        if (connected) {\n          length--;\n        } else if (!punctured) {\n          length -= 2;\n        }\n\n        /**\n         * Outer Circle\n         */\n        for (var i = 0, last = length - 1; i < length; i++) {\n\n          var pct = i / last;\n          var v = vertices[id];\n          var theta = pct * (ea - sa) + sa;\n          var step = (ea - sa) / length;\n\n          var x = or * Math.cos(theta);\n          var y = or * Math.sin(theta);\n\n          switch (i) {\n            case 0:\n              command = Two.Commands.move;\n              break;\n            default:\n              command = Two.Commands.curve;\n          }\n\n          v.command = command;\n          v.x = x;\n          v.y = y;\n          v.controls.left.clear();\n          v.controls.right.clear();\n\n          if (v.command === Two.Commands.curve) {\n            var amp = or * step / Math.PI;\n            v.controls.left.x = amp * Math.cos(theta - HALF_PI);\n            v.controls.left.y = amp * Math.sin(theta - HALF_PI);\n            v.controls.right.x = amp * Math.cos(theta + HALF_PI);\n            v.controls.right.y = amp * Math.sin(theta + HALF_PI);\n            if (i === 1) {\n              v.controls.left.multiplyScalar(2);\n            }\n            if (i === last) {\n              v.controls.right.multiplyScalar(2);\n            }\n          }\n\n          id++;\n\n        }\n\n        if (punctured) {\n\n          if (connected) {\n            vertices[id].command = Two.Commands.close;\n            id++;\n          } else {\n            length--;\n            last = length - 1;\n          }\n\n          /**\n           * Inner Circle\n           */\n          for (i = 0; i < length; i++) {\n\n            pct = i / last;\n            v = vertices[id];\n            theta = (1 - pct) * (ea - sa) + sa;\n            step = (ea - sa) / length;\n\n            x = ir * Math.cos(theta);\n            y = ir * Math.sin(theta);\n            command = Two.Commands.curve;\n            if (i <= 0) {\n              command = connected ? Two.Commands.move : Two.Commands.line;\n            }\n\n            v.command = command;\n            v.x = x;\n            v.y = y;\n            v.controls.left.clear();\n            v.controls.right.clear();\n\n            if (v.command === Two.Commands.curve) {\n              amp = ir * step / Math.PI;\n              v.controls.left.x = amp * Math.cos(theta + HALF_PI);\n              v.controls.left.y = amp * Math.sin(theta + HALF_PI);\n              v.controls.right.x = amp * Math.cos(theta - HALF_PI);\n              v.controls.right.y = amp * Math.sin(theta - HALF_PI);\n              if (i === 1) {\n                v.controls.left.multiplyScalar(2);\n              }\n              if (i === last) {\n                v.controls.right.multiplyScalar(2);\n              }\n            }\n\n            id++;\n\n          }\n\n          // Final Point\n          vertices[id].copy(vertices[0]);\n          vertices[id].command = Two.Commands.line;\n\n        } else if (!connected) {\n\n          vertices[id].command = Two.Commands.line;\n          vertices[id].x = 0;\n          vertices[id].y = 0;\n          id++;\n\n          // Final Point\n          vertices[id].copy(vertices[0]);\n          vertices[id].command = Two.Commands.line;\n\n        }\n\n      }\n\n      Path.prototype._update.call(this);\n\n      return this;\n\n    },\n\n    flagReset: function() {\n\n      Path.prototype.flagReset.call(this);\n\n      this._flagStartAngle = this._flagEndAngle\n        = this._flagInnerRadius = this._flagOuterRadius = false;\n\n      return this;\n\n    },\n\n    clone: function(parent) {\n\n      var ir = this.innerRadius;\n      var or = this.outerradius;\n      var sa = this.startAngle;\n      var ea = this.endAngle;\n      var resolution = this.vertices.length;\n\n      var clone = new ArcSegment(0, 0, ir, or, sa, ea, resolution);\n      clone.translation.copy(this.translation);\n      clone.rotation = this.rotation;\n      clone.scale = this.scale;\n\n      _.each(Two.Path.Properties, function(k) {\n        clone[k] = this[k];\n      }, this);\n\n      if (parent) {\n        parent.add(clone);\n      }\n\n      return clone;\n\n    }\n\n  });\n\n  ArcSegment.MakeObservable(ArcSegment.prototype);\n\n  function mod(v, l) {\n    while (v < 0) {\n      v += l;\n    }\n    return v % l;\n  }\n\n})((typeof global !== 'undefined' ? global : (this || window)).Two);\n\n(function(Two) {\n\n  var Path = Two.Path, TWO_PI = Math.PI * 2, cos = Math.cos, sin = Math.sin;\n  var _ = Two.Utils;\n\n  var Star = Two.Star = function(ox, oy, ir, or, sides) {\n\n    if (arguments.length <= 3) {\n      or = ir;\n      ir = or / 2;\n    }\n\n    if (!_.isNumber(sides) || sides <= 0) {\n      sides = 5;\n    }\n\n    var length = sides * 2;\n\n    Path.call(this);\n    this.closed = true;\n    this.automatic = false;\n\n    this.innerRadius = ir;\n    this.outerRadius = or;\n    this.sides = sides;\n\n    this._update();\n    this.translation.set(ox, oy);\n\n  };\n\n  _.extend(Star, {\n\n    Properties: ['innerRadius', 'outerRadius', 'sides'],\n\n    MakeObservable: function(obj) {\n\n      Path.MakeObservable(obj);\n      _.each(Star.Properties, Two.Utils.defineProperty, obj);\n\n    }\n\n  });\n\n  _.extend(Star.prototype, Path.prototype, {\n\n    _innerRadius: 0,\n    _outerRadius: 0,\n    _sides: 0,\n\n    _flagInnerRadius: false,\n    _flagOuterRadius: false,\n    _flagSides: false,\n\n    constructor: Star,\n\n    _update: function() {\n\n      if (this._flagInnerRadius || this._flagOuterRadius || this._flagSides) {\n\n        var sides = this._sides * 2;\n        var amount = sides + 1;\n        var length = this.vertices.length;\n\n        if (length > sides) {\n          this.vertices.splice(sides - 1, length - sides);\n          length = sides;\n        }\n\n        for (var i = 0; i < amount; i++) {\n\n          var pct = (i + 0.5) / sides;\n          var theta = TWO_PI * pct;\n          var r = (!(i % 2) ? this._innerRadius : this._outerRadius) / 2;\n          var x = r * cos(theta);\n          var y = r * sin(theta);\n\n          if (i >= length) {\n            this.vertices.push(new Two.Anchor(x, y));\n          } else {\n            this.vertices[i].set(x, y);\n          }\n\n          this.vertices[i].command = i === 0\n            ? Two.Commands.move : Two.Commands.line;\n\n        }\n\n      }\n\n      Path.prototype._update.call(this);\n\n      return this;\n\n    },\n\n    flagReset: function() {\n\n      this._flagInnerRadius = this._flagOuterRadius = this._flagSides = false;\n      Path.prototype.flagReset.call(this);\n\n      return this;\n\n    },\n\n    clone: function(parent) {\n\n      var ir = this.innerRadius;\n      var or = this.outerRadius;\n      var sides = this.sides;\n\n      var clone = new Star(0, 0, ir, or, sides);\n      clone.translation.copy(this.translation);\n      clone.rotation = this.rotation;\n      clone.scale = this.scale;\n\n      _.each(Two.Path.Properties, function(k) {\n        clone[k] = this[k];\n      }, this);\n\n      if (parent) {\n        parent.add(clone);\n      }\n\n      return clone;\n\n    }\n\n  });\n\n  Star.MakeObservable(Star.prototype);\n\n})((typeof global !== 'undefined' ? global : (this || window)).Two);\n\n(function(Two) {\n\n  var Path = Two.Path;\n  var _ = Two.Utils;\n\n  var RoundedRectangle = Two.RoundedRectangle = function(ox, oy, width, height, radius) {\n\n    if (_.isUndefined(radius)) {\n      radius = Math.floor(Math.min(width, height) / 12);\n    }\n\n    var amount = 10;\n\n    var points = _.map(_.range(amount), function(i) {\n      return new Two.Anchor(0, 0, 0, 0, 0, 0,\n        i === 0 ? Two.Commands.move : Two.Commands.curve);\n    });\n\n    // points[points.length - 1].command = Two.Commands.close;\n\n    Path.call(this, points);\n\n    this.closed = true;\n    this.automatic = false;\n\n    this._renderer.flagRadius = _.bind(RoundedRectangle.FlagRadius, this);\n\n    this.width = width;\n    this.height = height;\n    this.radius = radius;\n\n    this._update();\n    this.translation.set(ox, oy);\n\n  };\n\n  _.extend(RoundedRectangle, {\n\n    Properties: ['width', 'height'],\n\n    FlagRadius: function() {\n      this._flagRadius = true;\n    },\n\n    MakeObservable: function(object) {\n\n      Path.MakeObservable(object);\n      _.each(RoundedRectangle.Properties, Two.Utils.defineProperty, object);\n\n      Object.defineProperty(object, 'radius', {\n        enumerable: true,\n        get: function() {\n          return this._radius;\n        },\n        set: function(v) {\n\n          if (this._radius instanceof Two.Vector) {\n            this._radius.unbind(Two.Events.change, this._renderer.flagRadius);\n          }\n\n          this._radius = v;\n\n          if (this._radius instanceof Two.Vector) {\n            this._radius.bind(Two.Events.change, this._renderer.flagRadius);\n          }\n\n          this._flagRadius = true;\n\n        }\n      });\n\n    }\n\n  });\n\n  _.extend(RoundedRectangle.prototype, Path.prototype, {\n\n    _width: 0,\n    _height: 0,\n    _radius: 0,\n\n    _flagWidth: false,\n    _flagHeight: false,\n    _flagRadius: false,\n\n    constructor: RoundedRectangle,\n\n    _update: function() {\n\n      if (this._flagWidth || this._flagHeight || this._flagRadius) {\n\n        var width = this._width;\n        var height = this._height;\n\n        var rx, ry;\n\n        if (this._radius instanceof Two.Vector) {\n          rx = this._radius.x;\n          ry = this._radius.y;\n        } else {\n          rx = this._radius;\n          ry = this._radius;\n        }\n\n        var v;\n        var w = width / 2;\n        var h = height / 2;\n\n        v = this.vertices[0];\n        v.x = - (w - rx);\n        v.y = - h;\n\n        // Upper Right Corner\n\n        v = this.vertices[1];\n        v.x = (w - rx);\n        v.y = - h;\n        v.controls.left.clear();\n        v.controls.right.x = rx;\n        v.controls.right.y = 0;\n\n        v = this.vertices[2];\n        v.x = w;\n        v.y = - (h - ry);\n        v.controls.right.clear();\n        v.controls.left.clear();\n\n        // Bottom Right Corner\n\n        v = this.vertices[3];\n        v.x = w;\n        v.y = (h - ry);\n        v.controls.left.clear();\n        v.controls.right.x = 0;\n        v.controls.right.y = ry;\n\n        v = this.vertices[4];\n        v.x = (w - rx);\n        v.y = h;\n        v.controls.right.clear();\n        v.controls.left.clear();\n\n        // Bottom Left Corner\n\n        v = this.vertices[5];\n        v.x = - (w - rx);\n        v.y = h;\n        v.controls.left.clear();\n        v.controls.right.x = - rx;\n        v.controls.right.y = 0;\n\n        v = this.vertices[6];\n        v.x = - w;\n        v.y = (h - ry);\n        v.controls.left.clear();\n        v.controls.right.clear();\n\n        // Upper Left Corner\n\n        v = this.vertices[7];\n        v.x = - w;\n        v.y = - (h - ry);\n        v.controls.left.clear();\n        v.controls.right.x = 0;\n        v.controls.right.y = - ry;\n\n        v = this.vertices[8];\n        v.x = - (w - rx);\n        v.y = - h;\n        v.controls.left.clear();\n        v.controls.right.clear();\n\n        v = this.vertices[9];\n        v.copy(this.vertices[8]);\n\n      }\n\n      Path.prototype._update.call(this);\n\n      return this;\n\n    },\n\n    flagReset: function() {\n\n      this._flagWidth = this._flagHeight = this._flagRadius = false;\n      Path.prototype.flagReset.call(this);\n\n      return this;\n\n    },\n\n    clone: function(parent) {\n\n      var width = this.width;\n      var height = this.height;\n      var radius = this.radius;\n\n      var clone = new RoundedRectangle(0, 0, width, height, radius);\n      clone.translation.copy(this.translation);\n      clone.rotation = this.rotation;\n      clone.scale = this.scale;\n\n      _.each(Two.Path.Properties, function(k) {\n        clone[k] = this[k];\n      }, this);\n\n      if (parent) {\n        parent.add(clone);\n      }\n\n      return clone;\n\n    }\n\n  });\n\n  RoundedRectangle.MakeObservable(RoundedRectangle.prototype);\n\n})((typeof global !== 'undefined' ? global : (this || window)).Two);\n\n(function(Two) {\n\n  var root = Two.root;\n  var getComputedMatrix = Two.Utils.getComputedMatrix;\n  var _ = Two.Utils;\n\n  var canvas = getCanvas();\n  var ctx = canvas.getContext('2d');\n\n  /**\n   * @class\n   * @name Two.Text\n   * @param {String} message - The String to be rendered to the scene.\n   * @param {Number} [x=0] - The position in the x direction for the object.\n   * @param {Number} [y=0] - The position in the y direction for the object.\n   * @param {Object} [styles] - An object where styles are applied. Attribute must exist in Two.Text.Properties.\n   */\n  var Text = Two.Text = function(message, x, y, styles) {\n\n    Two.Shape.call(this);\n\n    this._renderer.type = 'text';\n    this._renderer.flagFill = _.bind(Two.Text.FlagFill, this);\n    this._renderer.flagStroke = _.bind(Two.Text.FlagStroke, this);\n\n    this.value = message;\n\n    if (_.isNumber(x)) {\n        this.translation.x = x;\n    }\n    if (_.isNumber(y)) {\n        this.translation.y = y;\n    }\n\n    this.dashes = [];\n\n    if (!_.isObject(styles)) {\n      return this;\n    }\n\n    _.each(Two.Text.Properties, function(property) {\n\n      if (property in styles) {\n        this[property] = styles[property];\n      }\n\n    }, this);\n\n  };\n\n  _.extend(Two.Text, {\n\n    Ratio: 0.6,\n\n    Properties: [\n      'value', 'family', 'size', 'leading', 'alignment', 'linewidth', 'style',\n      'className', 'weight', 'decoration', 'baseline', 'opacity', 'visible',\n      'fill', 'stroke',\n    ],\n\n    FlagFill: function() {\n      this._flagFill = true;\n    },\n\n    FlagStroke: function() {\n      this._flagStroke = true;\n    },\n\n    MakeObservable: function(object) {\n\n      Two.Shape.MakeObservable(object);\n\n      _.each(Two.Text.Properties.slice(0, 13), Two.Utils.defineProperty, object);\n\n      Object.defineProperty(object, 'fill', {\n        enumerable: true,\n        get: function() {\n          return this._fill;\n        },\n        set: function(f) {\n\n          if (this._fill instanceof Two.Gradient\n            || this._fill instanceof Two.LinearGradient\n            || this._fill instanceof Two.RadialGradient\n            || this._fill instanceof Two.Texture) {\n            this._fill.unbind(Two.Events.change, this._renderer.flagFill);\n          }\n\n          this._fill = f;\n          this._flagFill = true;\n\n          if (this._fill instanceof Two.Gradient\n            || this._fill instanceof Two.LinearGradient\n            || this._fill instanceof Two.RadialGradient\n            || this._fill instanceof Two.Texture) {\n            this._fill.bind(Two.Events.change, this._renderer.flagFill);\n          }\n\n        }\n      });\n\n      Object.defineProperty(object, 'stroke', {\n        enumerable: true,\n        get: function() {\n          return this._stroke;\n        },\n        set: function(f) {\n\n          if (this._stroke instanceof Two.Gradient\n            || this._stroke instanceof Two.LinearGradient\n            || this._stroke instanceof Two.RadialGradient\n            || this._stroke instanceof Two.Texture) {\n            this._stroke.unbind(Two.Events.change, this._renderer.flagStroke);\n          }\n\n          this._stroke = f;\n          this._flagStroke = true;\n\n          if (this._stroke instanceof Two.Gradient\n            || this._stroke instanceof Two.LinearGradient\n            || this._stroke instanceof Two.RadialGradient\n            || this._stroke instanceof Two.Texture) {\n            this._stroke.bind(Two.Events.change, this._renderer.flagStroke);\n          }\n\n        }\n      });\n\n      Object.defineProperty(object, 'clip', {\n        enumerable: true,\n        get: function() {\n          return this._clip;\n        },\n        set: function(v) {\n          this._clip = v;\n          this._flagClip = true;\n        }\n      });\n\n    }\n\n  });\n\n  _.extend(Two.Text.prototype, Two.Shape.prototype, {\n\n    // Flags\n    // http://en.wikipedia.org/wiki/Flag\n\n    _flagValue: true,\n    _flagFamily: true,\n    _flagSize: true,\n    _flagLeading: true,\n    _flagAlignment: true,\n    _flagBaseline: true,\n    _flagStyle: true,\n    _flagWeight: true,\n    _flagDecoration: true,\n\n    _flagFill: true,\n    _flagStroke: true,\n    _flagLinewidth: true,\n    _flagOpacity: true,\n    _flagClassName: true,\n    _flagVisible: true,\n\n    _flagClip: false,\n\n    // Underlying Properties\n\n    _value: '',\n    _family: 'sans-serif',\n    _size: 13,\n    _leading: 17,\n    _alignment: 'center',\n    _baseline: 'middle',\n    _style: 'normal',\n    _weight: 500,\n    _decoration: 'none',\n\n    _fill: '#000',\n    _stroke: 'transparent',\n    _linewidth: 1,\n    _opacity: 1,\n    _className: '',\n    _visible: true,\n\n    _clip: false,\n\n    constructor: Two.Text,\n\n    remove: function() {\n\n      if (!this.parent) {\n        return this;\n      }\n\n      this.parent.remove(this);\n\n      return this;\n\n    },\n\n    clone: function(parent) {\n\n      var clone = new Two.Text(this.value);\n      clone.translation.copy(this.translation);\n      clone.rotation = this.rotation;\n      clone.scale = this.scale;\n\n      _.each(Two.Text.Properties, function(property) {\n        clone[property] = this[property];\n      }, this);\n\n      if (parent) {\n        parent.add(clone);\n      }\n\n      return clone._update();\n\n    },\n\n    toObject: function() {\n\n      var result = {\n        translation: this.translation.toObject(),\n        rotation: this.rotation,\n        scale: this.scale\n      };\n\n      _.each(Two.Text.Properties, function(property) {\n        result[property] = this[property];\n      }, this);\n\n      return result;\n\n    },\n\n    noStroke: function() {\n      this.stroke = 'transparent';\n      return this;\n    },\n\n    noFill: function() {\n      this.fill = 'transparent';\n      return this;\n    },\n\n    // /**\n    //  * A shim to not break `getBoundingClientRect` calls. TODO: Implement a\n    //  * way to calculate proper bounding boxes of `Two.Text`.\n    //  */\n    getBoundingClientRect: function(shallow) {\n\n      var matrix, border, l, x, y, i, v;\n      var left, right, top, bottom;\n\n      // TODO: Update this to not __always__ update. Just when it needs to.\n      this._update(true);\n\n      matrix = !!shallow ? this._matrix : getComputedMatrix(this);\n\n      var height = this.leading;\n      var width = this.value.length * this.size * Text.Ratio;\n\n      switch (this.alignment) {\n        case 'left':\n          left = 0;\n          right = width;\n          break;\n        case 'right':\n          left = - width;\n          right = 0;\n          break;\n        default:\n          left = - width / 2;\n          right = width / 2;\n      }\n\n      switch (this.baseline) {\n        case 'top':\n          top = 0;\n          bottom = height;\n          break;\n        case 'bottom':\n          top = - height;\n          bottom = 0;\n          break;\n        default:\n          top = - height / 2;\n          bottom = height / 2;\n      }\n\n      v = matrix.multiply(left, top, 1);\n\n      top = v.y;\n      left = v.x;\n\n      v = matrix.multiply(right, bottom, 1);\n\n      right = v.x;\n      bottom = v.y;\n\n      return {\n        top: top,\n        left: left,\n        right: right,\n        bottom: bottom,\n        width: right - left,\n        height: bottom - top\n      };\n\n    },\n\n    flagReset: function() {\n\n      this._flagValue = this._flagFamily = this._flagSize =\n        this._flagLeading = this._flagAlignment = this._flagFill =\n        this._flagStroke = this._flagLinewidth = this._flagOpacity =\n        this._flagVisible = this._flagClip = this._flagDecoration =\n        this._flagClassName = this._flagBaseline = false;\n\n      Two.Shape.prototype.flagReset.call(this);\n\n      return this;\n\n    }\n\n  });\n\n  Two.Text.MakeObservable(Two.Text.prototype);\n\n  function getCanvas() {\n    if (root.document) {\n      return root.document.createElement('canvas');\n    } else {\n      console.warn('Two.js: Unable to create canvas for Two.Text measurements.');\n      return {\n        getContext: _.identity\n      }\n    }\n  }\n\n})((typeof global !== 'undefined' ? global : (this || window)).Two);\n\n(function(Two) {\n\n  var _ = Two.Utils;\n\n  var Stop = Two.Stop = function(offset, color, opacity) {\n\n    this._renderer = {};\n    this._renderer.type = 'stop';\n\n    this.offset = _.isNumber(offset) ? offset\n      : Stop.Index <= 0 ? 0 : 1;\n\n    this.opacity = _.isNumber(opacity) ? opacity : 1;\n\n    this.color = _.isString(color) ? color\n      : Stop.Index <= 0 ? '#fff' : '#000';\n\n    Stop.Index = (Stop.Index + 1) % 2;\n\n  };\n\n  _.extend(Stop, {\n\n    Index: 0,\n\n    Properties: [\n      'offset',\n      'opacity',\n      'color'\n    ],\n\n    MakeObservable: function(object) {\n\n      _.each(Stop.Properties, function(property) {\n\n        var object = this;\n        var secret = '_' + property;\n        var flag = '_flag' + property.charAt(0).toUpperCase() + property.slice(1);\n\n        Object.defineProperty(object, property, {\n          enumerable: true,\n          get: function() {\n            return this[secret];\n          },\n          set: function(v) {\n            this[secret] = v;\n            this[flag] = true;\n            if (this.parent) {\n              this.parent._flagStops = true;\n            }\n          }\n        });\n\n      }, object);\n\n    }\n\n  });\n\n  _.extend(Stop.prototype, Two.Utils.Events, {\n\n    constructor: Stop,\n\n    clone: function() {\n\n      var clone = new Stop();\n\n      _.each(Stop.Properties, function(property) {\n        clone[property] = this[property];\n      }, this);\n\n      return clone;\n\n    },\n\n    toObject: function() {\n\n      var result = {};\n\n      _.each(Stop.Properties, function(k) {\n        result[k] = this[k];\n      }, this);\n\n      return result;\n\n    },\n\n    flagReset: function() {\n\n      this._flagOffset = this._flagColor = this._flagOpacity = false;\n\n      return this;\n\n    }\n\n  });\n\n  Stop.MakeObservable(Stop.prototype);\n  Stop.prototype.constructor = Stop;\n\n  var Gradient = Two.Gradient = function(stops) {\n\n    this._renderer = {};\n    this._renderer.type = 'gradient';\n\n    this.id = Two.Identifier + Two.uniqueId();\n    this.classList = [];\n\n    this._renderer.flagStops = _.bind(Gradient.FlagStops, this);\n    this._renderer.bindStops = _.bind(Gradient.BindStops, this);\n    this._renderer.unbindStops = _.bind(Gradient.UnbindStops, this);\n\n    this.spread = 'pad';\n\n    this.stops = stops;\n\n  };\n\n  _.extend(Gradient, {\n\n    Stop: Stop,\n\n    Properties: [\n      'spread'\n    ],\n\n    MakeObservable: function(object) {\n\n      _.each(Gradient.Properties, Two.Utils.defineProperty, object);\n\n      Object.defineProperty(object, 'stops', {\n\n        enumerable: true,\n\n        get: function() {\n          return this._stops;\n        },\n\n        set: function(stops) {\n\n          var updateStops = this._renderer.flagStops;\n          var bindStops = this._renderer.bindStops;\n          var unbindStops = this._renderer.unbindStops;\n\n          // Remove previous listeners\n          if (this._stops) {\n            this._stops\n              .unbind(Two.Events.insert, bindStops)\n              .unbind(Two.Events.remove, unbindStops);\n          }\n\n          // Create new Collection with copy of Stops\n          this._stops = new Two.Utils.Collection((stops || []).slice(0));\n\n          // Listen for Collection changes and bind / unbind\n          this._stops\n            .bind(Two.Events.insert, bindStops)\n            .bind(Two.Events.remove, unbindStops);\n\n          // Bind Initial Stops\n          bindStops(this._stops);\n\n        }\n\n      });\n\n    },\n\n    FlagStops: function() {\n      this._flagStops = true;\n    },\n\n    BindStops: function(items) {\n\n      // This function is called a lot\n      // when importing a large SVG\n      var i = items.length;\n      while(i--) {\n        items[i].bind(Two.Events.change, this._renderer.flagStops);\n        items[i].parent = this;\n      }\n\n      this._renderer.flagStops();\n\n    },\n\n    UnbindStops: function(items) {\n\n      var i = items.length;\n      while(i--) {\n        items[i].unbind(Two.Events.change, this._renderer.flagStops);\n        delete items[i].parent;\n      }\n\n      this._renderer.flagStops();\n\n    }\n\n  });\n\n  _.extend(Gradient.prototype, Two.Utils.Events, {\n\n    _flagStops: false,\n    _flagSpread: false,\n\n    clone: function(parent) {\n\n      var stops = _.map(this.stops, function(s) {\n        return s.clone();\n      });\n\n      var clone = new Gradient(stops);\n\n      _.each(Two.Gradient.Properties, function(k) {\n        clone[k] = this[k];\n      }, this);\n\n      if (parent) {\n        parent.add(clone);\n      }\n\n      return clone;\n\n    },\n\n    toObject: function() {\n\n      var result = {\n        stops: _.map(this.stops, function(s) {\n          return s.toObject();\n        })\n      };\n\n      _.each(Gradient.Properties, function(k) {\n        result[k] = this[k];\n      }, this);\n\n      return result;\n\n    },\n\n    _update: function() {\n\n      if (this._flagSpread || this._flagStops) {\n        this.trigger(Two.Events.change);\n      }\n\n      return this;\n\n    },\n\n    flagReset: function() {\n\n      this._flagSpread = this._flagStops = false;\n\n      return this;\n\n    }\n\n  });\n\n  Gradient.MakeObservable(Gradient.prototype);\n\n})((typeof global !== 'undefined' ? global : (this || window)).Two);\n\n(function(Two) {\n\n  var _ = Two.Utils;\n\n  var LinearGradient = Two.LinearGradient = function(x1, y1, x2, y2, stops) {\n\n    Two.Gradient.call(this, stops);\n\n    this._renderer.type = 'linear-gradient';\n\n    var flagEndPoints = _.bind(LinearGradient.FlagEndPoints, this);\n    this.left = new Two.Vector().bind(Two.Events.change, flagEndPoints);\n    this.right = new Two.Vector().bind(Two.Events.change, flagEndPoints);\n\n    if (_.isNumber(x1)) {\n      this.left.x = x1;\n    }\n    if (_.isNumber(y1)) {\n      this.left.y = y1;\n    }\n    if (_.isNumber(x2)) {\n      this.right.x = x2;\n    }\n    if (_.isNumber(y2)) {\n      this.right.y = y2;\n    }\n\n  };\n\n  _.extend(LinearGradient, {\n\n    Stop: Two.Gradient.Stop,\n\n    MakeObservable: function(object) {\n      Two.Gradient.MakeObservable(object);\n    },\n\n    FlagEndPoints: function() {\n      this._flagEndPoints = true;\n    }\n\n  });\n\n  _.extend(LinearGradient.prototype, Two.Gradient.prototype, {\n\n    _flagEndPoints: false,\n\n    constructor: LinearGradient,\n\n    clone: function(parent) {\n\n      var stops = _.map(this.stops, function(stop) {\n        return stop.clone();\n      });\n\n      var clone = new LinearGradient(this.left._x, this.left._y,\n        this.right._x, this.right._y, stops);\n\n      _.each(Two.Gradient.Properties, function(k) {\n        clone[k] = this[k];\n      }, this);\n\n      if (parent) {\n        parent.add(clone);\n      }\n\n      return clone;\n\n    },\n\n    toObject: function() {\n\n      var result = Two.Gradient.prototype.toObject.call(this);\n\n      result.left = this.left.toObject();\n      result.right = this.right.toObject();\n\n      return result;\n\n    },\n\n    _update: function() {\n\n      if (this._flagEndPoints || this._flagSpread || this._flagStops) {\n        this.trigger(Two.Events.change);\n      }\n\n      return this;\n\n    },\n\n    flagReset: function() {\n\n      this._flagEndPoints = false;\n\n      Two.Gradient.prototype.flagReset.call(this);\n\n      return this;\n\n    }\n\n  });\n\n  LinearGradient.MakeObservable(LinearGradient.prototype);\n\n})((typeof global !== 'undefined' ? global : (this || window)).Two);\n\n(function(Two) {\n\n  var _ = Two.Utils;\n\n  var RadialGradient = Two.RadialGradient = function(cx, cy, r, stops, fx, fy) {\n\n    Two.Gradient.call(this, stops);\n\n    this._renderer.type = 'radial-gradient';\n\n    this.center = new Two.Vector()\n      .bind(Two.Events.change, _.bind(function() {\n        this._flagCenter = true;\n      }, this));\n\n    this.radius = _.isNumber(r) ? r : 20;\n\n    this.focal = new Two.Vector()\n      .bind(Two.Events.change, _.bind(function() {\n        this._flagFocal = true;\n      }, this));\n\n    if (_.isNumber(cx)) {\n      this.center.x = cx;\n    }\n    if (_.isNumber(cy)) {\n      this.center.y = cy;\n    }\n\n    this.focal.copy(this.center);\n\n    if (_.isNumber(fx)) {\n      this.focal.x = fx;\n    }\n    if (_.isNumber(fy)) {\n      this.focal.y = fy;\n    }\n\n  };\n\n  _.extend(RadialGradient, {\n\n    Stop: Two.Gradient.Stop,\n\n    Properties: [\n      'radius'\n    ],\n\n    MakeObservable: function(object) {\n\n      Two.Gradient.MakeObservable(object);\n\n      _.each(RadialGradient.Properties, Two.Utils.defineProperty, object);\n\n    }\n\n  });\n\n  _.extend(RadialGradient.prototype, Two.Gradient.prototype, {\n\n    _flagRadius: false,\n    _flagCenter: false,\n    _flagFocal: false,\n\n    constructor: RadialGradient,\n\n    clone: function(parent) {\n\n      var stops = _.map(this.stops, function(stop) {\n        return stop.clone();\n      });\n\n      var clone = new RadialGradient(this.center._x, this.center._y,\n          this._radius, stops, this.focal._x, this.focal._y);\n\n      _.each(Two.Gradient.Properties.concat(RadialGradient.Properties), function(k) {\n        clone[k] = this[k];\n      }, this);\n\n      if (parent) {\n        parent.add(clone);\n      }\n\n      return clone;\n\n    },\n\n    toObject: function() {\n\n      var result = Two.Gradient.prototype.toObject.call(this);\n\n      _.each(RadialGradient.Properties, function(k) {\n        result[k] = this[k];\n      }, this);\n\n      result.center = this.center.toObject();\n      result.focal = this.focal.toObject();\n\n      return result;\n\n    },\n\n    _update: function() {\n\n      if (this._flagRadius || this._flatCenter || this._flagFocal\n        || this._flagSpread || this._flagStops) {\n        this.trigger(Two.Events.change);\n      }\n\n      return this;\n\n    },\n\n    flagReset: function() {\n\n      this._flagRadius = this._flagCenter = this._flagFocal = false;\n\n      Two.Gradient.prototype.flagReset.call(this);\n\n      return this;\n\n    }\n\n  });\n\n  RadialGradient.MakeObservable(RadialGradient.prototype);\n\n})((typeof global !== 'undefined' ? global : (this || window)).Two);\n\n(function(Two) {\n\n  var root = Two.root;\n  var _ = Two.Utils;\n  var anchor;\n  var regex = {\n    video: /\\.(mp4|webm|ogg)$/i,\n    image: /\\.(jpe?g|png|gif|tiff)$/i,\n    effect: /texture|gradient/i\n  };\n\n  if (root.document) {\n    anchor = document.createElement('a');\n  }\n\n  var Texture = Two.Texture = function(src, callback) {\n\n    this._renderer = {};\n    this._renderer.type = 'texture';\n    this._renderer.flagOffset = _.bind(Texture.FlagOffset, this);\n    this._renderer.flagScale = _.bind(Texture.FlagScale, this);\n\n    this.id = Two.Identifier + Two.uniqueId();\n    this.classList = [];\n\n    this.offset = new Two.Vector();\n\n    if (_.isFunction(callback)) {\n      var loaded = _.bind(function() {\n        this.unbind(Two.Events.load, loaded);\n        if (_.isFunction(callback)) {\n          callback();\n        }\n      }, this);\n      this.bind(Two.Events.load, loaded);\n    }\n\n    if (_.isString(src)) {\n      this.src = src;\n    } else if (_.isElement(src)) {\n      this.image = src;\n    }\n\n    this._update();\n\n  };\n\n  _.extend(Texture, {\n\n    Properties: [\n      'src',\n      'loaded',\n      'repeat'\n    ],\n\n    RegularExpressions: regex,\n\n    ImageRegistry: new Two.Registry(),\n\n    getAbsoluteURL: function(path) {\n      if (!anchor) {\n        // TODO: Fix for headless environments\n        return path;\n      }\n      anchor.href = path;\n      return anchor.href;\n    },\n\n    loadHeadlessBuffer: new Function('texture', 'loaded', [\n      'var fs = require(\"fs\");',\n      'var buffer = fs.readFileSync(texture.src);',\n\n      'texture.image.src = buffer;',\n      'loaded();'\n    ].join('\\n')),\n\n    getImage: function(src) {\n\n      var absoluteSrc = Texture.getAbsoluteURL(src);\n\n      if (Texture.ImageRegistry.contains(absoluteSrc)) {\n        return Texture.ImageRegistry.get(absoluteSrc);\n      }\n\n      var image;\n\n      if (Two.Utils.Image) {\n\n        // TODO: Fix for headless environments\n        image = new Two.Utils.Image();\n        Two.CanvasRenderer.Utils.shim(image, 'img');\n\n      } else if (root.document) {\n\n        if (regex.video.test(absoluteSrc)) {\n          image = document.createElement('video');\n        } else {\n          image = document.createElement('img');\n        }\n\n      } else {\n\n        console.warn('Two.js: no prototypical image defined for Two.Texture');\n\n      }\n\n      image.crossOrigin = 'anonymous';\n\n      return image;\n\n    },\n\n    Register: {\n      canvas: function(texture, callback) {\n        texture._src = '#' + texture.id;\n        Texture.ImageRegistry.add(texture.src, texture.image);\n        if (_.isFunction(callback)) {\n          callback();\n        }\n      },\n      img: function(texture, callback) {\n\n        var loaded = function(e) {\n          if (_.isFunction(texture.image.removeEventListener)) {\n            texture.image.removeEventListener('load', loaded, false);\n            texture.image.removeEventListener('error', error, false);\n          }\n          if (_.isFunction(callback)) {\n            callback();\n          }\n        };\n        var error = function(e) {\n          if (_.isFunction(texture.image.removeEventListener)) {\n            texture.image.removeEventListener('load', loaded, false);\n            texture.image.removeEventListener('error', error, false);\n          }\n          throw new Two.Utils.Error('unable to load ' + texture.src);\n        };\n\n        if (_.isNumber(texture.image.width) && texture.image.width > 0\n          && _.isNumber(texture.image.height) && texture.image.height > 0) {\n            loaded();\n        } else if (_.isFunction(texture.image.addEventListener)) {\n          texture.image.addEventListener('load', loaded, false);\n          texture.image.addEventListener('error', error, false);\n        }\n\n        texture._src = Texture.getAbsoluteURL(texture._src);\n\n        if (texture.image && texture.image.getAttribute('two-src')) {\n          return;\n        }\n\n        texture.image.setAttribute('two-src', texture.src);\n        Texture.ImageRegistry.add(texture.src, texture.image);\n\n        if (Two.Utils.isHeadless) {\n\n          Texture.loadHeadlessBuffer(texture, loaded);\n\n        } else {\n\n          texture.image.src = texture.src;\n\n        }\n\n      },\n      video: function(texture, callback) {\n\n        var loaded = function(e) {\n          texture.image.removeEventListener('canplaythrough', loaded, false);\n          texture.image.removeEventListener('error', error, false);\n          texture.image.width = texture.image.videoWidth;\n          texture.image.height = texture.image.videoHeight;\n          texture.image.play();\n          if (_.isFunction(callback)) {\n            callback();\n          }\n        };\n        var error = function(e) {\n          texture.image.removeEventListener('canplaythrough', loaded, false);\n          texture.image.removeEventListener('error', error, false);\n          throw new Two.Utils.Error('unable to load ' + texture.src);\n        };\n\n        texture._src = Texture.getAbsoluteURL(texture._src);\n        texture.image.addEventListener('canplaythrough', loaded, false);\n        texture.image.addEventListener('error', error, false);\n\n        if (texture.image && texture.image.getAttribute('two-src')) {\n          return;\n        }\n\n        if (Two.Utils.isHeadless) {\n          throw new Two.Utils.Error('video textures are not implemented in headless environments.');\n          return;\n        }\n\n        texture.image.setAttribute('two-src', texture.src);\n        Texture.ImageRegistry.add(texture.src, texture.image);\n        texture.image.src = texture.src;\n        texture.image.loop = true;\n        texture.image.load();\n\n      }\n    },\n\n    load: function(texture, callback) {\n\n      var src = texture.src;\n      var image = texture.image;\n      var tag = image && image.nodeName.toLowerCase();\n\n      if (texture._flagImage) {\n        if (/canvas/i.test(tag)) {\n          Texture.Register.canvas(texture, callback);\n        } else {\n          texture._src = image.getAttribute('two-src') || image.src;\n          Texture.Register[tag](texture, callback);\n        }\n      }\n\n      if (texture._flagSrc) {\n        if (!image) {\n          texture.image = Texture.getImage(texture.src);\n        }\n        tag = texture.image.nodeName.toLowerCase();\n        Texture.Register[tag](texture, callback);\n      }\n\n    },\n\n    FlagOffset: function() {\n      this._flagOffset = true;\n    },\n\n    FlagScale: function() {\n      this._flagScale = true;\n    },\n\n    MakeObservable: function(object) {\n\n      _.each(Texture.Properties, Two.Utils.defineProperty, object);\n\n      Object.defineProperty(object, 'image', {\n        enumerable: true,\n        get: function() {\n          return this._image;\n        },\n        set: function(image) {\n\n          var tag = image && image.nodeName.toLowerCase();\n          var index;\n\n          switch (tag) {\n            case 'canvas':\n              index = '#' + image.id;\n              break;\n            default:\n              index = image.src;\n          }\n\n          if (Texture.ImageRegistry.contains(index)) {\n            this._image = Texture.ImageRegistry.get(image.src);\n          } else {\n            this._image = image;\n          }\n\n          this._flagImage = true;\n\n        }\n\n      });\n\n      Object.defineProperty(object, 'offset', {\n        enumerable: true,\n        get: function() {\n          return this._offset;\n        },\n        set: function(v) {\n          if (this._offset) {\n            this._offset.unbind(Two.Events.change, this._renderer.flagOffset);\n          }\n          this._offset = v;\n          this._offset.bind(Two.Events.change, this._renderer.flagOffset);\n          this._flagOffset = true;\n        }\n      });\n\n      Object.defineProperty(object, 'scale', {\n        enumerable: true,\n        get: function() {\n          return this._scale;\n        },\n        set: function(v) {\n\n          if (this._scale instanceof Two.Vector) {\n            this._scale.unbind(Two.Events.change, this._renderer.flagScale);\n          }\n\n          this._scale = v;\n\n          if (this._scale instanceof Two.Vector) {\n            this._scale.bind(Two.Events.change, this._renderer.flagScale);\n          }\n\n          this._flagScale = true;\n\n        }\n      });\n\n    }\n\n  });\n\n  _.extend(Texture.prototype, Two.Utils.Events, Two.Shape.prototype, {\n\n    _flagSrc: false,\n    _flagImage: false,\n    _flagVideo: false,\n    _flagLoaded: false,\n    _flagRepeat: false,\n\n    _flagOffset: false,\n    _flagScale: false,\n\n    _src: '',\n    _image: null,\n    _loaded: false,\n    _repeat: 'no-repeat',\n\n    _scale: 1,\n    _offset: null,\n\n    constructor: Texture,\n\n    clone: function() {\n      return new Texture(this.src);\n    },\n\n    toObject: function() {\n      return {\n        src: this.src,\n        image: this.image\n      }\n    },\n\n    _update: function() {\n\n      if (this._flagSrc || this._flagImage) {\n\n        this.trigger(Two.Events.change);\n\n        if (this._flagSrc || this._flagImage) {\n          this.loaded = false;\n          Texture.load(this, _.bind(function() {\n            this.loaded = true;\n            this\n              .trigger(Two.Events.change)\n              .trigger(Two.Events.load);\n          }, this));\n        }\n\n      }\n\n      if (this._image && this._image.readyState >= 4) {\n        this._flagVideo = true;\n      }\n\n      return this;\n\n    },\n\n    flagReset: function() {\n\n      this._flagSrc = this._flagImage = this._flagLoaded\n        = this._flagVideo = this._flagScale = this._flagOffset = false;\n\n      return this;\n\n    }\n\n  });\n\n  Texture.MakeObservable(Texture.prototype);\n\n})((typeof global !== 'undefined' ? global : (this || window)).Two);\n\n(function(Two) {\n\n  var _ = Two.Utils;\n  var Path = Two.Path;\n  var Rectangle = Two.Rectangle;\n\n  var Sprite = Two.Sprite = function(path, ox, oy, cols, rows, frameRate) {\n\n    Path.call(this, [\n      new Two.Anchor(),\n      new Two.Anchor(),\n      new Two.Anchor(),\n      new Two.Anchor()\n    ], true);\n\n    this.noStroke();\n    this.noFill();\n\n    if (path instanceof Two.Texture) {\n      this.texture = path;\n    } else if (_.isString(path)) {\n      this.texture = new Two.Texture(path);\n    }\n\n    this.origin = new Two.Vector();\n\n    this._update();\n    this.translation.set(ox || 0, oy || 0);\n\n    if (_.isNumber(cols)) {\n      this.columns = cols;\n    }\n    if (_.isNumber(rows)) {\n      this.rows = rows;\n    }\n    if (_.isNumber(frameRate)) {\n      this.frameRate = frameRate;\n    }\n\n  };\n\n  _.extend(Sprite, {\n\n    Properties: [\n      'texture', 'columns', 'rows', 'frameRate', 'index'\n    ],\n\n    MakeObservable: function(obj) {\n\n      Rectangle.MakeObservable(obj);\n      _.each(Sprite.Properties, Two.Utils.defineProperty, obj);\n\n    }\n\n  })\n\n  _.extend(Sprite.prototype, Rectangle.prototype, {\n\n    _flagTexture: false,\n    _flagColumns: false,\n    _flagRows: false,\n    _flagFrameRate: false,\n    flagIndex: false,\n\n    // Private variables\n    _amount: 1,\n    _duration: 0,\n    _startTime: 0,\n    _playing: false,\n    _firstFrame: 0,\n    _lastFrame: 0,\n    _loop: true,\n\n    // Exposed through getter-setter\n    _texture: null,\n    _columns: 1,\n    _rows: 1,\n    _frameRate: 0,\n    _index: 0,\n    _origin: null,\n\n    constructor: Sprite,\n\n    play: function(firstFrame, lastFrame, onLastFrame) {\n\n      this._playing = true;\n      this._firstFrame = 0;\n      this._lastFrame = this.amount - 1;\n      this._startTime = _.performance.now();\n\n      if (_.isNumber(firstFrame)) {\n        this._firstFrame = firstFrame;\n      }\n      if (_.isNumber(lastFrame)) {\n        this._lastFrame = lastFrame;\n      }\n      if (_.isFunction(onLastFrame)) {\n        this._onLastFrame = onLastFrame;\n      } else {\n        delete this._onLastFrame;\n      }\n\n      if (this._index !== this._firstFrame) {\n        this._startTime -= 1000 * Math.abs(this._index - this._firstFrame)\n          / this._frameRate;\n      }\n\n      return this;\n\n    },\n\n    pause: function() {\n\n      this._playing = false;\n      return this;\n\n    },\n\n    stop: function() {\n\n      this._playing = false;\n      this._index = 0;\n\n      return this;\n\n    },\n\n    clone: function(parent) {\n\n      var clone = new Sprite(\n        this.texture, this.translation.x, this.translation.y,\n        this.columns, this.rows, this.frameRate\n      );\n\n      if (this.playing) {\n        clone.play(this._firstFrame, this._lastFrame);\n        clone._loop = this._loop;\n      }\n\n      if (parent) {\n        parent.add(clone);\n      }\n\n      return clone;\n\n    },\n\n    _update: function() {\n\n      var effect = this._texture;\n      var cols = this._columns;\n      var rows = this._rows;\n\n      var width, height, elapsed, amount, duration;\n      var index, iw, ih, isRange, frames;\n\n      if (this._flagColumns || this._flagRows) {\n        this._amount = this._columns * this._rows;\n      }\n\n      if (this._flagFrameRate) {\n        this._duration = 1000 * this._amount / this._frameRate;\n      }\n\n      if (this._flagTexture) {\n        this.fill = this._texture;\n      }\n\n      if (this._texture.loaded) {\n\n        iw = effect.image.width;\n        ih = effect.image.height;\n\n        width = iw / cols;\n        height = ih / rows;\n        amount = this._amount;\n\n        if (this.width !== width) {\n          this.width = width;\n        }\n        if (this.height !== height) {\n          this.height = height;\n        }\n\n        if (this._playing && this._frameRate > 0) {\n\n          if (_.isNaN(this._lastFrame)) {\n            this._lastFrame = amount - 1;\n          }\n\n          // TODO: Offload perf logic to instance of `Two`.\n          elapsed = _.performance.now() - this._startTime;\n          frames = this._lastFrame + 1;\n          duration = 1000 * (frames - this._firstFrame) / this._frameRate;\n\n          if (this._loop) {\n            elapsed = elapsed % duration;\n          } else {\n            elapsed = Math.min(elapsed, duration);\n          }\n\n          index = _.lerp(this._firstFrame, frames, elapsed / duration);\n          index = Math.floor(index);\n\n          if (index !== this._index) {\n            this._index = index;\n            if (index >= this._lastFrame - 1 && this._onLastFrame) {\n              this._onLastFrame();  // Shortcut for chainable sprite animations\n            }\n          }\n\n        }\n\n        var col = this._index % cols;\n        var row = Math.floor(this._index / cols);\n\n        var ox = - width * col + (iw - width) / 2;\n        var oy = - height * row + (ih - height) / 2;\n\n        // TODO: Improve performance\n        if (ox !== effect.offset.x) {\n          effect.offset.x = ox;\n        }\n        if (oy !== effect.offset.y) {\n          effect.offset.y = oy;\n        }\n\n      }\n\n      Rectangle.prototype._update.call(this);\n\n      return this;\n\n    },\n\n    flagReset: function() {\n\n      this._flagTexture = this._flagColumns = this._flagRows\n        = this._flagFrameRate = false;\n\n      Rectangle.prototype.flagReset.call(this);\n\n      return this;\n    }\n\n\n  });\n\n  Sprite.MakeObservable(Sprite.prototype);\n\n})((typeof global !== 'undefined' ? global : (this || window)).Two);\n\n(function(Two) {\n\n  var _ = Two.Utils;\n  var Path = Two.Path;\n  var Rectangle = Two.Rectangle;\n\n  var ImageSequence = Two.ImageSequence = function(paths, ox, oy, frameRate) {\n\n    Path.call(this, [\n      new Two.Anchor(),\n      new Two.Anchor(),\n      new Two.Anchor(),\n      new Two.Anchor()\n    ], true);\n\n    this._renderer.flagTextures = _.bind(ImageSequence.FlagTextures, this);\n    this._renderer.bindTextures = _.bind(ImageSequence.BindTextures, this);\n    this._renderer.unbindTextures = _.bind(ImageSequence.UnbindTextures, this);\n\n    this.noStroke();\n    this.noFill();\n\n    this.textures = _.map(paths, ImageSequence.GenerateTexture, this);\n    this.origin = new Two.Vector();\n\n    this._update();\n    this.translation.set(ox || 0, oy || 0);\n\n    if (_.isNumber(frameRate)) {\n      this.frameRate = frameRate;\n    } else {\n      this.frameRate = ImageSequence.DefaultFrameRate;\n    }\n\n  };\n\n  _.extend(ImageSequence, {\n\n    Properties: [\n      'frameRate',\n      'index'\n    ],\n\n    DefaultFrameRate: 30,\n\n    FlagTextures: function() {\n      this._flagTextures = true;\n    },\n\n    BindTextures: function(items) {\n\n      var i = items.length;\n      while (i--) {\n        items[i].bind(Two.Events.change, this._renderer.flagTextures);\n      }\n\n      this._renderer.flagTextures();\n\n    },\n\n    UnbindTextures: function(items) {\n\n      var i = items.length;\n      while (i--) {\n        items[i].unbind(Two.Events.change, this._renderer.flagTextures);\n      }\n\n      this._renderer.flagTextures();\n\n    },\n\n    MakeObservable: function(obj) {\n\n      Rectangle.MakeObservable(obj);\n      _.each(ImageSequence.Properties, Two.Utils.defineProperty, obj);\n\n      Object.defineProperty(obj, 'textures', {\n\n        enumerable: true,\n\n        get: function() {\n          return this._textures;\n        },\n\n        set: function(textures) {\n\n          var updateTextures = this._renderer.flagTextures;\n          var bindTextures = this._renderer.bindTextures;\n          var unbindTextures = this._renderer.unbindTextures;\n\n          // Remove previous listeners\n          if (this._textures) {\n            this._textures\n              .unbind(Two.Events.insert, bindTextures)\n              .unbind(Two.Events.remove, unbindTextures);\n          }\n\n          // Create new Collection with copy of vertices\n          this._textures = new Two.Utils.Collection((textures || []).slice(0));\n\n          // Listen for Collection changes and bind / unbind\n          this._textures\n            .bind(Two.Events.insert, bindTextures)\n            .bind(Two.Events.remove, unbindTextures);\n\n          // Bind Initial Textures\n          bindTextures(this._textures);\n\n        }\n\n      });\n\n    },\n\n    GenerateTexture: function(obj) {\n      if (obj instanceof Two.Texture) {\n        return obj;\n      } else if (_.isString(obj)) {\n        return new Two.Texture(obj);\n      }\n    }\n\n  });\n\n  _.extend(ImageSequence.prototype, Rectangle.prototype, {\n\n    _flagTextures: false,\n    _flagFrameRate: false,\n    _flagIndex: false,\n\n    // Private variables\n    _amount: 1,\n    _duration: 0,\n    _index: 0,\n    _startTime: 0,\n    _playing: false,\n    _firstFrame: 0,\n    _lastFrame: 0,\n    _loop: true,\n\n    // Exposed through getter-setter\n    _textures: null,\n    _frameRate: 0,\n    _origin: null,\n\n    constructor: ImageSequence,\n\n    play: function(firstFrame, lastFrame, onLastFrame) {\n\n      this._playing = true;\n      this._firstFrame = 0;\n      this._lastFrame = this.amount - 1;\n      this._startTime = _.performance.now();\n\n      if (_.isNumber(firstFrame)) {\n        this._firstFrame = firstFrame;\n      }\n      if (_.isNumber(lastFrame)) {\n        this._lastFrame = lastFrame;\n      }\n      if (_.isFunction(onLastFrame)) {\n        this._onLastFrame = onLastFrame;\n      } else {\n        delete this._onLastFrame;\n      }\n\n      if (this._index !== this._firstFrame) {\n        this._startTime -= 1000 * Math.abs(this._index - this._firstFrame)\n          / this._frameRate;\n      }\n\n      return this;\n\n    },\n\n    pause: function() {\n\n      this._playing = false;\n      return this;\n\n    },\n\n    stop: function() {\n\n      this._playing = false;\n      this._index = 0;\n\n      return this;\n\n    },\n\n    clone: function(parent) {\n\n      var clone = new ImageSequence(this.textures, this.translation.x,\n        this.translation.y, this.frameRate)\n\n      clone._loop = this._loop;\n\n      if (this._playing) {\n        clone.play();\n      }\n\n      if (parent) {\n        parent.add(clone);\n      }\n\n      return clone;\n\n    },\n\n    _update: function() {\n\n      var effects = this._textures;\n      var width, height, elapsed, amount, duration, texture;\n      var index, frames;\n\n      if (this._flagTextures) {\n        this._amount = effects.length;\n      }\n\n      if (this._flagFrameRate) {\n        this._duration = 1000 * this._amount / this._frameRate;\n      }\n\n      if (this._playing && this._frameRate > 0) {\n\n        amount = this._amount;\n\n        if (_.isNaN(this._lastFrame)) {\n          this._lastFrame = amount - 1;\n        }\n\n        // TODO: Offload perf logic to instance of `Two`.\n        elapsed = _.performance.now() - this._startTime;\n        frames = this._lastFrame + 1;\n        duration = 1000 * (frames - this._firstFrame) / this._frameRate;\n\n        if (this._loop) {\n          elapsed = elapsed % duration;\n        } else {\n          elapsed = Math.min(elapsed, duration);\n        }\n\n        index = _.lerp(this._firstFrame, frames, elapsed / duration);\n        index = Math.floor(index);\n\n        if (index !== this._index) {\n\n          this._index = index;\n          texture = effects[this._index];\n\n          if (texture.loaded) {\n\n            width = texture.image.width;\n            height = texture.image.height;\n\n            if (this.width !== width) {\n              this.width = width;\n            }\n            if (this.height !== height) {\n              this.height = height;\n            }\n\n            this.fill = texture;\n\n            if (index >= this._lastFrame - 1 && this._onLastFrame) {\n              this._onLastFrame();  // Shortcut for chainable sprite animations\n            }\n\n          }\n\n        }\n\n      } else if (this._flagIndex || !(this.fill instanceof Two.Texture)) {\n\n        texture = effects[this._index];\n\n        if (texture.loaded) {\n\n          width = texture.image.width;\n          height = texture.image.height;\n\n          if (this.width !== width) {\n            this.width = width;\n          }\n          if (this.height !== height) {\n            this.height = height;\n          }\n\n        }\n\n        this.fill = texture;\n\n      }\n\n      Rectangle.prototype._update.call(this);\n\n      return this;\n\n    },\n\n    flagReset: function() {\n\n      this._flagTextures = this._flagFrameRate = false;\n      Rectangle.prototype.flagReset.call(this);\n\n      return this;\n\n    }\n\n  });\n\n  ImageSequence.MakeObservable(ImageSequence.prototype);\n\n})((typeof global !== 'undefined' ? global : (this || window)).Two);\n\n(function(Two) {\n\n  // Constants\n\n  var min = Math.min, max = Math.max;\n  var _ = Two.Utils;\n\n  /**\n   * @class\n   * @name Two.Group.Children\n   * @extends Two.Utils.Collection\n   * @description A children collection which is accesible both by index and by object id\n   */\n  var Children = function() {\n\n    Two.Utils.Collection.apply(this, arguments);\n\n    Object.defineProperty(this, '_events', {\n      value : {},\n      enumerable: false\n    });\n\n    this.ids = {};\n\n    this.on(Two.Events.insert, this.attach);\n    this.on(Two.Events.remove, this.detach);\n    Children.prototype.attach.apply(this, arguments);\n\n  };\n\n  Children.prototype = new Two.Utils.Collection();\n\n  _.extend(Children.prototype, {\n\n    constructor: Children,\n\n    attach: function(children) {\n      for (var i = 0; i < children.length; i++) {\n        this.ids[children[i].id] = children[i];\n      }\n      return this;\n    },\n\n    detach: function(children) {\n      for (var i = 0; i < children.length; i++) {\n        delete this.ids[children[i].id];\n      }\n      return this;\n    }\n\n  });\n\n  /**\n   * @class\n   * @name Two.Group\n   */\n  var Group = Two.Group = function(children) {\n\n    Two.Shape.call(this, true);\n\n    this._renderer.type = 'group';\n\n    this.additions = [];\n    this.subtractions = [];\n\n    this.children = _.isArray(children) ? children : arguments;\n\n  };\n\n  _.extend(Group, {\n\n    Children: Children,\n\n    InsertChildren: function(children) {\n      for (var i = 0; i < children.length; i++) {\n        replaceParent.call(this, children[i], this);\n      }\n    },\n\n    RemoveChildren: function(children) {\n      for (var i = 0; i < children.length; i++) {\n        replaceParent.call(this, children[i]);\n      }\n    },\n\n    OrderChildren: function(children) {\n      this._flagOrder = true;\n    },\n\n    Properties: [\n      'fill',\n      'stroke',\n      'linewidth',\n      'visible',\n      'cap',\n      'join',\n      'miter',\n    ],\n\n    MakeObservable: function(object) {\n\n      var properties = Two.Group.Properties;\n\n      Object.defineProperty(object, 'opacity', {\n\n        enumerable: true,\n\n        get: function() {\n          return this._opacity;\n        },\n\n        set: function(v) {\n          this._flagOpacity = this._opacity !== v;\n          this._opacity = v;\n        }\n\n      });\n\n      Object.defineProperty(object, 'className', {\n\n        enumerable: true,\n\n        get: function() {\n          return this._className;\n        },\n\n        set: function(v) {\n          this._flagClassName  = this._className !== v;\n          this._className = v;\n        }\n\n      });\n\n      Object.defineProperty(object, 'beginning', {\n\n        enumerable: true,\n\n        get: function() {\n          return this._beginning;\n        },\n\n        set: function(v) {\n          this._flagBeginning = this._beginning !== v;\n          this._beginning = v;\n        }\n\n      });\n\n      Object.defineProperty(object, 'ending', {\n\n        enumerable: true,\n\n        get: function() {\n          return this._ending;\n        },\n\n        set: function(v) {\n          this._flagEnding = this._ending !== v;\n          this._ending = v;\n        }\n\n      });\n\n      Object.defineProperty(object, 'length', {\n\n        enumerable: true,\n\n        get: function() {\n          if (this._flagLength || this._length <= 0) {\n            this._length = 0;\n            for (var i = 0; i < this.children.length; i++) {\n              var child = this.children[i];\n              this._length += child.length;\n            }\n          }\n          return this._length;\n        }\n\n      });\n\n      Two.Shape.MakeObservable(object);\n      Group.MakeGetterSetters(object, properties);\n\n      Object.defineProperty(object, 'children', {\n\n        enumerable: true,\n\n        get: function() {\n          return this._children;\n        },\n\n        set: function(children) {\n\n          var insertChildren = _.bind(Group.InsertChildren, this);\n          var removeChildren = _.bind(Group.RemoveChildren, this);\n          var orderChildren = _.bind(Group.OrderChildren, this);\n\n          if (this._children) {\n            this._children.unbind();\n          }\n\n          this._children = new Children(children);\n          this._children.bind(Two.Events.insert, insertChildren);\n          this._children.bind(Two.Events.remove, removeChildren);\n          this._children.bind(Two.Events.order, orderChildren);\n\n        }\n\n      });\n\n      Object.defineProperty(object, 'mask', {\n\n        enumerable: true,\n\n        get: function() {\n          return this._mask;\n        },\n\n        set: function(v) {\n          this._mask = v;\n          this._flagMask = true;\n          if (!v.clip) {\n            v.clip = true;\n          }\n        }\n\n      });\n\n    },\n\n    MakeGetterSetters: function(group, properties) {\n\n      if (!_.isArray(properties)) {\n        properties = [properties];\n      }\n\n      _.each(properties, function(k) {\n        Group.MakeGetterSetter(group, k);\n      });\n\n    },\n\n    MakeGetterSetter: function(group, k) {\n\n      var secret = '_' + k;\n\n      Object.defineProperty(group, k, {\n\n        enumerable: true,\n\n        get: function() {\n          return this[secret];\n        },\n\n        set: function(v) {\n          this[secret] = v;\n          _.each(this.children, function(child) { // Trickle down styles\n            child[k] = v;\n          });\n        }\n\n      });\n\n    }\n\n  });\n\n  _.extend(Group.prototype, Two.Shape.prototype, {\n\n    // Flags\n    // http://en.wikipedia.org/wiki/Flag\n\n    _flagAdditions: false,\n    _flagSubtractions: false,\n    _flagOrder: false,\n    _flagOpacity: true,\n    _flagClassName: false,\n    _flagBeginning: false,\n    _flagEnding: false,\n\n    _flagLength: false,\n    _flagMask: false,\n\n    // Underlying Properties\n\n    _fill: '#fff',\n    _stroke: '#000',\n    _linewidth: 1.0,\n    _opacity: 1.0,\n    _className: '',\n    _visible: true,\n\n    _cap: 'round',\n    _join: 'round',\n    _miter: 4,\n\n    _closed: true,\n    _curved: false,\n    _automatic: true,\n    _beginning: 0,\n    _ending: 1.0,\n\n    _length: 0,\n    _mask: null,\n\n    constructor: Group,\n\n    // /**\n    //  * TODO: Group has a gotcha in that it's at the moment required to be bound to\n    //  * an instance of two in order to add elements correctly. This needs to\n    //  * be rethought and fixed.\n    //  */\n    clone: function(parent) {\n\n      var group = new Group();\n      var children = _.map(this.children, function(child) {\n        return child.clone();\n      });\n\n      group.add(children);\n\n      group.opacity = this.opacity;\n\n      if (this.mask) {\n        group.mask = this.mask;\n      }\n\n      group.translation.copy(this.translation);\n      group.rotation = this.rotation;\n      group.scale = this.scale;\n      group.className = this.className;\n\n      if (parent) {\n        parent.add(group);\n      }\n\n      return group._update();\n\n    },\n\n    // /**\n    //  * Export the data from the instance of Two.Group into a plain JavaScript\n    //  * object. This also makes all children plain JavaScript objects. Great\n    //  * for turning into JSON and storing in a database.\n    //  */\n    toObject: function() {\n\n      var result = {\n        children: [],\n        translation: this.translation.toObject(),\n        rotation: this.rotation,\n        scale: this.scale instanceof Two.Vector ? this.scale.toObject() : this.scale,\n        opacity: this.opacity,\n        className: this.className,\n        mask: (this.mask ? this.mask.toObject() : null)\n      };\n\n      _.each(this.children, function(child, i) {\n        result.children[i] = child.toObject();\n      }, this);\n\n      return result;\n\n    },\n\n    // /**\n    //  * Anchor all children to the upper left hand corner\n    //  * of the group.\n    //  */\n    corner: function() {\n\n      var rect = this.getBoundingClientRect(true),\n       corner = { x: rect.left, y: rect.top };\n\n      this.children.forEach(function(child) {\n        child.translation.sub(corner);\n      });\n\n      return this;\n\n    },\n\n    // /**\n    //  * Anchors all children around the center of the group,\n    //  * effectively placing the shape around the unit circle.\n    //  */\n    center: function() {\n\n      var rect = this.getBoundingClientRect(true);\n\n      rect.centroid = {\n        x: rect.left + rect.width / 2,\n        y: rect.top + rect.height / 2\n      };\n\n      this.children.forEach(function(child) {\n        if (child.isShape) {\n          child.translation.sub(rect.centroid);\n        }\n      });\n\n      // this.translation.copy(rect.centroid);\n\n      return this;\n\n    },\n\n    // /**\n    //  * Recursively search for id. Returns the first element found.\n    //  * Returns null if none found.\n    //  */\n    getById: function (id) {\n      var search = function (node, id) {\n        if (node.id === id) {\n          return node;\n        } else if (node.children) {\n          var i = node.children.length;\n          while (i--) {\n            var found = search(node.children[i], id);\n            if (found) return found;\n          }\n        }\n\n      };\n      return search(this, id) || null;\n    },\n\n    // /**\n    //  * Recursively search for classes. Returns an array of matching elements.\n    //  * Empty array if none found.\n    //  */\n    getByClassName: function (cl) {\n      var found = [];\n      var search = function (node, cl) {\n        if (node.classList.indexOf(cl) != -1) {\n          found.push(node);\n        } else if (node.children) {\n          node.children.forEach(function (child) {\n            search(child, cl);\n          });\n        }\n        return found;\n      };\n      return search(this, cl);\n    },\n\n    // /**\n    //  * Recursively search for children of a specific type,\n    //  * e.g. Two.Polygon. Pass a reference to this type as the param.\n    //  * Returns an empty array if none found.\n    //  */\n    getByType: function(type) {\n      var found = [];\n      var search = function (node, type) {\n        for (var id in node.children) {\n          if (node.children[id] instanceof type) {\n            found.push(node.children[id]);\n          } else if (node.children[id] instanceof Two.Group) {\n            search(node.children[id], type);\n          }\n        }\n        return found;\n      };\n      return search(this, type);\n    },\n\n    // /**\n    //  * Add objects to the group.\n    //  */\n    add: function(objects) {\n\n      // Allow to pass multiple objects either as array or as multiple arguments\n      // If it's an array also create copy of it in case we're getting passed\n      // a childrens array directly.\n      if (!(objects instanceof Array)) {\n        objects = _.toArray(arguments);\n      } else {\n        objects = objects.slice();\n      }\n\n      // Add the objects\n      for (var i = 0; i < objects.length; i++) {\n        if (!(objects[i] && objects[i].id)) continue;\n        this.children.push(objects[i]);\n      }\n\n      return this;\n\n    },\n\n    // /**\n    //  * Remove objects from the group.\n    //  */\n    remove: function(objects) {\n\n      var l = arguments.length,\n        grandparent = this.parent;\n\n      // Allow to call remove without arguments\n      // This will detach the object from its own parent.\n      if (l <= 0 && grandparent) {\n        grandparent.remove(this);\n        return this;\n      }\n\n      // Allow to pass multiple objects either as array or as multiple arguments\n      // If it's an array also create copy of it in case we're getting passed\n      // a childrens array directly.\n      if (!(objects instanceof Array)) {\n        objects = _.toArray(arguments);\n      } else {\n        objects = objects.slice();\n      }\n\n      // Remove the objects\n      for (var i = 0; i < objects.length; i++) {\n        if (!objects[i] || !(this.children.ids[objects[i].id])) continue;\n        this.children.splice(_.indexOf(this.children, objects[i]), 1);\n      }\n\n      return this;\n\n    },\n\n    // /**\n    //  * Return an object with top, left, right, bottom, width, and height\n    //  * parameters of the group.\n    //  */\n    getBoundingClientRect: function(shallow) {\n      var rect;\n\n      // TODO: Update this to not __always__ update. Just when it needs to.\n      this._update(true);\n\n      // Variables need to be defined here, because of nested nature of groups.\n      var left = Infinity, right = -Infinity,\n          top = Infinity, bottom = -Infinity;\n\n      var regex = Two.Texture.RegularExpressions.effect;\n\n      for (var i = 0; i < this.children.length; i++) {\n\n        var child = this.children[i];\n\n        if (!child.visible || regex.test(child._renderer.type)) {\n          continue;\n        }\n\n        rect = child.getBoundingClientRect(shallow);\n\n        if (!_.isNumber(rect.top)   || !_.isNumber(rect.left)   ||\n            !_.isNumber(rect.right) || !_.isNumber(rect.bottom)) {\n          continue;\n        }\n\n        top = min(rect.top, top);\n        left = min(rect.left, left);\n        right = max(rect.right, right);\n        bottom = max(rect.bottom, bottom);\n\n      }\n\n      return {\n        top: top,\n        left: left,\n        right: right,\n        bottom: bottom,\n        width: right - left,\n        height: bottom - top\n      };\n\n    },\n\n    // /**\n    //  * Trickle down of noFill\n    //  */\n    noFill: function() {\n      this.children.forEach(function(child) {\n        child.noFill();\n      });\n      return this;\n    },\n\n    // /**\n    //  * Trickle down of noStroke\n    //  */\n    noStroke: function() {\n      this.children.forEach(function(child) {\n        child.noStroke();\n      });\n      return this;\n    },\n\n    // /**\n    //  * Trickle down subdivide\n    //  */\n    subdivide: function() {\n      var args = arguments;\n      this.children.forEach(function(child) {\n        child.subdivide.apply(child, args);\n      });\n      return this;\n    },\n\n    _update: function() {\n\n      if (this._flagBeginning || this._flagEnding) {\n\n        var beginning = Math.min(this._beginning, this._ending);\n        var ending = Math.max(this._beginning, this._ending);\n        var length = this.length;\n        var sum = 0;\n\n        var bd = beginning * length;\n        var ed = ending * length;\n        var distance = (ed - bd);\n\n        for (var i = 0; i < this.children.length; i++) {\n\n          var child = this.children[i];\n          var l = child.length;\n\n          if (bd > sum + l) {\n            child.beginning = 1;\n            child.ending = 1;\n          } else if (ed < sum) {\n            child.beginning = 0;\n            child.ending = 0;\n          } else if (bd > sum && bd < sum + l) {\n            child.beginning = (bd - sum) / l;\n            child.ending = 1;\n          } else if (ed > sum && ed < sum + l) {\n            child.beginning = 0;\n            child.ending = (ed - sum) / l;\n          } else {\n            child.beginning = 0;\n            child.ending = 1;\n          }\n\n          sum += l;\n\n        }\n\n      }\n\n      return Two.Shape.prototype._update.apply(this, arguments);\n\n    },\n\n    flagReset: function() {\n\n      if (this._flagAdditions) {\n        this.additions.length = 0;\n        this._flagAdditions = false;\n      }\n\n      if (this._flagSubtractions) {\n        this.subtractions.length = 0;\n        this._flagSubtractions = false;\n      }\n\n      this._flagOrder = this._flagMask = this._flagOpacity = this._flagClassName\n        this._flagBeginning = this._flagEnding = false;\n\n      Two.Shape.prototype.flagReset.call(this);\n\n      return this;\n\n    }\n\n  });\n\n  Group.MakeObservable(Group.prototype);\n\n  // /**\n  //  * Helper function used to sync parent-child relationship within the\n  //  * `Two.Group.children` object.\n  //  *\n  //  * Set the parent of the passed object to another object\n  //  * and updates parent-child relationships\n  //  * Calling with one arguments will simply remove the parenting\n  //  */\n  function replaceParent(child, newParent) {\n\n    var parent = child.parent;\n    var index;\n\n    if (parent === newParent) {\n      this.additions.push(child);\n      this._flagAdditions = true;\n      return;\n    }\n\n    if (parent && parent.children.ids[child.id]) {\n\n      index = _.indexOf(parent.children, child);\n      parent.children.splice(index, 1);\n\n      // If we're passing from one parent to another...\n      index = _.indexOf(parent.additions, child);\n\n      if (index >= 0) {\n        parent.additions.splice(index, 1);\n      } else {\n        parent.subtractions.push(child);\n        parent._flagSubtractions = true;\n      }\n\n    }\n\n    if (newParent) {\n      child.parent = newParent;\n      this.additions.push(child);\n      this._flagAdditions = true;\n      return;\n    }\n\n    // If we're passing from one parent to another...\n    index = _.indexOf(this.additions, child);\n\n    if (index >= 0) {\n      this.additions.splice(index, 1);\n    } else {\n      this.subtractions.push(child);\n      this._flagSubtractions = true;\n    }\n\n    delete child.parent;\n\n  }\n\n})((typeof global !== 'undefined' ? global : (this || window)).Two);\n\n\nexport default (this || window).Two;\n","'use strict';\n\nfunction ToObject(val) {\n\tif (val == null) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nmodule.exports = Object.assign || function (target, source) {\n\tvar from;\n\tvar keys;\n\tvar to = ToObject(target);\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = arguments[s];\n\t\tkeys = Object.keys(Object(from));\n\n\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\tto[keys[i]] = from[keys[i]];\n\t\t}\n\t}\n\n\treturn to;\n};\n","module.exports = cross;\n\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nfunction cross(out, a, b) {\n    var ax = a[0], ay = a[1], az = a[2],\n        bx = b[0], by = b[1], bz = b[2]\n\n    out[0] = ay * bz - az * by\n    out[1] = az * bx - ax * bz\n    out[2] = ax * by - ay * bx\n    return out\n}","module.exports = dot;\n\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} dot product of a and b\n */\nfunction dot(a, b) {\n    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2]\n}","module.exports = subtract;\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nfunction subtract(out, a, b) {\n    out[0] = a[0] - b[0]\n    out[1] = a[1] - b[1]\n    out[2] = a[2] - b[2]\n    return out\n}","var cross = require('gl-vec3/cross');\nvar dot = require('gl-vec3/dot');\nvar sub = require('gl-vec3/subtract');\n\nvar EPSILON = 0.000001;\nvar edge1 = [0,0,0];\nvar edge2 = [0,0,0];\nvar tvec = [0,0,0];\nvar pvec = [0,0,0];\nvar qvec = [0,0,0];\n\nmodule.exports = intersectTriangle;\n\nfunction intersectTriangle (out, pt, dir, tri) {\n    sub(edge1, tri[1], tri[0]);\n    sub(edge2, tri[2], tri[0]);\n    \n    cross(pvec, dir, edge2);\n    var det = dot(edge1, pvec);\n    \n    if (det < EPSILON) return null;\n    sub(tvec, pt, tri[0]);\n    var u = dot(tvec, pvec);\n    if (u < 0 || u > det) return null;\n    cross(qvec, tvec, edge1);\n    var v = dot(dir, qvec);\n    if (v < 0 || u + v > det) return null;\n    \n    var t = dot(edge2, qvec) / det;\n    out[0] = pt[0] + t * dir[0];\n    out[1] = pt[1] + t * dir[1];\n    out[2] = pt[2] + t * dir[2];\n    return out;\n}\n","module.exports = add;\n\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nfunction add(out, a, b) {\n    out[0] = a[0] + b[0]\n    out[1] = a[1] + b[1]\n    out[2] = a[2] + b[2]\n    return out\n}","module.exports = scale;\n\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\nfunction scale(out, a, b) {\n    out[0] = a[0] * b\n    out[1] = a[1] * b\n    out[2] = a[2] * b\n    return out\n}","module.exports = copy;\n\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the source vector\n * @returns {vec3} out\n */\nfunction copy(out, a) {\n    out[0] = a[0]\n    out[1] = a[1]\n    out[2] = a[2]\n    return out\n}","var dot = require('gl-vec3/dot')\nvar add = require('gl-vec3/add')\nvar scale = require('gl-vec3/scale')\nvar copy = require('gl-vec3/copy')\n\nmodule.exports = intersectRayPlane\n\nvar v0 = [0, 0, 0]\n\nfunction intersectRayPlane(out, origin, direction, normal, dist) {\n  var denom = dot(direction, normal)\n  if (denom !== 0) {\n    var t = -(dot(origin, normal) + dist) / denom\n    if (t < 0) {\n      return null\n    }\n    scale(v0, direction, t)\n    return add(out, origin, v0)\n  } else if (dot(normal, origin) + dist === 0) {\n    return copy(out, origin)\n  } else {\n    return null\n  }\n}\n","module.exports = squaredDistance;\n\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\nfunction squaredDistance(a, b) {\n    var x = b[0] - a[0],\n        y = b[1] - a[1],\n        z = b[2] - a[2]\n    return x*x + y*y + z*z\n}","module.exports = scaleAndAdd;\n\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\nfunction scaleAndAdd(out, a, b, scale) {\n    out[0] = a[0] + (b[0] * scale)\n    out[1] = a[1] + (b[1] * scale)\n    out[2] = a[2] + (b[2] * scale)\n    return out\n}","var squaredDist = require('gl-vec3/squaredDistance')\nvar dot = require('gl-vec3/dot')\nvar sub = require('gl-vec3/subtract')\nvar scaleAndAdd = require('gl-vec3/scaleAndAdd')\nvar scale = require('gl-vec3/scale')\nvar add = require('gl-vec3/add')\n\nvar tmp = [0, 0, 0]\n\nmodule.exports = intersectRaySphere\nfunction intersectRaySphere (out, origin, direction, center, radius) {\n  sub(tmp, center, origin)\n  var len = dot(direction, tmp)\n  if (len < 0) { // sphere is behind ray\n    return null\n  }\n\n  scaleAndAdd(tmp, origin, direction, len)\n  var dSq = squaredDist(center, tmp)\n  var rSq = radius * radius\n  if (dSq > rSq) {\n    return null\n  }\n\n  scale(out, direction, len - Math.sqrt(rSq - dSq))\n  return add(out, out, origin)\n}\n","module.exports = intersection\nmodule.exports.distance = distance\n\nfunction intersection (out, ro, rd, aabb) {\n  var d = distance(ro, rd, aabb)\n  if (d === Infinity) {\n    out = null\n  } else {\n    out = out || []\n    for (var i = 0; i < ro.length; i++) {\n      out[i] = ro[i] + rd[i] * d\n    }\n  }\n\n  return out\n}\n\nfunction distance (ro, rd, aabb) {\n  var dims = ro.length\n  var lo = -Infinity\n  var hi = +Infinity\n\n  for (var i = 0; i < dims; i++) {\n    var dimLo = (aabb[0][i] - ro[i]) / rd[i]\n    var dimHi = (aabb[1][i] - ro[i]) / rd[i]\n\n    if (dimLo > dimHi) {\n      var tmp = dimLo\n      dimLo = dimHi\n      dimHi = tmp\n    }\n\n    if (dimHi < lo || dimLo > hi) {\n      return Infinity\n    }\n\n    if (dimLo > lo) lo = dimLo\n    if (dimHi < hi) hi = dimHi\n  }\n\n  return lo > hi ? Infinity : lo\n}\n","var intersectRayTriangle = require('ray-triangle-intersection')\nvar intersectRayPlane = require('ray-plane-intersection')\nvar intersectRaySphere = require('ray-sphere-intersection')\nvar intersectRayBox = require('ray-aabb-intersection')\nvar copy3 = require('gl-vec3/copy')\n\nvar tmpTriangle = [\n  [0, 0, 0],\n  [0, 0, 0],\n  [0, 0, 0]\n]\n\nvar tmp3 = [0, 0, 0]\n\nmodule.exports = Ray\nfunction Ray (origin, direction) {\n  this.origin = origin || [ 0, 0, 0 ]\n  this.direction = direction || [ 0, 0, -1 ]\n}\n\nRay.prototype.set = function (origin, direction) {\n  this.origin = origin\n  this.direction = direction\n}\n\nRay.prototype.copy = function (other) {\n  copy3(this.origin, other.origin)\n  copy3(this.direction, other.direction)\n}\n\nRay.prototype.clone = function () {\n  var other = new Ray()\n  other.copy(this)\n  return other\n}\n\nRay.prototype.intersectsSphere = function (center, radius) {\n  return intersectRaySphere(tmp3, this.origin, this.direction, center, radius)\n}\n\nRay.prototype.intersectsPlane = function (normal, distance) {\n  return intersectRayPlane(tmp3, this.origin, this.direction, normal, distance)\n}\n\nRay.prototype.intersectsTriangle = function (triangle) {\n  return intersectRayTriangle(tmp3, this.origin, this.direction, triangle)\n}\n\nRay.prototype.intersectsBox = function (aabb) {\n  return intersectRayBox(tmp3, this.origin, this.direction, aabb)\n}\n\nRay.prototype.intersectsTriangleCell = function (cell, positions) {\n  var a = cell[0], b = cell[1], c = cell[2]\n  tmpTriangle[0] = positions[a]\n  tmpTriangle[1] = positions[b]\n  tmpTriangle[2] = positions[c]\n  return this.intersectsTriangle(tmpTriangle)\n}\n","module.exports = transformMat4\n\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the vector to transform\n * @param {mat4} m matrix to transform with\n * @returns {vec4} out\n */\nfunction transformMat4 (out, a, m) {\n  var x = a[0], y = a[1], z = a[2], w = a[3]\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w\n  return out\n}\n","module.exports = set\n\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\nfunction set (out, x, y, z, w) {\n  out[0] = x\n  out[1] = y\n  out[2] = z\n  out[3] = w\n  return out\n}\n","var transformMat4 = require('gl-vec4/transformMat4')\nvar set = require('gl-vec4/set')\n\nvar NEAR_RANGE = 0\nvar FAR_RANGE = 1\nvar tmp4 = [0, 0, 0, 0]\n\nmodule.exports = cameraProject\nfunction cameraProject (out, vec, viewport, combinedProjView) {\n  var vX = viewport[0],\n    vY = viewport[1],\n    vWidth = viewport[2],\n    vHeight = viewport[3],\n    n = NEAR_RANGE,\n    f = FAR_RANGE\n\n  // convert: clip space -> NDC -> window coords\n  // implicit 1.0 for w component\n  set(tmp4, vec[0], vec[1], vec[2], 1.0)\n\n  // transform into clip space\n  transformMat4(tmp4, tmp4, combinedProjView)\n\n  // now transform into NDC\n  var w = tmp4[3]\n  if (w !== 0) { // how to handle infinity here?\n    tmp4[0] = tmp4[0] / w\n    tmp4[1] = tmp4[1] / w\n    tmp4[2] = tmp4[2] / w\n  }\n\n  // and finally into window coordinates\n  // the foruth component is (1/clip.w)\n  // which is the same as gl_FragCoord.w\n  out[0] = vX + vWidth / 2 * tmp4[0] + (0 + vWidth / 2)\n  out[1] = vY + vHeight / 2 * tmp4[1] + (0 + vHeight / 2)\n  out[2] = (f - n) / 2 * tmp4[2] + (f + n) / 2\n  out[3] = w === 0 ? 0 : 1 / w\n  return out\n}\n","module.exports = project\n\n/**\n * Multiplies the input vec by the specified matrix, \n * applying a W divide, and stores the result in out \n * vector. This is useful for projection,\n * e.g. unprojecting a 2D point into 3D space.\n *\n * @method  prj\n * @param {vec3} out the output vector\n * @param {vec3} vec the input vector to project\n * @param {mat4} m the 4x4 matrix to multiply with \n * @return {vec3} the out vector\n */\nfunction project (out, vec, m) {\n  var x = vec[0],\n    y = vec[1],\n    z = vec[2],\n    a00 = m[0], a01 = m[1], a02 = m[2], a03 = m[3],\n    a10 = m[4], a11 = m[5], a12 = m[6], a13 = m[7],\n    a20 = m[8], a21 = m[9], a22 = m[10], a23 = m[11],\n    a30 = m[12], a31 = m[13], a32 = m[14], a33 = m[15]\n\n  var lw = 1 / (x * a03 + y * a13 + z * a23 + a33)\n\n  out[0] = (x * a00 + y * a10 + z * a20 + a30) * lw\n  out[1] = (x * a01 + y * a11 + z * a21 + a31) * lw\n  out[2] = (x * a02 + y * a12 + z * a22 + a32) * lw\n  return out\n}\n","var transform = require('./lib/projectMat4')\n\nmodule.exports = unproject\n\n/**\n * Unproject a point from screen space to 3D space.\n * The point should have its x and y properties set to\n * 2D screen space, and the z either at 0 (near plane)\n * or 1 (far plane). The provided matrix is assumed to already\n * be combined, i.e. projection * view.\n *\n * After this operation, the out vector's [x, y, z] components will\n * represent the unprojected 3D coordinate.\n *\n * @param  {vec3} out               the output vector\n * @param  {vec3} vec               the 2D space vector to unproject\n * @param  {vec4} viewport          screen x, y, width and height in pixels\n * @param  {mat4} invProjectionView combined projection and view matrix\n * @return {vec3}                   the output vector\n */\nfunction unproject (out, vec, viewport, invProjectionView) {\n  var viewX = viewport[0],\n    viewY = viewport[1],\n    viewWidth = viewport[2],\n    viewHeight = viewport[3]\n\n  var x = vec[0],\n    y = vec[1],\n    z = vec[2]\n\n  x = x - viewX\n  y = viewHeight - y - 1\n  y = y - viewY\n\n  out[0] = (2 * x) / viewWidth - 1\n  out[1] = (2 * y) / viewHeight - 1\n  out[2] = 2 * z - 1\n  return transform(out, out, invProjectionView)\n}\n","module.exports = normalize;\n\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to normalize\n * @returns {vec3} out\n */\nfunction normalize(out, a) {\n    var x = a[0],\n        y = a[1],\n        z = a[2]\n    var len = x*x + y*y + z*z\n    if (len > 0) {\n        //TODO: evaluate use of glm_invsqrt here?\n        len = 1 / Math.sqrt(len)\n        out[0] = a[0] * len\n        out[1] = a[1] * len\n        out[2] = a[2] * len\n    }\n    return out\n}","// could be modularized...\nvar cross = require('gl-vec3/cross')\nvar sub = require('gl-vec3/subtract')\nvar normalize = require('gl-vec3/normalize')\nvar copy = require('gl-vec3/copy')\nvar dot = require('gl-vec3/dot')\nvar scale = require('gl-vec3/scale')\n\nvar tmp = [0, 0, 0]\nvar epsilon = 0.000000001\n\n// modifies direction & up vectors in place\nmodule.exports = function (direction, up, position, target) {\n  sub(tmp, target, position)\n  normalize(tmp, tmp)\n  var isZero = tmp[0] === 0 && tmp[1] === 0 && tmp[2] === 0\n  if (!isZero) {\n    var d = dot(tmp, up)\n    if (Math.abs(d - 1) < epsilon) { // collinear\n      scale(up, direction, -1)\n    } else if (Math.abs(d + 1) < epsilon) { // collinear opposite\n      copy(up, direction)\n    }\n    copy(direction, tmp)\n\n    // normalize up vector\n    cross(tmp, direction, up)\n    normalize(tmp, tmp)\n\n    cross(up, tmp, direction)\n    normalize(up, up)\n  }\n}\n","module.exports = set;\n\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\nfunction set(out, x, y, z) {\n    out[0] = x\n    out[1] = y\n    out[2] = z\n    return out\n}","var unproject = require('camera-unproject')\nvar set = require('gl-vec3/set')\nvar sub = require('gl-vec3/subtract')\nvar normalize = require('gl-vec3/normalize')\n\nmodule.exports = createPickRay\nfunction createPickRay(origin, direction, point, viewport, invProjView) {\n  set(origin, point[0], point[1], 0)\n  set(direction, point[0], point[1], 1)\n  unproject(origin, origin, viewport, invProjView)\n  unproject(direction, direction, viewport, invProjView)\n  sub(direction, direction, origin)\n  normalize(direction, direction)\n}","module.exports = multiply;\n\n/**\n * Multiplies two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @returns {mat4} out\n */\nfunction multiply(out, a, b) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n\n    // Cache only the current line of the second matrix\n    var b0  = b[0], b1 = b[1], b2 = b[2], b3 = b[3];  \n    out[0] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[1] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[2] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[3] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[4]; b1 = b[5]; b2 = b[6]; b3 = b[7];\n    out[4] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[5] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[6] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[7] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[8]; b1 = b[9]; b2 = b[10]; b3 = b[11];\n    out[8] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[9] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[10] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[11] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[12]; b1 = b[13]; b2 = b[14]; b3 = b[15];\n    out[12] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[13] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[14] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[15] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n    return out;\n};","module.exports = invert;\n\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nfunction invert(out, a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15],\n\n        b00 = a00 * a11 - a01 * a10,\n        b01 = a00 * a12 - a02 * a10,\n        b02 = a00 * a13 - a03 * a10,\n        b03 = a01 * a12 - a02 * a11,\n        b04 = a01 * a13 - a03 * a11,\n        b05 = a02 * a13 - a03 * a12,\n        b06 = a20 * a31 - a21 * a30,\n        b07 = a20 * a32 - a22 * a30,\n        b08 = a20 * a33 - a23 * a30,\n        b09 = a21 * a32 - a22 * a31,\n        b10 = a21 * a33 - a23 * a31,\n        b11 = a22 * a33 - a23 * a32,\n\n        // Calculate the determinant\n        det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n    if (!det) { \n        return null; \n    }\n    det = 1.0 / det;\n\n    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n    out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n    out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n    out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n    out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n    out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n    out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n    out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n    out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n    out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n    out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n    out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n    out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n    out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n    out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n    out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n\n    return out;\n};","module.exports = identity;\n\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\nfunction identity(out) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n};","var assign = require('object-assign')\nvar Ray = require('ray-3d')\n\nvar cameraProject = require('camera-project')\nvar cameraUnproject = require('camera-unproject')\nvar cameraLookAt = require('./camera-look-at')\nvar cameraPickRay = require('camera-picking-ray')\n\nvar add = require('gl-vec3/add')\nvar multiply4x4 = require('gl-mat4/multiply')\nvar invert4x4 = require('gl-mat4/invert')\nvar identity4x4 = require('gl-mat4/identity')\nvar setVec3 = require('gl-vec3/set')\n\n// this could also be useful for a orthographic camera\nmodule.exports = function cameraBase (opt) {\n  opt = opt || {}\n\n  var camera = {\n    projection: identity4x4([]),\n    view: identity4x4([]),\n    position: opt.position || [0, 0, 0],\n    direction: opt.direction || [0, 0, -1],\n    up: opt.up || [0, 1, 0],\n    viewport: opt.viewport || [ -1, -1, 1, 1 ],\n    projView: identity4x4([]),\n    invProjView: identity4x4([])\n  }\n\n  function update () {\n    multiply4x4(camera.projView, camera.projection, camera.view)\n    var valid = invert4x4(camera.invProjView, camera.projView)\n    if (!valid) {\n      throw new Error('camera projection * view is non-invertible')\n    }\n  }\n\n  function lookAt (target) {\n    cameraLookAt(camera.direction, camera.up, camera.position, target)\n    return camera\n  }\n\n  function identity () {\n    setVec3(camera.position, 0, 0, 0)\n    setVec3(camera.direction, 0, 0, -1)\n    setVec3(camera.up, 0, 1, 0)\n    identity4x4(camera.view)\n    identity4x4(camera.projection)\n    identity4x4(camera.projView)\n    identity4x4(camera.invProjView)\n    return camera\n  }\n\n  function translate (vec) {\n    add(camera.position, camera.position, vec)\n    return camera\n  }\n\n  function createPickingRay (mouse) {\n    var ray = new Ray()\n    cameraPickRay(ray.origin, ray.direction, mouse, camera.viewport, camera.invProjView)\n    return ray\n  }\n\n  function project (point) {\n    return cameraProject([], point, camera.viewport, camera.projView)\n  }\n\n  function unproject (point) {\n    return cameraUnproject([], point, camera.viewport, camera.invProjView)\n  }\n\n  return assign(camera, {\n    translate: translate,\n    identity: identity,\n    lookAt: lookAt,\n    createPickingRay: createPickingRay,\n    update: update,\n    project: project,\n    unproject: unproject\n  })\n}\n","module.exports = function () {\n    for (var i = 0; i < arguments.length; i++) {\n        if (arguments[i] !== undefined) return arguments[i];\n    }\n};\n","module.exports = perspective;\n\n/**\n * Generates a perspective projection matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nfunction perspective(out, fovy, aspect, near, far) {\n    var f = 1.0 / Math.tan(fovy / 2),\n        nf = 1 / (near - far);\n    out[0] = f / aspect;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = f;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = (far + near) * nf;\n    out[11] = -1;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = (2 * far * near) * nf;\n    out[15] = 0;\n    return out;\n};","var identity = require('./identity');\n\nmodule.exports = lookAt;\n\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {vec3} eye Position of the viewer\n * @param {vec3} center Point the viewer is looking at\n * @param {vec3} up vec3 pointing up\n * @returns {mat4} out\n */\nfunction lookAt(out, eye, center, up) {\n    var x0, x1, x2, y0, y1, y2, z0, z1, z2, len,\n        eyex = eye[0],\n        eyey = eye[1],\n        eyez = eye[2],\n        upx = up[0],\n        upy = up[1],\n        upz = up[2],\n        centerx = center[0],\n        centery = center[1],\n        centerz = center[2];\n\n    if (Math.abs(eyex - centerx) < 0.000001 &&\n        Math.abs(eyey - centery) < 0.000001 &&\n        Math.abs(eyez - centerz) < 0.000001) {\n        return identity(out);\n    }\n\n    z0 = eyex - centerx;\n    z1 = eyey - centery;\n    z2 = eyez - centerz;\n\n    len = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n\n    x0 = upy * z2 - upz * z1;\n    x1 = upz * z0 - upx * z2;\n    x2 = upx * z1 - upy * z0;\n    len = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);\n    if (!len) {\n        x0 = 0;\n        x1 = 0;\n        x2 = 0;\n    } else {\n        len = 1 / len;\n        x0 *= len;\n        x1 *= len;\n        x2 *= len;\n    }\n\n    y0 = z1 * x2 - z2 * x1;\n    y1 = z2 * x0 - z0 * x2;\n    y2 = z0 * x1 - z1 * x0;\n\n    len = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);\n    if (!len) {\n        y0 = 0;\n        y1 = 0;\n        y2 = 0;\n    } else {\n        len = 1 / len;\n        y0 *= len;\n        y1 *= len;\n        y2 *= len;\n    }\n\n    out[0] = x0;\n    out[1] = y0;\n    out[2] = z0;\n    out[3] = 0;\n    out[4] = x1;\n    out[5] = y1;\n    out[6] = z1;\n    out[7] = 0;\n    out[8] = x2;\n    out[9] = y2;\n    out[10] = z2;\n    out[11] = 0;\n    out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n    out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n    out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n    out[15] = 1;\n\n    return out;\n};","var create = require('./camera-base')\nvar assign = require('object-assign')\nvar defined = require('defined')\n\nvar perspective = require('gl-mat4/perspective')\nvar lookAt4x4 = require('gl-mat4/lookAt')\nvar add = require('gl-vec3/add')\n\nmodule.exports = function cameraPerspective (opt) {\n  opt = opt || {}\n\n  var camera = create(opt)\n  camera.fov = defined(opt.fov, Math.PI / 4)\n  camera.near = defined(opt.near, 1)\n  camera.far = defined(opt.far, 100)\n\n  var center = [0, 0, 0]\n\n  var updateCombined = camera.update\n\n  function update () {\n    var aspect = camera.viewport[2] / camera.viewport[3]\n\n    // build projection matrix\n    perspective(camera.projection, camera.fov, aspect, Math.abs(camera.near), Math.abs(camera.far))\n\n    // build view matrix\n    add(center, camera.position, camera.direction)\n    lookAt4x4(camera.view, camera.position, center, camera.up)\n\n    // update projection * view and invert\n    updateCombined()\n    return camera\n  }\n\n  // set it up initially from constructor options\n  update()\n  return assign(camera, {\n    update: update\n  })\n}\n","module.exports = require('./lib/camera-perspective')\n","module.exports = create;\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\nfunction create() {\n    var out = new Float32Array(16);\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n};","module.exports = clone;\n\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {mat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\nfunction clone(a) {\n    var out = new Float32Array(16);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n};","module.exports = copy;\n\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nfunction copy(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n};","module.exports = transpose;\n\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nfunction transpose(out, a) {\n    // If we are transposing ourselves we can skip a few steps but have to cache some values\n    if (out === a) {\n        var a01 = a[1], a02 = a[2], a03 = a[3],\n            a12 = a[6], a13 = a[7],\n            a23 = a[11];\n\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a01;\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a02;\n        out[9] = a12;\n        out[11] = a[14];\n        out[12] = a03;\n        out[13] = a13;\n        out[14] = a23;\n    } else {\n        out[0] = a[0];\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a[1];\n        out[5] = a[5];\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a[2];\n        out[9] = a[6];\n        out[10] = a[10];\n        out[11] = a[14];\n        out[12] = a[3];\n        out[13] = a[7];\n        out[14] = a[11];\n        out[15] = a[15];\n    }\n    \n    return out;\n};","module.exports = adjoint;\n\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nfunction adjoint(out, a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n\n    out[0]  =  (a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22));\n    out[1]  = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n    out[2]  =  (a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12));\n    out[3]  = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n    out[4]  = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n    out[5]  =  (a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22));\n    out[6]  = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n    out[7]  =  (a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12));\n    out[8]  =  (a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21));\n    out[9]  = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n    out[10] =  (a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11));\n    out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n    out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n    out[13] =  (a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21));\n    out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n    out[15] =  (a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11));\n    return out;\n};","module.exports = determinant;\n\n/**\n * Calculates the determinant of a mat4\n *\n * @param {mat4} a the source matrix\n * @returns {Number} determinant of a\n */\nfunction determinant(a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15],\n\n        b00 = a00 * a11 - a01 * a10,\n        b01 = a00 * a12 - a02 * a10,\n        b02 = a00 * a13 - a03 * a10,\n        b03 = a01 * a12 - a02 * a11,\n        b04 = a01 * a13 - a03 * a11,\n        b05 = a02 * a13 - a03 * a12,\n        b06 = a20 * a31 - a21 * a30,\n        b07 = a20 * a32 - a22 * a30,\n        b08 = a20 * a33 - a23 * a30,\n        b09 = a21 * a32 - a22 * a31,\n        b10 = a21 * a33 - a23 * a31,\n        b11 = a22 * a33 - a23 * a32;\n\n    // Calculate the determinant\n    return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n};","module.exports = translate;\n\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to translate\n * @param {vec3} v vector to translate by\n * @returns {mat4} out\n */\nfunction translate(out, a, v) {\n    var x = v[0], y = v[1], z = v[2],\n        a00, a01, a02, a03,\n        a10, a11, a12, a13,\n        a20, a21, a22, a23;\n\n    if (a === out) {\n        out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n        out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n        out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n        out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n    } else {\n        a00 = a[0]; a01 = a[1]; a02 = a[2]; a03 = a[3];\n        a10 = a[4]; a11 = a[5]; a12 = a[6]; a13 = a[7];\n        a20 = a[8]; a21 = a[9]; a22 = a[10]; a23 = a[11];\n\n        out[0] = a00; out[1] = a01; out[2] = a02; out[3] = a03;\n        out[4] = a10; out[5] = a11; out[6] = a12; out[7] = a13;\n        out[8] = a20; out[9] = a21; out[10] = a22; out[11] = a23;\n\n        out[12] = a00 * x + a10 * y + a20 * z + a[12];\n        out[13] = a01 * x + a11 * y + a21 * z + a[13];\n        out[14] = a02 * x + a12 * y + a22 * z + a[14];\n        out[15] = a03 * x + a13 * y + a23 * z + a[15];\n    }\n\n    return out;\n};","module.exports = scale;\n\n/**\n * Scales the mat4 by the dimensions in the given vec3\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to scale\n * @param {vec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\nfunction scale(out, a, v) {\n    var x = v[0], y = v[1], z = v[2];\n\n    out[0] = a[0] * x;\n    out[1] = a[1] * x;\n    out[2] = a[2] * x;\n    out[3] = a[3] * x;\n    out[4] = a[4] * y;\n    out[5] = a[5] * y;\n    out[6] = a[6] * y;\n    out[7] = a[7] * y;\n    out[8] = a[8] * z;\n    out[9] = a[9] * z;\n    out[10] = a[10] * z;\n    out[11] = a[11] * z;\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n};","module.exports = rotate;\n\n/**\n * Rotates a mat4 by the given angle\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {vec3} axis the axis to rotate around\n * @returns {mat4} out\n */\nfunction rotate(out, a, rad, axis) {\n    var x = axis[0], y = axis[1], z = axis[2],\n        len = Math.sqrt(x * x + y * y + z * z),\n        s, c, t,\n        a00, a01, a02, a03,\n        a10, a11, a12, a13,\n        a20, a21, a22, a23,\n        b00, b01, b02,\n        b10, b11, b12,\n        b20, b21, b22;\n\n    if (Math.abs(len) < 0.000001) { return null; }\n    \n    len = 1 / len;\n    x *= len;\n    y *= len;\n    z *= len;\n\n    s = Math.sin(rad);\n    c = Math.cos(rad);\n    t = 1 - c;\n\n    a00 = a[0]; a01 = a[1]; a02 = a[2]; a03 = a[3];\n    a10 = a[4]; a11 = a[5]; a12 = a[6]; a13 = a[7];\n    a20 = a[8]; a21 = a[9]; a22 = a[10]; a23 = a[11];\n\n    // Construct the elements of the rotation matrix\n    b00 = x * x * t + c; b01 = y * x * t + z * s; b02 = z * x * t - y * s;\n    b10 = x * y * t - z * s; b11 = y * y * t + c; b12 = z * y * t + x * s;\n    b20 = x * z * t + y * s; b21 = y * z * t - x * s; b22 = z * z * t + c;\n\n    // Perform rotation-specific matrix multiplication\n    out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n    out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n    out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n    out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n    out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n    out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n    out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n    out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n    out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n    out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n    out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n    out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n    if (a !== out) { // If the source and destination differ, copy the unchanged last row\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n    return out;\n};","module.exports = rotateX;\n\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nfunction rotateX(out, a, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad),\n        a10 = a[4],\n        a11 = a[5],\n        a12 = a[6],\n        a13 = a[7],\n        a20 = a[8],\n        a21 = a[9],\n        a22 = a[10],\n        a23 = a[11];\n\n    if (a !== out) { // If the source and destination differ, copy the unchanged rows\n        out[0]  = a[0];\n        out[1]  = a[1];\n        out[2]  = a[2];\n        out[3]  = a[3];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n\n    // Perform axis-specific matrix multiplication\n    out[4] = a10 * c + a20 * s;\n    out[5] = a11 * c + a21 * s;\n    out[6] = a12 * c + a22 * s;\n    out[7] = a13 * c + a23 * s;\n    out[8] = a20 * c - a10 * s;\n    out[9] = a21 * c - a11 * s;\n    out[10] = a22 * c - a12 * s;\n    out[11] = a23 * c - a13 * s;\n    return out;\n};","module.exports = rotateY;\n\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nfunction rotateY(out, a, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad),\n        a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a03 = a[3],\n        a20 = a[8],\n        a21 = a[9],\n        a22 = a[10],\n        a23 = a[11];\n\n    if (a !== out) { // If the source and destination differ, copy the unchanged rows\n        out[4]  = a[4];\n        out[5]  = a[5];\n        out[6]  = a[6];\n        out[7]  = a[7];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n\n    // Perform axis-specific matrix multiplication\n    out[0] = a00 * c - a20 * s;\n    out[1] = a01 * c - a21 * s;\n    out[2] = a02 * c - a22 * s;\n    out[3] = a03 * c - a23 * s;\n    out[8] = a00 * s + a20 * c;\n    out[9] = a01 * s + a21 * c;\n    out[10] = a02 * s + a22 * c;\n    out[11] = a03 * s + a23 * c;\n    return out;\n};","module.exports = rotateZ;\n\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nfunction rotateZ(out, a, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad),\n        a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a03 = a[3],\n        a10 = a[4],\n        a11 = a[5],\n        a12 = a[6],\n        a13 = a[7];\n\n    if (a !== out) { // If the source and destination differ, copy the unchanged last row\n        out[8]  = a[8];\n        out[9]  = a[9];\n        out[10] = a[10];\n        out[11] = a[11];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n\n    // Perform axis-specific matrix multiplication\n    out[0] = a00 * c + a10 * s;\n    out[1] = a01 * c + a11 * s;\n    out[2] = a02 * c + a12 * s;\n    out[3] = a03 * c + a13 * s;\n    out[4] = a10 * c - a00 * s;\n    out[5] = a11 * c - a01 * s;\n    out[6] = a12 * c - a02 * s;\n    out[7] = a13 * c - a03 * s;\n    return out;\n};","module.exports = fromRotation\n\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest)\n *     mat4.rotate(dest, dest, rad, axis)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {vec3} axis the axis to rotate around\n * @returns {mat4} out\n */\nfunction fromRotation(out, rad, axis) {\n  var s, c, t\n  var x = axis[0]\n  var y = axis[1]\n  var z = axis[2]\n  var len = Math.sqrt(x * x + y * y + z * z)\n\n  if (Math.abs(len) < 0.000001) {\n    return null\n  }\n\n  len = 1 / len\n  x *= len\n  y *= len\n  z *= len\n\n  s = Math.sin(rad)\n  c = Math.cos(rad)\n  t = 1 - c\n\n  // Perform rotation-specific matrix multiplication\n  out[0] = x * x * t + c\n  out[1] = y * x * t + z * s\n  out[2] = z * x * t - y * s\n  out[3] = 0\n  out[4] = x * y * t - z * s\n  out[5] = y * y * t + c\n  out[6] = z * y * t + x * s\n  out[7] = 0\n  out[8] = x * z * t + y * s\n  out[9] = y * z * t - x * s\n  out[10] = z * z * t + c\n  out[11] = 0\n  out[12] = 0\n  out[13] = 0\n  out[14] = 0\n  out[15] = 1\n  return out\n}\n","module.exports = fromRotationTranslation;\n\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     var quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {vec3} v Translation vector\n * @returns {mat4} out\n */\nfunction fromRotationTranslation(out, q, v) {\n    // Quaternion math\n    var x = q[0], y = q[1], z = q[2], w = q[3],\n        x2 = x + x,\n        y2 = y + y,\n        z2 = z + z,\n\n        xx = x * x2,\n        xy = x * y2,\n        xz = x * z2,\n        yy = y * y2,\n        yz = y * z2,\n        zz = z * z2,\n        wx = w * x2,\n        wy = w * y2,\n        wz = w * z2;\n\n    out[0] = 1 - (yy + zz);\n    out[1] = xy + wz;\n    out[2] = xz - wy;\n    out[3] = 0;\n    out[4] = xy - wz;\n    out[5] = 1 - (xx + zz);\n    out[6] = yz + wx;\n    out[7] = 0;\n    out[8] = xz + wy;\n    out[9] = yz - wx;\n    out[10] = 1 - (xx + yy);\n    out[11] = 0;\n    out[12] = v[0];\n    out[13] = v[1];\n    out[14] = v[2];\n    out[15] = 1;\n    \n    return out;\n};","module.exports = fromScaling\n\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest)\n *     mat4.scale(dest, dest, vec)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {vec3} v Scaling vector\n * @returns {mat4} out\n */\nfunction fromScaling(out, v) {\n  out[0] = v[0]\n  out[1] = 0\n  out[2] = 0\n  out[3] = 0\n  out[4] = 0\n  out[5] = v[1]\n  out[6] = 0\n  out[7] = 0\n  out[8] = 0\n  out[9] = 0\n  out[10] = v[2]\n  out[11] = 0\n  out[12] = 0\n  out[13] = 0\n  out[14] = 0\n  out[15] = 1\n  return out\n}\n","module.exports = fromTranslation\n\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest)\n *     mat4.translate(dest, dest, vec)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {vec3} v Translation vector\n * @returns {mat4} out\n */\nfunction fromTranslation(out, v) {\n  out[0] = 1\n  out[1] = 0\n  out[2] = 0\n  out[3] = 0\n  out[4] = 0\n  out[5] = 1\n  out[6] = 0\n  out[7] = 0\n  out[8] = 0\n  out[9] = 0\n  out[10] = 1\n  out[11] = 0\n  out[12] = v[0]\n  out[13] = v[1]\n  out[14] = v[2]\n  out[15] = 1\n  return out\n}\n","module.exports = fromXRotation\n\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest)\n *     mat4.rotateX(dest, dest, rad)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nfunction fromXRotation(out, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad)\n\n    // Perform axis-specific matrix multiplication\n    out[0] = 1\n    out[1] = 0\n    out[2] = 0\n    out[3] = 0\n    out[4] = 0\n    out[5] = c\n    out[6] = s\n    out[7] = 0\n    out[8] = 0\n    out[9] = -s\n    out[10] = c\n    out[11] = 0\n    out[12] = 0\n    out[13] = 0\n    out[14] = 0\n    out[15] = 1\n    return out\n}","module.exports = fromYRotation\n\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest)\n *     mat4.rotateY(dest, dest, rad)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nfunction fromYRotation(out, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad)\n\n    // Perform axis-specific matrix multiplication\n    out[0] = c\n    out[1] = 0\n    out[2] = -s\n    out[3] = 0\n    out[4] = 0\n    out[5] = 1\n    out[6] = 0\n    out[7] = 0\n    out[8] = s\n    out[9] = 0\n    out[10] = c\n    out[11] = 0\n    out[12] = 0\n    out[13] = 0\n    out[14] = 0\n    out[15] = 1\n    return out\n}","module.exports = fromZRotation\n\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest)\n *     mat4.rotateZ(dest, dest, rad)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nfunction fromZRotation(out, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad)\n\n    // Perform axis-specific matrix multiplication\n    out[0] = c\n    out[1] = s\n    out[2] = 0\n    out[3] = 0\n    out[4] = -s\n    out[5] = c\n    out[6] = 0\n    out[7] = 0\n    out[8] = 0\n    out[9] = 0\n    out[10] = 1\n    out[11] = 0\n    out[12] = 0\n    out[13] = 0\n    out[14] = 0\n    out[15] = 1\n    return out\n}","module.exports = fromQuat;\n\n/**\n * Creates a matrix from a quaternion rotation.\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @returns {mat4} out\n */\nfunction fromQuat(out, q) {\n    var x = q[0], y = q[1], z = q[2], w = q[3],\n        x2 = x + x,\n        y2 = y + y,\n        z2 = z + z,\n\n        xx = x * x2,\n        yx = y * x2,\n        yy = y * y2,\n        zx = z * x2,\n        zy = z * y2,\n        zz = z * z2,\n        wx = w * x2,\n        wy = w * y2,\n        wz = w * z2;\n\n    out[0] = 1 - yy - zz;\n    out[1] = yx + wz;\n    out[2] = zx - wy;\n    out[3] = 0;\n\n    out[4] = yx - wz;\n    out[5] = 1 - xx - zz;\n    out[6] = zy + wx;\n    out[7] = 0;\n\n    out[8] = zx + wy;\n    out[9] = zy - wx;\n    out[10] = 1 - xx - yy;\n    out[11] = 0;\n\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n\n    return out;\n};","module.exports = frustum;\n\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\nfunction frustum(out, left, right, bottom, top, near, far) {\n    var rl = 1 / (right - left),\n        tb = 1 / (top - bottom),\n        nf = 1 / (near - far);\n    out[0] = (near * 2) * rl;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = (near * 2) * tb;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = (right + left) * rl;\n    out[9] = (top + bottom) * tb;\n    out[10] = (far + near) * nf;\n    out[11] = -1;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = (far * near * 2) * nf;\n    out[15] = 0;\n    return out;\n};","module.exports = perspectiveFromFieldOfView;\n\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nfunction perspectiveFromFieldOfView(out, fov, near, far) {\n    var upTan = Math.tan(fov.upDegrees * Math.PI/180.0),\n        downTan = Math.tan(fov.downDegrees * Math.PI/180.0),\n        leftTan = Math.tan(fov.leftDegrees * Math.PI/180.0),\n        rightTan = Math.tan(fov.rightDegrees * Math.PI/180.0),\n        xScale = 2.0 / (leftTan + rightTan),\n        yScale = 2.0 / (upTan + downTan);\n\n    out[0] = xScale;\n    out[1] = 0.0;\n    out[2] = 0.0;\n    out[3] = 0.0;\n    out[4] = 0.0;\n    out[5] = yScale;\n    out[6] = 0.0;\n    out[7] = 0.0;\n    out[8] = -((leftTan - rightTan) * xScale * 0.5);\n    out[9] = ((upTan - downTan) * yScale * 0.5);\n    out[10] = far / (near - far);\n    out[11] = -1.0;\n    out[12] = 0.0;\n    out[13] = 0.0;\n    out[14] = (far * near) / (near - far);\n    out[15] = 0.0;\n    return out;\n}\n\n","module.exports = ortho;\n\n/**\n * Generates a orthogonal projection matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nfunction ortho(out, left, right, bottom, top, near, far) {\n    var lr = 1 / (left - right),\n        bt = 1 / (bottom - top),\n        nf = 1 / (near - far);\n    out[0] = -2 * lr;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = -2 * bt;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 2 * nf;\n    out[11] = 0;\n    out[12] = (left + right) * lr;\n    out[13] = (top + bottom) * bt;\n    out[14] = (far + near) * nf;\n    out[15] = 1;\n    return out;\n};","module.exports = str;\n\n/**\n * Returns a string representation of a mat4\n *\n * @param {mat4} mat matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\nfunction str(a) {\n    return 'mat4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' +\n                    a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' +\n                    a[8] + ', ' + a[9] + ', ' + a[10] + ', ' + a[11] + ', ' + \n                    a[12] + ', ' + a[13] + ', ' + a[14] + ', ' + a[15] + ')';\n};","module.exports = {\n  create: require('./create')\n  , clone: require('./clone')\n  , copy: require('./copy')\n  , identity: require('./identity')\n  , transpose: require('./transpose')\n  , invert: require('./invert')\n  , adjoint: require('./adjoint')\n  , determinant: require('./determinant')\n  , multiply: require('./multiply')\n  , translate: require('./translate')\n  , scale: require('./scale')\n  , rotate: require('./rotate')\n  , rotateX: require('./rotateX')\n  , rotateY: require('./rotateY')\n  , rotateZ: require('./rotateZ')\n  , fromRotation: require('./fromRotation')\n  , fromRotationTranslation: require('./fromRotationTranslation')\n  , fromScaling: require('./fromScaling')\n  , fromTranslation: require('./fromTranslation')\n  , fromXRotation: require('./fromXRotation')\n  , fromYRotation: require('./fromYRotation')\n  , fromZRotation: require('./fromZRotation')\n  , fromQuat: require('./fromQuat')\n  , frustum: require('./frustum')\n  , perspective: require('./perspective')\n  , perspectiveFromFieldOfView: require('./perspectiveFromFieldOfView')\n  , ortho: require('./ortho')\n  , lookAt: require('./lookAt')\n  , str: require('./str')\n}\n","const OrbitControls = (dom) => {\n  let x = 0;\n  let y = 0;\n  \n  const move = (moveX, moveY, sensitivity = 1) => {\n    x += moveX * sensitivity;\n    y += moveY * sensitivity;\n    y = Math.min(Math.max(y, -90), 90);\n  };\n  \n  dom.addEventListener('mousemove', (event) => {\n    if (event.buttons & 1) {\n      move(event.movementX, event.movementY, 1/4);\n    }\n  });\n  \n  const touches = new Map();\n  dom.addEventListener('touchstart', (event) => {\n    for (let i = 0; i < event.changedTouches.length; ++i) {\n      const touch = event.changedTouches[i];\n      touches.set(touch.id, [touch.clientX, touch.clientY]);\n    }\n  });\n  dom.addEventListener('touchmove', (event) => {\n    for (let i = 0; i < event.changedTouches.length; ++i) {\n      const touch = event.changedTouches[i];\n      const [lastX, lastY] = touches.get(touch.id);\n      move(touch.clientX - lastX, touch.clientY - lastY, 1/2);\n      touches.set(touch.id, [touch.clientX, touch.clientY]);\n    }\n  });\n  dom.addEventListener('touchend', (event) => {\n    for (let i = 0; i < event.changedTouches.length; ++i) {\n      touches.delete(event.changedTouches[i].id);\n    }\n  });\n  dom.addEventListener('touchcancel', (event) => {\n    for (let i = 0; i < event.changedTouches.length; ++i) {\n      touches.delete(event.changedTouches[i].id);\n    }\n  });\n  \n  return () => [x, y].map(angle => angle * Math.PI / 180);\n};\n\nexport default OrbitControls;","import { Group } from 'two.js';\n\nconst computeDistance = ([x1, y1, z1], [x2, y2, z2]) => {\n  return Math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2 + (z2 - z1) ** 2);\n};\n\nconst makeGroup = (vertex, children) => {\n  const root = new Group();\n  const groupA = new Group();\n  const groupB = new Group();\n  root.add(groupA, groupB);\n  let flip = false;\n  \n  const update = (project, cameraPosition) => {\n    flip = !flip;\n    const group = flip ? groupA : groupB;\n    \n    const childrenWithDepth = children.map(([child, , getCentroid]) => [child, computeDistance(cameraPosition, getCentroid())]);\n    const depthSortedChildren = childrenWithDepth.sort(([, depthA], [, depthB]) => depthB - depthA);\n    \n    group.add(depthSortedChildren.map(([child]) => child));\n    children.forEach(([, update]) => update(project, cameraPosition));\n  };\n  \n  const getCentroid = () => vertex;\n  \n  return [root, update, getCentroid];\n};\n\nexport default makeGroup;","const computeCentroid = (vertices) => {\n  let sumX = 0;\n  let sumY = 0;\n  let sumZ = 0;\n  for (let i = 0; i < vertices.length; ++i) {\n    const [x, y, z] = vertices[i][0].length ? vertices[i][0] : vertices[i];\n    sumX += x;\n    sumY += y;\n    sumZ += z;\n  }\n  return [sumX, sumY, sumZ].map((value) => value / vertices.length);\n};\n\nexport default computeCentroid;","import { Anchor, Commands } from 'two.js';\n\nconst makeUpdateVertex = (anchor, vertex) => (project) => {\n  const [x, y] = project(vertex);\n  anchor.x = x;\n  anchor.y = y;\n};\n\nconst makeUpdateAnchor = (anchor, vertex, left, right) => (project) => {\n  const [x, y] = project(vertex);\n  anchor.x = x;\n  anchor.y = y;\n  const [lx, ly] = project(left);\n  anchor.controls.left.x = lx - x;\n  anchor.controls.left.y = ly - y;\n  const [rx, ry] = project(right);\n  anchor.controls.right.x = rx - x;\n  anchor.controls.right.y = ry - y;\n};\n\nconst makeAnchor = ([a, b, c]) => {\n  const command = a.length ? Commands.curve : Commands.line;\n  const anchor = new Anchor(0,0, 0,0, 0,0, command);\n  const updateAnchor = command !== Commands.curve ? makeUpdateVertex(anchor, [a, b, c])\n    : makeUpdateAnchor(anchor, a, b.map((v,n) => v+a[n]), c.map((v,n) => v+a[n]));\n  return [anchor, updateAnchor];\n};\n\nexport default makeAnchor;","// based on https://en.wikipedia.org/wiki/Graham_scan\n\nimport { Anchor, Ellipse, Group, Path } from 'two.js';\nimport computeCentroid from './compute-centroid';\nimport makeAnchor from './make-anchor';\n\nconst computeCrossProductZ = ([x1, y1], [x2, y2], [x3, y3]) => {\n  return (x2 - x1) * (y3 - y1) - (y2 - y1) * (x3 - x1);\n};\n\nconst findOuterRoute = (sortedVertices) => {\n  const route = [];\n  for (let i = 0; i < sortedVertices.length; ++i) {\n    const vertex = sortedVertices[i];\n    while (route.length > 1 && computeCrossProductZ(route[route.length-2], route[route.length-1], vertex) > 0) {\n      route.pop();\n    }\n    if (route.length === 0 || route[route.length-1][0] !== vertex[0] || route[route.length-1][1] !== vertex[1]) {\n      route.push(vertex);\n    }\n  }\n  return route;\n};\n\nconst makeHull = (vertices, fill, stroke, strokeWidth, curved) => {\n  const root = new Group();\n  const update = (project) => {\n    root.remove(root.children);\n    const projectedVertices = vertices.map((vertex) => project(vertex));\n    const sortedVertices = projectedVertices.sort(([x1, y1], [x2, y2]) => x1 !== x2 ? x1 - x2 : y1 - y2);\n    const routeA = findOuterRoute(sortedVertices);\n    sortedVertices.reverse();\n    const routeB = findOuterRoute(sortedVertices);\n    routeA.pop();\n    routeB.pop();\n    const route = [...routeA, ...routeB];\n    const path = new Path(route.map(([x, y]) => new Anchor(x,y, 0,0, 0,0)), true, curved, false);\n    path.fill = fill;\n    path.stroke = stroke;\n    path.linewidth = strokeWidth;\n    path.cap = 'round';\n    path.join = 'round';\n    root.add(path);\n  };\n  const getCentroid = () => computeCentroid(vertices);\n  return [root, update, getCentroid];\n};\n\nexport default makeHull;","import { Path, Anchor, Commands } from 'two.js';\nimport computeCentroid from './compute-centroid';\nimport makeAnchor from './make-anchor';\n\nconst makePath = (vertices, fill, stroke, strokeWidth, closed, curved) => {\n  const anchors = vertices.map(makeAnchor);\n  const path = new Path(anchors.map(([anchor]) => anchor), closed, curved, false);\n  path.fill = fill;\n  path.stroke = stroke;\n  path.linewidth = strokeWidth;\n  path.cap = 'round';\n  path.join = 'round';\n  const updatePoints = (project) => anchors.forEach(([anchor, updateAnchor]) => updateAnchor(project));\n  const getCentroid = () => computeCentroid(vertices);\n  return [path, updatePoints, getCentroid];\n};\n\nexport default makePath;","module.exports = 0.000001\n","module.exports = create;\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\nfunction create() {\n    var out = new Float32Array(3)\n    out[0] = 0\n    out[1] = 0\n    out[2] = 0\n    return out\n}","module.exports = clone;\n\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {vec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\nfunction clone(a) {\n    var out = new Float32Array(3)\n    out[0] = a[0]\n    out[1] = a[1]\n    out[2] = a[2]\n    return out\n}","module.exports = fromValues;\n\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\nfunction fromValues(x, y, z) {\n    var out = new Float32Array(3)\n    out[0] = x\n    out[1] = y\n    out[2] = z\n    return out\n}","module.exports = angle\n\nvar fromValues = require('./fromValues')\nvar normalize = require('./normalize')\nvar dot = require('./dot')\n\n/**\n * Get the angle between two 3D vectors\n * @param {vec3} a The first operand\n * @param {vec3} b The second operand\n * @returns {Number} The angle in radians\n */\nfunction angle(a, b) {\n    var tempA = fromValues(a[0], a[1], a[2])\n    var tempB = fromValues(b[0], b[1], b[2])\n \n    normalize(tempA, tempA)\n    normalize(tempB, tempB)\n \n    var cosine = dot(tempA, tempB)\n\n    if(cosine > 1.0){\n        return 0\n    } else {\n        return Math.acos(cosine)\n    }     \n}\n","module.exports = equals\n\nvar EPSILON = require('./epsilon')\n\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {vec3} a The first vector.\n * @param {vec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nfunction equals(a, b) {\n  var a0 = a[0]\n  var a1 = a[1]\n  var a2 = a[2]\n  var b0 = b[0]\n  var b1 = b[1]\n  var b2 = b[2]\n  return (Math.abs(a0 - b0) <= EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n          Math.abs(a1 - b1) <= EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\n          Math.abs(a2 - b2) <= EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)))\n}\n","module.exports = exactEquals\n\n/**\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\n *\n * @param {vec3} a The first vector.\n * @param {vec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nfunction exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2]\n}\n","module.exports = require('./subtract')\n","module.exports = multiply;\n\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nfunction multiply(out, a, b) {\n    out[0] = a[0] * b[0]\n    out[1] = a[1] * b[1]\n    out[2] = a[2] * b[2]\n    return out\n}","module.exports = require('./multiply')\n","module.exports = divide;\n\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nfunction divide(out, a, b) {\n    out[0] = a[0] / b[0]\n    out[1] = a[1] / b[1]\n    out[2] = a[2] / b[2]\n    return out\n}","module.exports = require('./divide')\n","module.exports = min;\n\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nfunction min(out, a, b) {\n    out[0] = Math.min(a[0], b[0])\n    out[1] = Math.min(a[1], b[1])\n    out[2] = Math.min(a[2], b[2])\n    return out\n}","module.exports = max;\n\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nfunction max(out, a, b) {\n    out[0] = Math.max(a[0], b[0])\n    out[1] = Math.max(a[1], b[1])\n    out[2] = Math.max(a[2], b[2])\n    return out\n}","module.exports = floor\n\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to floor\n * @returns {vec3} out\n */\nfunction floor(out, a) {\n  out[0] = Math.floor(a[0])\n  out[1] = Math.floor(a[1])\n  out[2] = Math.floor(a[2])\n  return out\n}\n","module.exports = ceil\n\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to ceil\n * @returns {vec3} out\n */\nfunction ceil(out, a) {\n  out[0] = Math.ceil(a[0])\n  out[1] = Math.ceil(a[1])\n  out[2] = Math.ceil(a[2])\n  return out\n}\n","module.exports = round\n\n/**\n * Math.round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to round\n * @returns {vec3} out\n */\nfunction round(out, a) {\n  out[0] = Math.round(a[0])\n  out[1] = Math.round(a[1])\n  out[2] = Math.round(a[2])\n  return out\n}\n","module.exports = distance;\n\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} distance between a and b\n */\nfunction distance(a, b) {\n    var x = b[0] - a[0],\n        y = b[1] - a[1],\n        z = b[2] - a[2]\n    return Math.sqrt(x*x + y*y + z*z)\n}","module.exports = require('./distance')\n","module.exports = require('./squaredDistance')\n","module.exports = length;\n\n/**\n * Calculates the length of a vec3\n *\n * @param {vec3} a vector to calculate length of\n * @returns {Number} length of a\n */\nfunction length(a) {\n    var x = a[0],\n        y = a[1],\n        z = a[2]\n    return Math.sqrt(x*x + y*y + z*z)\n}","module.exports = require('./length')\n","module.exports = squaredLength;\n\n/**\n * Calculates the squared length of a vec3\n *\n * @param {vec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nfunction squaredLength(a) {\n    var x = a[0],\n        y = a[1],\n        z = a[2]\n    return x*x + y*y + z*z\n}","module.exports = require('./squaredLength')\n","module.exports = negate;\n\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to negate\n * @returns {vec3} out\n */\nfunction negate(out, a) {\n    out[0] = -a[0]\n    out[1] = -a[1]\n    out[2] = -a[2]\n    return out\n}","module.exports = inverse;\n\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to invert\n * @returns {vec3} out\n */\nfunction inverse(out, a) {\n  out[0] = 1.0 / a[0]\n  out[1] = 1.0 / a[1]\n  out[2] = 1.0 / a[2]\n  return out\n}","module.exports = lerp;\n\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec3} out\n */\nfunction lerp(out, a, b, t) {\n    var ax = a[0],\n        ay = a[1],\n        az = a[2]\n    out[0] = ax + t * (b[0] - ax)\n    out[1] = ay + t * (b[1] - ay)\n    out[2] = az + t * (b[2] - az)\n    return out\n}","module.exports = random;\n\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\nfunction random(out, scale) {\n    scale = scale || 1.0\n\n    var r = Math.random() * 2.0 * Math.PI\n    var z = (Math.random() * 2.0) - 1.0\n    var zScale = Math.sqrt(1.0-z*z) * scale\n\n    out[0] = Math.cos(r) * zScale\n    out[1] = Math.sin(r) * zScale\n    out[2] = z * scale\n    return out\n}","module.exports = transformMat4;\n\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {mat4} m matrix to transform with\n * @returns {vec3} out\n */\nfunction transformMat4(out, a, m) {\n    var x = a[0], y = a[1], z = a[2],\n        w = m[3] * x + m[7] * y + m[11] * z + m[15]\n    w = w || 1.0\n    out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w\n    out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w\n    out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w\n    return out\n}","module.exports = transformMat3;\n\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {mat4} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\nfunction transformMat3(out, a, m) {\n    var x = a[0], y = a[1], z = a[2]\n    out[0] = x * m[0] + y * m[3] + z * m[6]\n    out[1] = x * m[1] + y * m[4] + z * m[7]\n    out[2] = x * m[2] + y * m[5] + z * m[8]\n    return out\n}","module.exports = transformQuat;\n\n/**\n * Transforms the vec3 with a quat\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {quat} q quaternion to transform with\n * @returns {vec3} out\n */\nfunction transformQuat(out, a, q) {\n    // benchmarks: http://jsperf.com/quaternion-transform-vec3-implementations\n\n    var x = a[0], y = a[1], z = a[2],\n        qx = q[0], qy = q[1], qz = q[2], qw = q[3],\n\n        // calculate quat * vec\n        ix = qw * x + qy * z - qz * y,\n        iy = qw * y + qz * x - qx * z,\n        iz = qw * z + qx * y - qy * x,\n        iw = -qx * x - qy * y - qz * z\n\n    // calculate result * inverse quat\n    out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy\n    out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz\n    out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx\n    return out\n}","module.exports = rotateX;\n\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {vec3} a The vec3 point to rotate\n * @param {vec3} b The origin of the rotation\n * @param {Number} c The angle of rotation\n * @returns {vec3} out\n */\nfunction rotateX(out, a, b, c){\n    var by = b[1]\n    var bz = b[2]\n\n    // Translate point to the origin\n    var py = a[1] - by\n    var pz = a[2] - bz\n\n    var sc = Math.sin(c)\n    var cc = Math.cos(c)\n\n    // perform rotation and translate to correct position\n    out[0] = a[0]\n    out[1] = by + py * cc - pz * sc\n    out[2] = bz + py * sc + pz * cc\n\n    return out\n}\n","module.exports = rotateY;\n\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {vec3} a The vec3 point to rotate\n * @param {vec3} b The origin of the rotation\n * @param {Number} c The angle of rotation\n * @returns {vec3} out\n */\nfunction rotateY(out, a, b, c){\n    var bx = b[0]\n    var bz = b[2]\n\n    // translate point to the origin\n    var px = a[0] - bx\n    var pz = a[2] - bz\n    \n    var sc = Math.sin(c)\n    var cc = Math.cos(c)\n  \n    // perform rotation and translate to correct position\n    out[0] = bx + pz * sc + px * cc\n    out[1] = a[1]\n    out[2] = bz + pz * cc - px * sc\n  \n    return out\n}\n","module.exports = rotateZ;\n\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {vec3} a The vec3 point to rotate\n * @param {vec3} b The origin of the rotation\n * @param {Number} c The angle of rotation\n * @returns {vec3} out\n */\nfunction rotateZ(out, a, b, c){\n    var bx = b[0]\n    var by = b[1]\n\n    //Translate point to the origin\n    var px = a[0] - bx\n    var py = a[1] - by\n  \n    var sc = Math.sin(c)\n    var cc = Math.cos(c)\n\n    // perform rotation and translate to correct position\n    out[0] = bx + px * cc - py * sc\n    out[1] = by + px * sc + py * cc\n    out[2] = a[2]\n  \n    return out\n}\n","module.exports = forEach;\n\nvar vec = require('./create')()\n\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nfunction forEach(a, stride, offset, count, fn, arg) {\n        var i, l\n        if(!stride) {\n            stride = 3\n        }\n\n        if(!offset) {\n            offset = 0\n        }\n        \n        if(count) {\n            l = Math.min((count * stride) + offset, a.length)\n        } else {\n            l = a.length\n        }\n\n        for(i = offset; i < l; i += stride) {\n            vec[0] = a[i] \n            vec[1] = a[i+1] \n            vec[2] = a[i+2]\n            fn(vec, vec, arg)\n            a[i] = vec[0] \n            a[i+1] = vec[1] \n            a[i+2] = vec[2]\n        }\n        \n        return a\n}","module.exports = {\n  EPSILON: require('./epsilon')\n  , create: require('./create')\n  , clone: require('./clone')\n  , angle: require('./angle')\n  , fromValues: require('./fromValues')\n  , copy: require('./copy')\n  , set: require('./set')\n  , equals: require('./equals')\n  , exactEquals: require('./exactEquals')\n  , add: require('./add')\n  , subtract: require('./subtract')\n  , sub: require('./sub')\n  , multiply: require('./multiply')\n  , mul: require('./mul')\n  , divide: require('./divide')\n  , div: require('./div')\n  , min: require('./min')\n  , max: require('./max')\n  , floor: require('./floor')\n  , ceil: require('./ceil')\n  , round: require('./round')\n  , scale: require('./scale')\n  , scaleAndAdd: require('./scaleAndAdd')\n  , distance: require('./distance')\n  , dist: require('./dist')\n  , squaredDistance: require('./squaredDistance')\n  , sqrDist: require('./sqrDist')\n  , length: require('./length')\n  , len: require('./len')\n  , squaredLength: require('./squaredLength')\n  , sqrLen: require('./sqrLen')\n  , negate: require('./negate')\n  , inverse: require('./inverse')\n  , normalize: require('./normalize')\n  , dot: require('./dot')\n  , cross: require('./cross')\n  , lerp: require('./lerp')\n  , random: require('./random')\n  , transformMat4: require('./transformMat4')\n  , transformMat3: require('./transformMat3')\n  , transformQuat: require('./transformQuat')\n  , rotateX: require('./rotateX')\n  , rotateY: require('./rotateY')\n  , rotateZ: require('./rotateZ')\n  , forEach: require('./forEach')\n}\n","import { create as createMat4, invert as invertMat4 } from 'gl-mat4';\nimport { create as createVec3, transformMat4 } from 'gl-vec3';\n\nconst makeTransform = ([child, updateChild, getChildCentroid], transform) => {\n  const transformedVec3 = createVec3();\n  const invertedMat4 = createMat4();\n  \n  const update = (project, cameraPosition) => {\n    const transformProject = (vec3) => {\n      transformMat4(transformedVec3, vec3, transform);\n      return project(transformedVec3);\n    };\n    invertMat4(invertedMat4, transform);\n    transformMat4(transformedVec3, cameraPosition, invertedMat4);\n    updateChild(transformProject, transformedVec3);\n  };\n  \n  const getCentroid = () => {\n    const centroid = getChildCentroid();\n    transformMat4(transformedVec3, centroid, transform);\n    return transformedVec3;\n  };\n  \n  return [child, update, getCentroid];\n};\n\nexport default makeTransform;","// client-side js\n// run by the browser each time your view template is loaded\n\nimport Two from 'two.js';\nimport createCamera from 'perspective-camera';\nimport {\n  create as createMat4,\n  identity as identityMat4,\n  rotate as rotateMat4,\n  translate as translateMat4,\n} from 'gl-mat4';\n\nimport Input from './controls';\nimport makeGroup from '../make-group';\nimport makeHull from '../make-hull';\nimport makePath from '../make-path';\nimport makeTransform from '../make-transform';\n\nconst two = new Two({\n  width: 400,\n  height: 400,\n}).appendTo(document.body);\n\ntwo.renderer.domElement.setAttribute('viewBox', `0 0 ${two.width} ${two.height}`);\ntwo.renderer.domElement.removeAttribute('width');\ntwo.renderer.domElement.removeAttribute('height');\ntwo.renderer.domElement.setAttribute('id', 'main');\n\nconst camera = createCamera({\n  fov: 30,\n  near: 1,\n  far: 20,\n  viewport: [0, 0, two.width, two.height],\n});\n\nconst input = Input(two.renderer.domElement);\n\nconst filter = Two.SVGRenderer.Utils.createElement('filter', { id: 'shadow' });\nconst erode = Two.SVGRenderer.Utils.createElement('feMorphology', { in: 'SourceAlpha', operator: 'erode', radius: 2 });\nconst blur = Two.SVGRenderer.Utils.createElement('feGaussianBlur', { stdDeviation: 5 });\nconst blend = Two.SVGRenderer.Utils.createElement('feBlend', { in: 'SourceGraphic' });\nfilter.appendChild(erode);\nfilter.appendChild(blur);\nfilter.appendChild(blend);\ntwo.renderer.defs.appendChild(filter);\n\nconst makeCircle = (segments, radius, height) => {\n  return [...Array(segments).keys()].map((i) => {\n    const angle = (i / segments) * Math.PI * 2;\n    return [Math.cos(angle) * radius, height, Math.sin(angle) * radius];\n  });\n};\n\nconst face = makeGroup([0, 0, 3], [\n  makePath([[-1,1,3],[-1,2,3]], 'transparent', 'black', 5, false, false),\n  makePath([[1,1,3],[1,2,3]], 'transparent', 'black', 5, false, false),\n  makePath([[[-2,-0.5,3],[0,0,0],[1,-1.5,0]], [[2,-0.5,3],[-1,-1.5,0],[0,0,0]]], 'transparent', 'black', 5, false, true),\n]);\n\nconst bottom = makePath([[-3,-3,-3], [-3,-3,3], [3,-3,3], [3,-3,-3]], 'green', 'black', 3, true, false);\nconst head = makeGroup([0, 0, 0], [\n  makePath([[-3,3,-3], [-3,3,3], [3,3,3], [3,3,-3]], 'red', 'black', 3, true, false),\n  bottom,\n  makePath([[-3,-3,-3], [-3,3,-3], [3,3,-3], [3,-3,-3]], 'blue', 'black', 3, true, false),\n  makePath([[-3,-3,3], [-3,3,3], [3,3,3], [3,-3,3]], 'yellow', 'black', 3, true, false),\n  makePath([[-3,-3,-3], [-3,-3,3], [-3,3,3], [-3,3,-3]], 'pink', 'black', 3, true, false),\n  makePath([[3,-3,-3], [3,-3,3], [3,3,3], [3,3,-3]], 'orange', 'black', 3, true, false),\n  face,\n]);\n\nconst hat = makeGroup([0, 3, 0], [\n  makeHull([...makeCircle(16, 3, 0), ...makeCircle(16, 2.8, 0.5), ...makeCircle(16, 2.5, 1), ...makeCircle(16, 2, 1.5), ...makeCircle(16, 1.25, 1.85), [0, 2, 0]], 'green', 'black', 3, true),\n  makeHull([...makeCircle(8, 0.25, 2), ...makeCircle(8, 0.25, 2.125)], 'green', 'black', 3, true),\n  makeGroup([0, -1, 0], [\n    makePath([[-3,0,0], [[-3,0,0],[0,0,0],[1,0,3]], [[0,0,4.5],[-1.5,0,0],[0,0,0]], [[0,0,4.5],[0,0,0],[1.5,0,0]], [[3,0,0],[-1,0,3],[0,0,0]], [3,0,0]], 'green', 'black', 3, true, true),\n  ]),\n]);\n\nconst hatTransform = createMat4();\ntranslateMat4(hatTransform, hatTransform, [0, 3, 0]);\nconst hatInput = document.getElementById('hat');\n\nconst [rootGroup, updateRoot] = makeGroup([0, 0, 0], [\n  head, makeTransform(hat, hatTransform),\n]);\n\ntwo.add(rootGroup);\n\ntwo.bind('update', () => {\n  const [cameraX, cameraY] = input();\n  const cameraRadius = 10;\n  const cameraRadiusH = Math.cos(cameraY) * cameraRadius;\n  camera.position = [\n    Math.sin(cameraX) * cameraRadiusH,\n    Math.sin(cameraY) * cameraRadius,\n    Math.cos(cameraX) * cameraRadiusH,\n  ];\n  camera.up = Math.abs(cameraY) === Math.PI/2 ? [-Math.sin(cameraX), 0, -Math.cos(cameraX)] : [0, 1, 0];\n  camera.lookAt([0, 0, 0]);\n  \n  identityMat4(hatTransform);\n  translateMat4(hatTransform, hatTransform, [0, 3, 0]);\n  rotateMat4(hatTransform, hatTransform, parseFloat(hatInput.value)*Math.PI/180, [0, 1, 0]);\n  \n  camera.update();\n  updateRoot((vertex) => camera.project(vertex), camera.position);\n}).play();\n\ntwo.update();\nTwo.SVGRenderer.Utils.setAttributes(bottom[0]._renderer.elem, { filter: 'url(#shadow)' });\n\nconsole.log('hello world :o');\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else {\n        window.location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}